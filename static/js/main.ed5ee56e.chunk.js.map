{"version":3,"sources":["redux/reducers/uiReducer.js","redux/actionTypes.js","utils/util.js","redux/reducers/wipTaleReducer.js","redux/reducers/rootReducer.js","redux/configStore.js","utils/theme.js","components/layout/header/Header.js","components/layout/sidebar/Sidebar.js","components/layout/footer/Footer.js","components/pages/home/Home.js","components/common/modal/SimpleModal.js","components/pages/createTale/ImportTaleModal.js","components/pages/createTale/CreateTaleIntro.js","components/common/storylet/Choice.js","redux/actionCreators/createTaleActions.js","components/common/storylet/Storylet.js","components/pages/createTale/CreateTaleBody.js","components/pages/createTale/ExportTaleModal.js","components/pages/createTale/CreateTaleFinish.js","components/pages/createTale/CreateTale.js","components/pages/talesFlow/controlPanel/ControlPanel.js","components/pages/talesFlow/controlPanel/JoyStick.js","components/pages/talesFlow/FlowST.js","utils/constants.js","components/pages/talesFlow/FlowConnector.js","components/pages/talesFlow/ModalEditChoice.js","components/pages/talesFlow/flowMaker.js","components/pages/talesFlow/TalesFlow.js","components/common/cards/ComplexCard.js","components/pages/myTales/MyLocalTales.js","utils/routes.js","components/pages/myTales/MyTales.js","App.js","index.js","components/layout/header/style.module.css","assets/img/logo/Reactale-logo-50h-white-bg.png"],"names":["initState","isSidebarOpen","uiReducer","state","action","type","startsWith","src","part","substring","length","make3Figure","num","toString","createStorylet","st","id","title","text","choices","createChoice","c","next","wipTaleReducer","start","info","name","desc","category","lang","tags","idCounter","storylets","storyboard","storyID","Date","getTime","Math","random","replace","newST","wipTale","stID","payload","cID","filter","fieldName","value","sbI","nextStID","isRemoveOnly","newSB","slice","push","selectedCID","fromStID","toStID","fromST","toST","newChoice","indexOf","splice","rootReducer","combineReducers","ui","store","createStore","composeWithDevTools","applyMiddleware","thunk","theme","createMuiTheme","palette","primary","main","red","A700","dark","A900","typography","fontFamily","join","useStyles","makeStyles","menuButton","marginRight","spacing","connect","dispatch","openSidebar","props","classes","className","AppBar","position","Toolbar","IconButton","edge","onClick","color","aria-label","styles","logoContainer","logoImg","alt","Button","list","width","fullList","listItem","borderBottom","icoInList","minWidth","ico","fontSize","navs","url","icon","HomeIcon","AddBoxIcon","BusinessCenterIcon","closeSidebar","Drawer","open","onClose","role","onKeyDown","List","map","nav","index","key","to","ListItem","button","ListItemIcon","ListItemText","root","backgroundColor","padding","links","textDecoration","iconLinks","display","Footer","Box","Grid","container","item","xs","md","Typography","variant","gutterBottom","clsx","href","mt","Home","modalWrapper","overflow","modalBox","window","innerWidth","background","paper","border","boxShadow","shadows","titleBar","margin","modalBody","SimpleModal","isOpen","handleClose","children","Modal","aria-labelledby","aria-describedby","style","innerHeight","ImportTaleModal","setForEditing","useState","importedTxt","setImportedTxt","encType","accept","size","onChange","e","file","target","files","console","log","reader","FileReader","onload","result","readAsText","handleFileSelect","align","my","TextField","label","multiline","rows","fullWidth","tale","JSON","parse","decodeURIComponent","atob","typingVal","val","oldInfo","updateTaleInfo","py","sm","choiceBox","flexGrow","selectChoice","top","left","choiceText","paddingTop","idTag","borderRadius","typingChoiceText","updateChoiceText","handleSelection","isSelected","placeholder","Checkbox","checked","inputProps","actionCreateChoice","Error","getState","textField","marginTop","box","orange","joiner","height","borderLeft","choiceContainer","flexWrap","justifyContent","addChoiceBtn","alignSelf","textAlign","lineHeight","typingStValue","UpdateStField","createAChoice","sbItem","px","pb","pt","noValidate","autoComplete","Fab","ExportTaleModal","expTaleContent","textFieldRef","React","createRef","ref","textRef","t","current","getElementsByTagName","select","setSelectionRange","document","execCommand","setTimeout","alert","clickToCopy","isExpTaleModalVisible","setExpTModalVis","expTale","setExpTale","getWIPTale","localStorageSpace","allStrings","localStorage","hasOwnProperty","content","btoa","encodeURIComponent","stringify","filename","element","createElement","setAttribute","body","appendChild","click","removeChild","download","allReactales","getItem","setItem","createNewTale","saveAndResetAll","setTaleAsWIP","actionSetTaleAsWIP","visibleTabIndex","setVisibleTab","pageTitle","setPageTitle","isImportModalOpen","setIsImportModalOpen","match","setReactaleForEditing","useCallback","params","trim","theTale","useEffect","p","component","mb","startIcon","history","Paper","square","Tabs","indicatorColor","textColor","event","newValue","centered","Tab","panel","backgroundImage","btnPane","alignItems","borderTop","A400","fa","autoMagic","transform","toggleJStick","ControlPanel","deleteComponent","paintFlowboard","faMousePointer","faPencilAlt","faMagic","btn","right","up","down","JoyStick","moveLeft","moveRight","moveUp","moveDown","cg","knot","fill","strokeWidth","stroke","selectedKnot","selectedEl","rect","selectedST","stid","FlowST","transformStyle","selectedObj","handleMouseDown","handleMouseUp","handleMouseMove","markSelected","stopPropagation","onMouseDown","onMouseUp","onMouseMove","x","y","cx","FLOW_ST_WIDTH","cy","r","FLOW_ST_HEIGHT","substr","connector","cid","fontWeight","selectedConnector","FlowConnector","x1","y1","x2","y2","modelST","flexDirection","modelCon","btnPanel","flex","marginLeft","ModalEditChoice","handleSave","txt","setTxt","createFlowboard","levelsSTMap","isAutoFormatting","level","stxy","maxRecInALevel","Object","values","reduce","maxLength","l","longestRowWidth","recsInThisLevel","hGap","i","getTransformStyle","setTransformStyle","setStoryletXY","entryStIDs","allStIDs","idx","getEntryStIDs","keys","putStIntoLevels","currentLevel","alreadyFoundStIDs","levelsDecending","sort","reverse","Array","from","Set","createLevelSTMap","fbi","outerContainer","svgContainer","mainSVG","userSelect","joystick","bottom","deleteStorylet","deleteChoice","createNewChoice","actionUpdateCText","fb","setFb","fbC","setFbC","isJStickVis","setJStickVis","draggedStID","setDraggedStID","prevMPos","setPrevMPos","setSelectedObj","editChoiceData","setEditChoiceData","flowBoard","flowConnectors","connectorsObj","ch","fromX","fromY","toX","toY","ftid","createFlowConnectors","markDraggedStID","ev","pageX","pageY","unmarkDraggedStID","moveST","xDisplace","yDisplace","newFBI","newFB","newFBC","ftidParts","split","updateConnectors","moveDraggetST","_","throttle","mouseDiffX","mouseDiffY","moveWithJStick","comName","confirm","card","maxWidth","media","expand","transition","transitions","create","duration","shortest","expandOpen","avatar","ComplexCard","expandable","handleEdit","expanded","setExpanded","Card","CardHeader","Avatar","subheader","CardMedia","image","CardContent","CardActions","disableSpacing","aria-expanded","MyLocalTales","localTales","setLocalTales","localLocalTales","goToEditTale","lg","xl","routes","path","exact","CreateTale","TalesFlow","App","ThemeProvider","Sidebar","ReactDOM","render","getElementById","module","exports"],"mappings":"6SAEMA,EAAY,CACdC,eAAe,GAcJC,EAXG,WAA8B,IAA7BC,EAA4B,uDAAtBH,EAAWI,EAAW,uCAC3C,OAAQA,EAAOC,MACX,ICPuB,kBDQnB,OAAO,eAAKF,EAAZ,CAAmBF,eAAe,IACtC,ICRwB,mBDSpB,OAAO,eAAKE,EAAZ,CAAmBF,eAAe,IACtC,QACI,OAAOE,I,eERnB,SAASG,EAAYC,EAAKC,GACtB,OAAOD,EAAIE,UAAU,EAAGD,EAAKE,UAAYF,EAS7C,SAASG,EAAaC,GAGlB,OAAIA,EAFU,KACD,IAEMA,GAAKC,WAAWJ,UAAU,GAEtCG,EAAIC,WCEf,IAkBMC,EAAiB,SAAAC,GAEnB,MAAO,CACHC,IAFJD,EAAKA,GAAM,IAEAC,GACPC,MAAOF,EAAGE,OAAS,GACnBC,KAAMH,EAAGG,MAAQ,GACjBC,QAASJ,EAAGI,SAAW,KAIzBC,EAAe,SAAAC,GAEjB,MAAO,CACHL,IAFJK,EAAIA,GAAK,IAECL,GACNE,KAAMG,EAAEH,MAAQ,GAChBI,KAAMD,EAAEC,MAAQ,OAsSTC,EAlSQ,WAAuC,IAAtCpB,EAAqC,uDAnC7B,CAC5Ba,GAAI,KACJQ,MAAO,KACPC,KAAM,CACFC,KAAM,GACNC,KAAM,GACNC,SAAU,GACVC,KAAM,GACNC,KAAM,IAEVC,UAAW,EACXC,UAAW,GACXb,QAAS,GACTc,WAAY,IAsBkC7B,EAAW,uCACzD,OAAQA,EAAOC,MAKX,IF9DmB,cE+Df,IAAM6B,EAAU,KAAO,IAAIC,MAAQC,UAAYC,KAAKC,SAASzB,WAAW0B,QAAQ,IAAI,IAC9EC,EAAQ1B,EAAe,CAACE,GA7CtB,UA8CJyB,EAAO,eACJtC,EADI,CAEPa,GAAIkB,EACJV,MAjDI,QAkDJQ,UAAU,eAlDN,QAmDeQ,GAEnBP,WAAY,CAAC,CAACS,KArDV,YAuDR,OAAOD,EAMX,IF/EuB,kBEgFnB,OAAO,eACArC,EAAOuC,QADd,CAEIV,WAAY,CAAC,CAACS,KAhEV,YAuEZ,IFxFwB,mBEyFpB,OAAO,eACAvC,EADP,CAEIsB,KAAMrB,EAAOuC,UAQrB,IFlG0B,qBEmGtB,MAjFoB,CAC5B3B,GAAI,KACJQ,MAAO,KACPC,KAAM,CACFC,KAAM,GACNC,KAAM,GACNC,SAAU,GACVC,KAAM,GACNC,KAAM,IAEVC,UAAW,EACXC,UAAW,GACXb,QAAS,GACTc,WAAY,IA2ER,IFxGuB,kBEyGnB,IAAMS,EAAOtC,EAAOuC,QAAQD,KAC5B,GAAIvC,EAAM6B,UAAUU,GAChB,OAAOvC,EAGP,IAAMqC,EAAQ1B,EAAe,CAACE,GAAI0B,IAClC,OAAO,eACAvC,EADP,CAEI4B,UAAW5B,EAAM4B,UAAY,EAC7BC,UAAU,eACH7B,EAAM6B,UADJ,eAEJU,EAAOF,MAexB,IFjIuB,kBEiIA,IAAD,aAClB,IAAIE,EAAOtC,EAAOuC,QACd5B,EAAKZ,EAAM6B,UAAUU,GACrBV,EAAS,eAAO7B,EAAM6B,WACtBb,EAAO,eAAOhB,EAAMgB,SAJN,uBAMlB,IAAI,IAAJ,IAAeJ,EAAGI,QAAlB,+CAA2B,CAAC,IAApByB,EAAmB,eAChBzB,EAAQyB,IAPD,kFAYlB,IAAI,IAAI5B,KAAMgB,EACNhB,IAAO0B,IACXV,EAAUhB,GAAIG,QAAUa,EAAUhB,GAAIG,QAAQ0B,QAAO,SAAAD,GAEjD,OADSzB,EAAQyB,GACXtB,OAASoB,WACJvB,EAAQyB,IACR,OAenB,cAROZ,EAAUU,GAQX,CAAN,EANY,eACLvC,EADK,CAER6B,YACAb,aA9Bc,qCAuCtB,IFzK6B,wBEyKA,IAAD,EACSf,EAAOuC,QAAjCD,EADiB,EACjBA,KAAMI,EADW,EACXA,UAAWC,EADA,EACAA,MAClBP,EAAK,eAAOrC,EAAM6B,UAAUU,IAElC,OADAF,EAAMM,GAAaC,EACZ,eACA5C,EADP,CAEI6B,UAAU,eACH7B,EAAM6B,UADJ,eAEJU,EAAOF,MASpB,IFvL6B,wBEwLzB,OAAO,eACArC,EADP,CAEI8B,WAAW,GAAD,mBAAM9B,EAAM8B,YAAZ,CAAwB,CAACS,KAAMtC,EAAOuC,QAAQD,UAShE,IFlM4B,uBEkMA,IAAD,EACetC,EAAOuC,QAAtCK,EADgB,EAChBA,IAAKC,EADW,EACXA,SAAUC,EADC,EACDA,aAClBC,EAAK,YAAOhD,EAAM8B,YAKtB,OAJAkB,EAAQA,EAAMC,MAAM,EAAGJ,EAAI,GACtBE,GACDC,EAAME,KAAK,CAACX,KAAMO,IAEf,eACA9C,EADP,CAEI8B,WAAYkB,IAQpB,IFlNgC,2BEkNA,IAAD,EACR/C,EAAOuC,QAAnBK,EADoB,EACpBA,IAAKJ,EADe,EACfA,IACRO,EAAK,YAAOhD,EAAM8B,YAKtB,OAJAkB,EAAMH,GAAN,eACOG,EAAMH,GADb,CAEIM,YAAaV,IAEV,eACAzC,EADP,CAEI8B,WAAYkB,IAWpB,IFpOqB,gBEoOA,IAAD,IACe/C,EAAOuC,QAAjCY,EADW,EACXA,SAAUC,EADC,EACDA,OAAQtC,EADP,EACOA,KACnBuC,EAAM,eAAOtD,EAAM6B,UAAUuB,IAC7BxB,EAAY5B,EAAM4B,UAGtByB,EAASA,GAAW,KAAO7C,IAAcoB,GAGzC,IAAI2B,EAAOvD,EAAM6B,UAAUwB,GAAhB,eAA8BrD,EAAM6B,UAAUwB,IAAW1C,EAAe,CAACE,GAAIwC,IAGpFZ,EAAM,IAAMjC,IAAcoB,GACxB4B,EAAYvC,EAAa,CAACJ,GAAI4B,EAAKtB,KAAMkC,EAAQtC,SAGvD,OAFAuC,EAAOtC,QAAP,sBAAqBsC,EAAOtC,SAA5B,CAAqCyB,IAE9B,eACAzC,EADP,CAEI4B,UAAWA,EACXZ,QAAQ,eACDhB,EAAMgB,QADN,eAEFyB,EAAMe,IAEX3B,UAAU,eACH7B,EAAM6B,WADJ,mBAEJwB,EAASE,GAFL,cAGJH,EAAWE,GAHP,MAWjB,IFpQ0B,qBEoQA,IAAD,EACArD,EAAOuC,QAArBC,EADc,EACdA,IAAKG,EADS,EACTA,MACNY,EAAS,eAAOxD,EAAMgB,QAAQyB,IAEpC,OADAe,EAAUzC,KAAO6B,EACV,eACA5C,EADP,CAEIgB,QAAQ,eACDhB,EAAMgB,QADN,eAEFyB,EAAMe,MAQnB,IFrRqB,gBEsRjB,IAOI5C,EAPE6B,EAAMxC,EAAOuC,QACfxB,EAAO,eAAOhB,EAAMgB,SAOxB,IAAI,IAAIH,KAAMb,EAAM6B,UAChB,GAAG7B,EAAM6B,UAAUhB,GAAIG,QAAQyC,QAAQhB,IAAQ,EAAG,CAC9C7B,EAAE,eAAOZ,EAAM6B,UAAUhB,IACzB,MAUR,OANAD,EAAGI,QAAH,YAAiBJ,EAAGI,SACpBJ,EAAGI,QAAQ0C,OAAO9C,EAAGI,QAAQyC,QAAQhB,GAAM,UAGpCzB,EAAQyB,GAER,eACAzC,EADP,CAEI6B,UAAU,eACH7B,EAAM6B,UADJ,eAEJjB,EAAGC,GAAKD,IAEbI,YAQR,IFvTuB,kBEuTA,IAAD,EACEf,EAAOuC,QAApBD,EADW,EACXA,KAAME,EADK,EACLA,IACPJ,EAAK,eAAOrC,EAAM6B,UAAUU,IAElC,OADAF,EAAMrB,QAAN,sBAAoBqB,EAAMrB,SAA1B,CAAmCyB,IAC5B,eACAzC,EADP,CAEI6B,UAAU,eACH7B,EAAM6B,UADJ,eAEJU,EAAOF,MAKpB,QACI,OAAOrC,IChVJ2D,EALKC,0BAAgB,CAChCC,GAAI9D,EACJuC,QAASlB,ICGE0C,EAJDC,sBAAYJ,EAAaK,8BACnCC,0BAAgBC,O,0BCqBLC,EAfDC,YAAe,CAC3BC,QAAS,CACPC,QAAS,CACPC,KAAMC,IAAIC,KACVC,KAAMF,IAAIG,OAGdC,WAAY,CACVC,WAAY,CACV,QACA,cACAC,KAAK,Q,yGCXLC,EAAYC,aAAW,SAAAb,GAAK,MAAK,CACrCc,WAAY,CACVC,YAAaf,EAAMgB,QAAQ,QA4BhBC,cAAQ,MAJI,SAAAC,GAAQ,MAAK,CACtCC,YAAa,kBAAMD,EAAS,CAACnF,KNtCA,wBMyChBkF,EAxBA,SAAAG,GACb,IAAMC,EAAUT,IAEhB,OACE,yBAAKU,UAAU,eACb,kBAACC,EAAA,EAAD,CAAQC,SAAS,UACf,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAYC,KAAK,QAAQC,QAASR,EAAMD,YAAaG,UAAWD,EAAQP,WAAYe,MAAM,UAAUC,aAAW,QAC7G,kBAAC,IAAD,OAEF,yBAAKR,UAAWS,IAAOC,eACrB,yBAAK/F,IAAKgG,IAASC,IAAI,gBAAgBZ,UAAWS,IAAOE,WAE3D,kBAACE,EAAA,EAAD,CAAQN,MAAM,WAAd,e,gGChBJjB,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACrCoC,KAAM,CACJC,MAAO,KAETC,SAAU,CACRD,MAAO,QAETE,SAAU,CACRC,aAAc,aAAexC,EAAME,QAAQC,QAAQC,MAErDqC,UAAW,CACTC,SAAU,IAEZC,IAAK,CACHC,SAAU,QAIRC,GAAO,CACT,CACIzF,KAAM,OACN0F,IAAK,QACLC,KAAMC,KAEV,CACI5F,KAAM,cACN0F,IAAK,eACLC,KAAME,KAOV,CACI7F,KAAM,WACN0F,IAAK,YACLC,KAAMG,MAuDCjC,gBARS,SAAApF,GAAK,MAAK,CAC9BF,cAAeE,EAAM6D,GAAG/D,kBAGD,SAAAuF,GAAQ,MAAK,CACpCiC,aAAc,kBAAMjC,EAAS,CAACnF,KPtGF,yBOyGjBkF,EAnDE,SAAAG,GACf,IAAMC,EAAUT,KAiChB,OACE,6BACE,kBAACwC,EAAA,EAAD,CAAQC,KAAMjC,EAAMzF,cAAe2H,QAASlC,EAAM+B,cAhCpD,yBACE7B,UAAWD,EAAQe,KACnBmB,KAAK,eACL3B,QAASR,EAAM+B,aACfK,UAAWpC,EAAM+B,cAEjB,kBAACM,EAAA,EAAD,KACGZ,GAAKa,KAAI,SAACC,EAAKC,GAAN,OACR,kBAAC,IAAD,CAAMC,IAAKF,EAAIvG,KAAM0G,GAAIH,EAAIb,IAAKxB,UAAU,uBAC1C,kBAACyC,EAAA,EAAD,CAAUC,QAAM,EAAC1C,UAAWD,EAAQkB,UAClC,kBAAC0B,EAAA,EAAD,CAAc3C,UAAWD,EAAQoB,WAC7B,kBAACkB,EAAIZ,KAAL,CAAUlB,MAAM,UAAUP,UAAWD,EAAQsB,OAEjD,kBAACuB,EAAA,EAAD,CAAc/D,QAASwD,EAAIvG,mB,qHC9DnCwD,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnCmE,KAAM,CACFC,gBAAiBpE,EAAME,QAAQC,QAAQI,KACvCsB,MAAO,OACPwC,QAAQ,GAAD,OAAKrE,EAAMgB,QAAQ,GAAnB,cAA2BhB,EAAMgB,QAAQ,GAAzC,OAEXsD,MAAO,CACH,MAAO,CACHC,eAAgB,OAChB1C,MAAO,oBAGf2C,UAAW,CACPC,QAAS,OACT,QAAS,CACL7B,SAAU,GACV7B,YAAaf,EAAMgB,QAAQ,SAoDxB0D,GA/CA,SAAAtD,GACX,IAAMC,EAAUT,KAChB,OACI,kBAAC+D,GAAA,EAAD,CAAKrD,UAAWD,EAAQ8C,MACpB,kBAACS,GAAA,EAAD,CAAMC,WAAS,EAAC7D,QAAS,GACrB,kBAAC4D,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,GAAI,GACnB,uBAAG1D,UAAU,gBAAb,+VAGA,iQAIJ,kBAACsD,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,GAAI,GACnB,kBAACL,GAAA,EAAD,KACI,kBAACM,GAAA,EAAD,CAAYC,QAAQ,KAAKC,cAAY,GAArC,WAGA,wBAAI7D,UAAW8D,aAAK/D,EAAQiD,MAAOjD,EAAQmD,YACvC,4BAAI,uBAAGa,KAAK,qCAAoC,kBAAC,KAAD,QAChD,4BAAI,uBAAGA,KAAK,qCAAoC,kBAAC,KAAD,QAChD,4BAAI,uBAAGA,KAAK,6BAA4B,kBAAC,KAAD,QACxC,wBAAI1I,MAAM,2BAA0B,2BAAG,kBAAC,KAAD,UAG/C,kBAACgI,GAAA,EAAD,CAAKW,GAAI,GACL,kBAACL,GAAA,EAAD,CAAYC,QAAQ,KAAKC,cAAY,GAArC,SAGA,wBAAI7D,UAAWD,EAAQiD,OACnB,4BACI,uBAAGe,KAAK,gCAAR,WAEJ,4BACI,uBAAGA,KAAK,6CAAR,mBAEJ,4BACI,uBAAGA,KAAK,mDAAR,+BC3DjBE,GARF,SAAAnE,GACT,OACI,8C,oECAFR,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACrCwF,aAAc,CACZC,SAAU,QAEZC,SAAU,CACRlE,SAAU,WACVa,MAAM,GAAD,OAAKsD,OAAOC,WAAa,IAAzB,MACLlD,SAAU,IACV0B,gBAAiBpE,EAAME,QAAQ2F,WAAWC,MAC1CC,OAAO,cAAD,OAAgB/F,EAAME,QAAQC,QAAQC,MAC5C4F,UAAWhG,EAAMiG,QAAQ,IAE3BC,SAAU,CACRC,OAAQ,EACR/B,gBAAiBpE,EAAME,QAAQC,QAAQC,KACvCyB,MAAO,OACPwC,QAAQ,GAAD,OAAKrE,EAAMgB,QAAQ,IAAnB,cAA4BhB,EAAMgB,QAAQ,GAA1C,OAEToF,UAAW,CACT/B,QAAQ,GAAD,OAAKrE,EAAMgB,QAAQ,GAAnB,cAA2BhB,EAAMgB,QAAQ,GAAzC,WA+BIqF,GAtBK,SAAAjF,GAClB,IAAMC,EAAUT,KACR0F,EAAyClF,EAAzCkF,OAAQC,EAAiCnF,EAAjCmF,YAAa5J,EAAoByE,EAApBzE,MAAO6J,EAAapF,EAAboF,SAEpC,OACI,kBAACC,GAAA,EAAD,CACEC,kBAAiB/J,EACjBgK,mBAAkBhK,EAClB2E,UAAWD,EAAQmE,aACnBnC,KAAMiD,EACNhD,QAASiD,GAET,yBAAKjF,UAAWD,EAAQqE,SAAUkB,MAjBX,CAC7BvE,MAAM,GAAD,OAAKsD,OAAOC,WAAa,IAAzB,MACLO,OAAO,GAAD,OAAKR,OAAOkB,YAAc,EAA1B,aAgBE,wBAAIvF,UAAWD,EAAQ6E,UAAWvJ,GAClC,yBAAK2E,UAAWD,EAAQ+E,WACrBI,M,UCyCEM,GAjFS,SAAA1F,GAAU,IACvBkF,EAAsClF,EAAtCkF,OAAQC,EAA8BnF,EAA9BmF,YAAaQ,EAAiB3F,EAAjB2F,cADC,EAESC,mBAAS,IAFlB,oBAEtBC,EAFsB,KAETC,EAFS,KAwB7B,OACI,kBAAC,GAAD,CACIZ,OAAQA,EACRC,YAAeA,EACf5J,MAAM,mBAEN,kBAACsI,GAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,GAAxC,8CAC+C,iCAD/C,8FAIA,kBAACR,GAAA,EAAD,CAAKW,GAAI,GACL,0BAAM6B,QAAQ,uBACV,2BACIpL,KAAK,OACLqL,OAAO,WACPhK,KAAK,UACLiK,KAAK,KACLC,SAAU,SAAAC,GAAC,OAhCN,SAAAA,GACrB,IAAIC,EAAOD,EAAEE,OAAOC,MAAM,GAC1BC,QAAQC,IAAIJ,GAEZ,IAAIK,EAAS,IAAIC,WAGjBD,EAAOE,OACI,SAAAR,GAAC,OAAIL,EAAeK,EAAEE,OAAOO,SAIxCH,EAAOI,WAAWT,GAoBaU,CAAiBX,QAK5C,kBAAC5C,GAAA,EAAD,CAAKwD,MAAM,SAASC,GAAI,GACpB,kBAACnD,GAAA,EAAD,CAAYC,QAAQ,KAAKC,cAAY,GACjC,mCAIR,kBAACR,GAAA,EAAD,KACI,kBAAC0D,GAAA,EAAD,CACIC,MAAM,qBACNC,WAAS,EACTC,KAAK,IACLC,WAAS,EACTvD,QAAQ,WACRzG,MAASwI,EACTK,SAAa,SAAAC,GAAC,OAAIL,EAAeK,EAAEE,OAAOhJ,WAIlD,kBAACkG,GAAA,EAAD,CAAKW,GAAI,EAAG6C,MAAM,SACd,kBAAChG,EAAA,EAAD,CACIkF,KAAK,QACLnC,QAAQ,YACRrD,MAAM,UACND,QAlEG,WACf,IAAM8G,EAAOC,KAAKC,MAAMC,mBAAmBC,KAAK7B,KAChDF,EAAc2B,GACdxB,EAAe,MA2DP,aC0BDjG,gBAPS,SAAApF,GAAK,MAAK,CAC9BsB,KAAMtB,EAAMsC,QAAQhB,SAEG,SAAA+D,GAAQ,MAAK,CACpC6H,UAAW,SAAClF,EAAKmF,EAAKC,GAAX,OAzEQ,SAAC/H,EAAU2C,EAAKmF,EAAKC,GACxC/H,EAAS,CACLnF,KZlBwB,mBYmBxBsC,QAAQ,eACD4K,EADA,eAEFpF,EAAMmF,MAoEmBE,CAAehI,EAAU2C,EAAKmF,EAAKC,OAG1DhI,EAlES,SAAAG,GAAS,IAEtBjE,EAAmBiE,EAAnBjE,KAAM4L,EAAa3H,EAAb2H,UAEb,OACI,kBAACpE,GAAA,EAAD,CAAKwE,GAAI,GACL,kBAACvE,GAAA,EAAD,CAAMC,WAAS,EAAC7D,QAAS,GACrB,kBAAC4D,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIqE,GAAI,EAAGpE,GAAI,GAC1B,kBAACqD,GAAA,EAAD,CACII,WAAS,EACTH,MAAM,eACNpD,QAAQ,WACRzG,MAAOtB,EAAKC,KACZkK,SAAU,SAAAC,GAAC,OAAIwB,EAAU,OAAQxB,EAAEE,OAAOhJ,MAAOtB,OAGzD,kBAACyH,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIqE,GAAI,EAAGpE,GAAI,GAC1B,kBAACqD,GAAA,EAAD,CACII,WAAS,EACTH,MAAM,WACNpD,QAAQ,WACRzG,MAAOtB,EAAKG,SACZgK,SAAU,SAAAC,GAAC,OAAIwB,EAAU,WAAYxB,EAAEE,OAAOhJ,MAAOtB,OAG7D,kBAACyH,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIqE,GAAI,EAAGpE,GAAI,GAC1B,kBAACqD,GAAA,EAAD,CACII,WAAS,EACTH,MAAM,OACNpD,QAAQ,WACRzG,MAAOtB,EAAKK,KACZ8J,SAAU,SAAAC,GAAC,OAAIwB,EAAU,OAAQxB,EAAEE,OAAOhJ,MAAOtB,OAGzD,kBAACyH,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIqE,GAAI,EAAGpE,GAAI,GAC1B,kBAACqD,GAAA,EAAD,CACII,WAAS,EACTH,MAAM,WACNpD,QAAQ,WACRzG,MAAOtB,EAAKI,KACZ+J,SAAU,SAAAC,GAAC,OAAIwB,EAAU,OAAQxB,EAAEE,OAAOhJ,MAAOtB,OAGzD,kBAACyH,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,IACX,kBAACsD,GAAA,EAAD,CACIC,MAAM,oBACNC,WAAS,EACTC,KAAK,IACLC,WAAS,EACTvD,QAAQ,WACRzG,MAAOtB,EAAKE,KACZiK,SAAU,SAAAC,GAAC,OAAIwB,EAAU,OAAQxB,EAAEE,OAAOhJ,MAAOtB,Y,oBCvEnEyD,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnCqJ,UAAW,CACP7H,SAAU,WACV2E,OAAQnG,EAAMgB,QAAQ,GACtBsI,SAAU,GAEdC,aAAc,CACV/H,SAAU,WACVgI,KAAMxJ,EAAMgB,QAAQ,GACpByI,MAAOzJ,EAAMgB,QAAQ,IAEzB0I,WAAY,CACRrH,MAAO,OACP,UAAW,CACPsH,WAAY,KAGpBC,MAAO,CACHhH,SAAU,GACV6B,QAAS,eACTL,gBAAiB,OACjBC,QAAS,UACTwF,aAAc,EACdrI,SAAU,WACVgI,IAAKxJ,EAAMgB,QAAQ,IACnByI,KAAMzJ,EAAMgB,QAAQ,UAqEbC,eAAQ,MAJI,SAAAC,GAAQ,MAAK,CACpC4I,iBAAkB,SAACxL,EAAKG,GAAN,OAvDG,SAACyC,EAAU5C,EAAKG,GACrCyC,EAAS,CACLnF,Kb/B0B,qBagC1BsC,QAAS,CAACC,MAAKG,WAoDesL,CAAiB7I,EAAU5C,EAAKG,IAClEuL,gBAAiB,SAAC5L,EAAME,EAAK2L,EAAYvL,EAAKC,GAA7B,OAjDA,SAACuC,EAAU9C,EAAME,EAAK2L,EAAYvL,EAAKC,GAIxDuC,EAAS,CACLnF,Kb7CgC,2Ba8ChCsC,QAAS,CAACK,MAAKJ,IALnBA,EAAM2L,EAAa3L,EAAM,MAYzB4C,EAAS,CACLnF,KbvD4B,uBawD5BsC,QAAS,CAAEK,MAAKC,WAAUC,cAAeqL,KAkCcV,CAAarI,EAAU9C,EAAME,EAAK2L,EAAYvL,EAAKC,OAEnGsC,EAhCA,SAAAG,GACX,IAAMC,EAAUT,KACR7D,EAAiBqE,EAAjBrE,EAAGqB,EAAcgD,EAAdhD,KAAMM,EAAQ0C,EAAR1C,IACjB,OACI,kBAACiG,GAAA,EAAD,CAAKrD,UAAWD,EAAQgI,WACpB,yBAAK/H,UAAWD,EAAQuI,OACpB,qCAAW7M,EAAEL,KAEjB,kBAAC2L,GAAA,EAAD,CAEI6B,YAAY,yBACZ3B,WAAS,EACTC,KAAK,IACLtD,QAAQ,WACR5D,UAAWD,EAAQqI,WACnBjL,MAAO1B,EAAEH,KACT0K,SAAU,SAAAC,GAAC,OAAInG,EAAM0I,iBAAiB/M,EAAEL,GAAI6K,EAAEE,OAAOhJ,UAEzD,kBAAC0L,GAAA,EAAD,CACIC,QAAShJ,EAAM6I,WACf3C,SAAU,SAACC,GAAD,OAAOnG,EAAM4I,gBAAgB5L,EAAMrB,EAAEL,GAAI6K,EAAEE,OAAO2C,QAAS1L,EAAK3B,EAAEC,OAC5EyB,MAAM,UACN6C,UAAWD,EAAQkI,aACnBc,WAAY,CAAE,aAAc,0BC3E/BC,GAAqB,SAACrL,EAAUC,EAAQtC,GACjD,IAAIqC,EACA,MAAO,IAAIsL,MAAM,qDAErB,OAAO,SAACrJ,EAAUsJ,GACdtJ,EAAS,CACLnF,KdXiB,gBcYjBsC,QAAS,CAACY,WAAUC,SAAQtC,Y,SCjBlCgE,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnCyK,UAAW,CACPhG,QAAS,OACTiG,UAAW1K,EAAMgB,QAAQ,IAE7B2J,IAAK,CACD5E,OAAO,cAAD,OAAgB6E,KAAO,MAC7Bf,aAAc,EACdrI,SAAU,YAEd7E,MAAO,CACHoJ,OAAO,cAAD,OAAgB6E,KAAO,MAC7BpJ,SAAU,WACVqE,WAAY,OACZxB,QAAS,QACTwF,aAAc,EACdL,KAAM,GACNC,KAAM,EACN7G,SAAU,IAEdiI,OAAQ,CACJrJ,SAAU,WACVsJ,OAAQ9K,EAAMgB,QAAQ,GACtB+J,WAAW,cAAD,OAAgBH,KAAO,MACjCvI,MAAO,EACPoH,KAAM,MACND,KAAM,IAEVwB,gBAAiB,CACbvG,QAAS,OACTwG,SAAU,OACVC,eAAgB,iBAEpBC,aAAc,CACVC,UAAW,SACXN,OAAQ,GACRjB,aAAc,EACd1D,OAAO,KAAD,OAAOnG,EAAMgB,QAAQ,GAArB,MACNqK,UAAW,SACXzI,SAAU,GACV0I,WAAY,QACZ,SAAU,CACN7G,QAAS,SAEb,QAAS,CACL7B,SAAU,KAGlBgH,MAAO,CACHhH,SAAU,GACV6B,QAAS,eACTL,gBAAiB,OACjBC,QAAS,UACTwF,aAAc,OAyFP5I,gBAPS,SAAApF,GAAK,MAAK,CAC9BgB,QAAShB,EAAMsC,QAAQtB,YAEA,SAAAqE,GAAQ,MAAK,CACpCqK,cAAe,SAACnN,EAAMI,EAAWC,GAAlB,OAZG,SAACL,EAAMI,EAAWC,EAAOyC,GAC3CA,EAAS,CACLnF,KfnI6B,wBeoI7BsC,QAAS,CACLD,OAAMI,YAAWC,WAQkB+M,CAAcpN,EAAMI,EAAWC,EAAOyC,IACjFuK,cAAe,SAAArN,GAAI,OAAI8C,EAASoJ,GAAmBlM,QAExC6C,EA9EE,SAAAG,GACb,IAAMC,EAAUT,KACRnE,EAA4C2E,EAA5C3E,GAAIiC,EAAwC0C,EAAxC1C,IAAKgN,EAAmCtK,EAAnCsK,OAAQD,EAA2BrK,EAA3BqK,cAAe5O,EAAYuE,EAAZvE,QACxC,OACI,6BAEI,kBAAC8H,GAAA,EAAD,CAAKrD,UAAWD,EAAQsJ,IAAKgB,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACjC,IAARnN,GAAc,0BAAM4C,UAAWD,EAAQwJ,SACzC,0BAAMvJ,UAAWD,EAAQ1E,OAAzB,YACA,yBAAK2E,UAAWD,EAAQuI,OACpB,qCAAWnN,EAAGC,KAGlB,0BAAMoP,YAAU,EAACC,aAAa,OAC1B,kBAAC1D,GAAA,EAAD,CACIC,MAAM,iBACNpD,QAAQ,WACR5D,UAAWD,EAAQoJ,UACnBhM,MAAOhC,EAAGE,MACV2K,SAAU,SAAAC,GAAC,OAAInG,EAAMmK,cAAc9O,EAAGC,GAAI,QAAS6K,EAAEE,OAAOhJ,UAEhE,kBAAC4J,GAAA,EAAD,CACIC,MAAM,gBACNC,WAAS,EACTC,KAAK,IACLtD,QAAQ,WACR5D,UAAWD,EAAQoJ,UACnBhM,MAAOhC,EAAGG,KACV0K,SAAU,SAAAC,GAAC,OAAInG,EAAMmK,cAAc9O,EAAGC,GAAI,OAAQ6K,EAAEE,OAAOhJ,YAOvE,kBAACkG,GAAA,EAAD,CAAKrD,UAAWD,EAAQsJ,IAAKkB,GAAI,EAAGD,GAAI,EAAGxD,GAAI,GAC3C,0BAAM9G,UAAWD,EAAQwJ,SACzB,0BAAMvJ,UAAWD,EAAQ1E,OAAzB,WACA,yBAAK2E,UAAWD,EAAQ2J,iBAEhBvO,EAAGI,SAAWJ,EAAGI,QAAQ6G,KAAI,SAAApF,GAAG,OAC5B,kBAAC,GAAD,CACIvB,EAAGF,EAAQyB,GACXF,KAAM3B,EAAGC,GACTgC,IAAKA,EACLuL,WAAYyB,EAAO1M,cAAgBV,EACnCuF,IAAKvF,OAIjB,kBAAC0N,GAAA,EAAD,CAAK1K,UAAWD,EAAQ8J,aAAcjG,QAAQ,WAAWrD,MAAM,UAAUD,QAAS,kBAAM6J,EAAcrK,EAAM3E,GAAGC,MAC3G,kBAAC,IAAD,MACA,0BAAM4E,UAAU,OAAhB,qBCvGTL,gBALS,SAAApF,GAAK,MAAK,CAC9B8B,WAAY9B,EAAMsC,QAAQR,WAC1BD,UAAW7B,EAAMsC,QAAQT,aAGduD,EApBQ,SAAAG,GACnB,OACI,kBAACuD,GAAA,EAAD,CAAKwE,GAAI,GAED/H,EAAMzD,YAAcyD,EAAMzD,WAAW+F,KAAK,SAACgI,EAAQhN,GAC/C,IAAIjC,EAAK2E,EAAM1D,UAAUgO,EAAOtN,MAChC,OACI,kBAAC,GAAD,CAAU3B,GAAIA,EAAIoH,IAAK6H,EAAOtN,KAAMM,IAAKA,EAAKgN,OAAQA,W,QCyC/DO,GA9CS,SAAA7K,GAAU,IACvBkF,EAAuClF,EAAvCkF,OAAQC,EAA+BnF,EAA/BmF,YAAa2F,EAAkB9K,EAAlB8K,eACtBC,EAAeC,IAAMC,YAkB3B,OACI,kBAAC,GAAD,CACI/F,OAAQA,EACRC,YAAeA,EACf5J,MAAM,mBAEV,kBAACsI,GAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,GAAxC,6GAIA,kBAACR,GAAA,EAAD,CAAKyD,GAAI,GACL,kBAACC,GAAA,EAAD,CACIC,MAAM,WACNpD,QAAQ,WACRzG,MAAOyN,EACPzD,WAAS,EACT6D,IAAKH,KAGb,kBAAChK,EAAA,EAAD,CAAQ+C,QAAQ,WAAWrD,MAAM,UAAUD,QAAS,kBAnCpC,SAAA2K,GAChB5E,QAAQC,IAAI2E,GACZ,IAAMC,EAAID,EAAQE,QAAQC,qBAAqB,SAAS5H,KAAK,GAE7D0H,EAAEG,SACFH,EAAEI,kBAAkB,EAAG,WAGvBC,SAASC,YAAY,QAGrBC,YAAW,WACPC,MAAM,kCACP,GAsBuDC,CAAYd,KAAtE,wBCvBR,IAmEelL,gBAJS,SAAApF,GAAK,MAAK,CAC9BsC,QAAStC,EAAMsC,WAGJ8C,EAnEU,SAAAG,GAAU,IACvBjD,EAAYiD,EAAZjD,QADsB,EAEmB6I,oBAAS,GAF5B,oBAEvBkG,EAFuB,KAEAC,EAFA,OAGAnG,mBAAS,IAHT,oBAGvBoG,EAHuB,KAGdC,EAHc,KAIxBC,EAAa,WACiBnP,EAAxBR,WACR,OAFqB,aACWQ,EADX,iBAsBnBoP,EAAoB,WACtB,IAAIC,EAAa,GACjB,IAAK,IAAI3J,KAAO8B,OAAO8H,aACf9H,OAAO8H,aAAaC,eAAe7J,KACnC2J,GAAc7H,OAAO8H,aAAa5J,IAG1C,OAAO2J,EAAa,EAA0B,GAApBA,EAAWpR,OAAZ,KAAyC,MAAQ,gBAG9E,OACI,kBAACuI,GAAA,EAAD,CAAKwE,GAAI,GACL,kBAAC,GAAD,CACI7C,OAAU4G,EACV3G,YAAe,kBAAM4G,GAAgB,IACrCjB,eAAkBkB,IAEtB,kBAACjL,EAAA,EAAD,CACI+C,QAAQ,YACRrD,MAAM,UACNP,UAAU,gCACVM,QAtCU,WAClB,IAAM8G,EAAO4E,IACb3F,QAAQC,IAAIc,GACZ,IAAMiF,EAAUC,KAAKC,mBAAoBlF,KAAKmF,UAAUpF,MAzBhE,SAAmBqF,EAAUnR,GACzB,IAAIoR,EAAUnB,SAASoB,cAAc,KACrCD,EAAQE,aAAa,OAAQ,iCAAmCL,mBAAmBjR,IACnFoR,EAAQE,aAAa,WAAYH,GAEjCC,EAAQpH,MAAMnC,QAAU,OACxBoI,SAASsB,KAAKC,YAAYJ,GAE1BA,EAAQK,QAERxB,SAASsB,KAAKG,YAAYN,GAgBtBO,CAAS,GAAD,OAAI7F,EAAKvL,KAAKC,KAAd,YAAsBsL,EAAKhM,GAA3B,QAAqCiR,GAC7CN,EAAWM,GACXR,GAAgB,KA4BZ,wBAQA,kBAAChL,EAAA,EAAD,CACI+C,QAAQ,YACRrD,MAAM,UACNP,UAAU,gBACVM,QArCU,WAClB,IAAM8G,EAAO4E,IACPkB,EAAe7F,KAAKC,MAAMjD,OAAO8H,aAAagB,QAAQ,kBAAoB,GAChFD,EAAa9F,EAAKhM,IAAMgM,EACxB/C,OAAO8H,aAAaiB,QAAQ,eAAgB/F,KAAKmF,UAAUU,IAC3DxB,MAAM,sBAAwBO,OA4B1B,qBCqFGtM,gBARS,SAAApF,GAAK,MAAK,CAC9Ba,GAAIb,EAAMsC,QAAQzB,OAEK,SAAAwE,GAAQ,MAAK,CACpCyN,cAAe,kBAAMzN,GLlJd,SAACA,EAAUsJ,GACdtJ,EAAS,CAACnF,KdNS,oBmBwJvB6S,gBAAiB,kBAAM1N,GL7IhB,SAACA,EAAUsJ,GAGdtJ,EAAS,CAACnF,KdXgB,2BmBsJ9B8S,aAAc,SAACnG,GAAD,OAAUxH,ELlHM,SAAAwH,GAC9B,OAAO,SAAAxH,GACHwH,EAAKjL,UAAYiL,EAAKjL,WAAa,IACnCkK,QAAQC,IAAIc,GAEZxH,EAAS,CACLnF,Kd5CmB,kBc6CnBsC,QAASqK,KK2GgBoG,CAAmBpG,QAEzCzH,EA1II,SAAAG,GAAU,IAAD,EACiB4F,mBAAS,GAD1B,oBACjB+H,EADiB,KACAC,EADA,OAEUhI,mBAAS,UAFnB,oBAEjBiI,EAFiB,KAENC,EAFM,OAG0BlI,oBAAS,GAHnC,oBAGjBmI,EAHiB,KAGEC,EAHF,KAIhB1S,EAA4D0E,EAA5D1E,GAAIiS,EAAwDvN,EAAxDuN,cAAeC,EAAyCxN,EAAzCwN,gBAAiBS,EAAwBjO,EAAxBiO,MAAOR,EAAiBzN,EAAjByN,aAQ7CS,EAAwBC,uBAAY,WACtC,IAAI3R,EAAUyR,EAAMG,OAAO9S,GAK3B,GAJAiL,QAAQC,IAAIhK,GAIRA,EAAQ0B,QAAQ,UAAY,EAAG,CAC/B1B,EAAUA,EAAQ6R,OAAOxR,QAAQ,SAAU,IAC3C,IACMyR,GADe/G,KAAKC,MAAMjD,OAAO8H,aAAagB,QAAQ,kBAAoB,IACnD7Q,GAC7BiR,EAAaa,MAElB,CAACL,EAAOR,IAoCX,OA7BAc,qBAAU,WAuBN,MApBkB,iBAAdN,EAAMvM,KAA2BpG,EAK7BV,EAAWqT,EAAMvM,IAAK,sBAE1B6E,QAAQC,IAAI,uBAGP5L,EAAWqT,EAAMvM,IAAK,gBAC3BoM,EAAa,QACbI,KAKA3H,QAAQC,IAAI,qDAhBZ+G,IAmBI,WACJhH,QAAQC,IAAI,gFAGjB,CAAClL,EAAIiS,EAAeC,EAAiBS,EAAOC,IAG3C,kBAAC3K,GAAA,EAAD,CAAKiL,EAAG,GAEJ,kBAAC3K,GAAA,EAAD,CAAYC,QAAQ,KAAK2K,UAAU,MAC9BZ,EADL,aAIA,kBAACtK,GAAA,EAAD,CAAKW,GAAI,EAAGwK,GAAI,EAAGxO,UAAU,sBACzB,kBAAC2D,GAAA,EAAD,CAAYC,QAAQ,aACf+J,EADL,yCAIA,kBAACtK,GAAA,EAAD,KACI,kBAACxC,EAAA,EAAD,CACI+C,QAAQ,YACRrD,MAAM,UACNP,UAAU,gCACVM,QAAS,kBAAMwN,GAAqB,KAJxC,mBAQA,kBAACjN,EAAA,EAAD,CACI+C,QAAQ,YACRrD,MAAM,UACNP,UAAU,gBACVyO,UAAW,0BAAMzO,UAAU,iBAAgB,kBAAC,KAAD,OAC3CM,QAAS,kBA5EhBkB,EA4E2B,cA5EpB1B,EAAM4O,QAAQjR,KAAK+D,GAA1B,IAAAA,IAuEG,eAaR,kBAACmN,GAAA,EAAD,CAAOC,QAAM,GACT,kBAACC,GAAA,EAAD,CACI1R,MAAOsQ,EACPqB,eAAe,UACfC,UAAU,UACV/I,SA7FQ,SAACgJ,EAAOC,GAC5BvB,EAAcuB,IA6FFC,UAAQ,EACR1O,aAAW,4BAEX,kBAAC2O,GAAA,EAAD,CAAKnI,MAAM,UACX,kBAACmI,GAAA,EAAD,CAAKnI,MAAM,SACX,kBAACmI,GAAA,EAAD,CAAKnI,MAAM,aAInB,kBAAC3D,GAAA,EAAD,CAAKrD,UAA+B,IAApByN,EAAwB,OAAS,IAC7C,kBAAC,GAAD,OAGJ,kBAACpK,GAAA,EAAD,CAAKrD,UAA+B,IAApByN,EAAwB,OAAS,IAC7C,kBAAC,GAAD,OAGJ,kBAACpK,GAAA,EAAD,CAAKrD,UAA+B,IAApByN,EAAwB,OAAS,IAC7C,kBAAC,GAAD,OAIJ,kBAAC,GAAD,CACIzI,OAAQ6I,EACR5I,YAAe,kBAAM6I,GAAqB,IAC1CrI,cAnGsB,SAAA2B,GAC9BmG,EAAanG,GACb0G,GAAqB,U,wJChCvBxO,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnC0Q,MAAO,CACHrO,MAAO,GACPsO,gBAAgB,mBAAD,OAAqB3Q,EAAME,QAAQC,QAAQC,KAA3C,aAAoDJ,EAAME,QAAQC,QAAQI,KAA1E,KACfiB,SAAU,WACViI,KAAM,EACND,IAAK,GACLsB,OAAQ,qBACRrF,SAAU,QAEdmL,QAAS,CACL/O,MAAO,OACPwC,QAAQ,GAAD,OAAKrE,EAAMgB,QAAQ,GAAnB,QACP,OAAQ,CACJ8J,OAAQ,GACRrG,QAAS,OACTyG,eAAgB,SAChB2F,WAAY,UAEhB,UAAW,CACPC,UAAW,kBAEf,cAAe,CACX1M,gBAAiB/D,KAAI0Q,MAEzB,WAAY,CACRnO,SAAU,KAGlBoO,GAAI,CACApO,SAAU,mBAEdqO,UAAW,CACPC,UAAW,kBAEfC,aAAc,OA4BHC,GAtBM,SAAAhQ,GACjB,IAAMC,EAAUT,KACRoP,EAA2D5O,EAA3D4O,QAASqB,EAAkDjQ,EAAlDiQ,gBAAiBC,EAAiClQ,EAAjCkQ,eAAgBH,EAAiB/P,EAAjB+P,aAElD,OACI,kBAACxM,GAAA,EAAD,CAAKrD,UAAWD,EAAQqP,OACpB,wBAAIpP,UAAWD,EAAQuP,SACnB,wBAAIjU,MAAM,iBAAiBiF,QAJpB,kBAAMoO,EAAQjR,KAAK,wBAIsB,kBAAC,KAAD,OAChD,wBAAIpC,MAAM,iBAAgB,kBAAC,IAAD,OAC1B,wBAAIA,MAAM,oBAAmB,kBAAC,KAAD,CAAiBoG,KAAMwO,KAAgBjQ,UAAWD,EAAQ2P,MACvF,wBAAIrU,MAAM,kBAAiB,kBAAC,KAAD,CAAiBoG,KAAMyO,KAAalQ,UAAWD,EAAQ2P,MAClF,wBAAIrU,MAAM,YAAW,kBAAC,KAAD,OACrB,wBAAIA,MAAM,kBAAkBiF,QAASuP,GAAc,kBAAC,KAAD,CAAc7P,UAAWD,EAAQ8P,gBAEpF,wBAAIxU,MAAM,cAAciF,QAAS0P,GAAgB,kBAAC,KAAD,CAAiBvO,KAAM0O,KAASnQ,UAAW8D,aAAK/D,EAAQ2P,GAAI3P,EAAQ4P,cACrH,wBAAItU,MAAM,sBAAqB,kBAAC,KAAD,OAC/B,wBAAIA,MAAM,kBAAkBiF,QAASyP,GAAiB,kBAAC,KAAD,U,oFCjEhEzQ,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnC6E,UAAW,CACPrD,SAAU,YAEdkQ,IAAK,CACDlQ,SAAU,WACVoB,SAAU,GACVwB,gBAAiB/D,KAAI,KACrBwJ,aAAc,EACd,WAAY,CACRzF,gBAAiB/D,KAAI,OAG7BoJ,KAAM,CACFA,KAAM,EACND,IAAK,GAETmI,MAAO,CACHlI,KAAM,GACND,IAAK,GAEToI,GAAI,CACAnI,KAAM,GACND,KAAM,IAEVqI,KAAM,CACFpI,KAAM,GACND,IAAK,QAiBEsI,GAbE,SAAA1Q,GACb,IAAMC,EAAUT,KACRmR,EAA0C3Q,EAA1C2Q,SAAUC,EAAgC5Q,EAAhC4Q,UAAWC,EAAqB7Q,EAArB6Q,OAAQC,EAAa9Q,EAAb8Q,SACrC,OACI,yBAAK5Q,UAAWD,EAAQwD,WACpB,kBAAC,KAAD,CAAMvD,UAAW8D,aAAK/D,EAAQqQ,IAAKrQ,EAAQoI,MAAO7H,QAASmQ,IAC3D,kBAAC,KAAD,CAAOzQ,UAAW8D,aAAK/D,EAAQqQ,IAAKrQ,EAAQsQ,OAAQ/P,QAASoQ,IAC7D,kBAAC,KAAD,CAAI1Q,UAAW8D,aAAK/D,EAAQqQ,IAAKrQ,EAAQuQ,IAAKhQ,QAASqQ,IACvD,kBAAC,KAAD,CAAM3Q,UAAW8D,aAAK/D,EAAQqQ,IAAKrQ,EAAQwQ,MAAOjQ,QAASsQ,MClCjEtR,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnCmS,GAAI,CACAjB,UAAW,2BAEfkB,KAAM,CACFC,KAAMhS,KAAI,KACViS,YAAa,EACbC,OAAQlS,KAAI,MAEhBmS,aAAc,CAEVF,YAAa,EACbC,OAAQ,QAEZE,WAAY,CACRF,OAAQ,QAEZG,KAAM,CACFL,KAAM,OACNC,YAAa,EACbC,OAAQvS,EAAME,QAAQC,QAAQC,MAElCuS,WAAY,CACR,SAAU,CACNN,KAAMhS,KAAI,KACVkS,OAAQlS,KAAI,MAEhB,SAAU,CACNgS,KAAM,SAGd1V,MAAO,CACHiG,SAAU,IAEdgQ,KAAM,CACFhQ,SAAU,GACVyP,KAAM,YA4DCQ,GAxDA,SAAAzR,GACX,IAAMC,EAAUT,KACRgS,EAAsHxR,EAAtHwR,KAAMjW,EAAgHyE,EAAhHzE,MAAOmW,EAAyG1R,EAAzG0R,eAAgB5V,EAAyFkE,EAAzFlE,MAAO6V,EAAkF3R,EAAlF2R,YAAa/I,EAAqE5I,EAArE4I,gBAAiBgJ,EAAoD5R,EAApD4R,gBAAiBC,EAAmC7R,EAAnC6R,cAAeC,EAAoB9R,EAApB8R,gBACpGC,EAAe,SAAC5L,EAAGxL,GACrBwL,EAAE6L,kBACFpJ,EAAgB4I,EAAM7W,IAE1B,OACI,uBACIW,GAAIkW,EACJtR,UAAWD,EAAQ8Q,GACnBvL,MAAOkM,EACPO,YAAa,SAAA9L,GAAC,OAAIyL,EAAgBzL,EAAGqL,IACrCU,UAAW,SAAA/L,GAAC,OAAI0L,EAAc1L,IAC9BgM,YAAa,SAAAhM,GAAC,OAAI2L,EAAgB3L,KAGhCqL,IAAS1V,GAAU,0BAAMsW,EAAE,KAAKC,EAAE,KAAKpB,KAAK,QAAzB,SAEnBO,IAAS1V,GAEP,4BACIoE,UAAW8D,aAAK/D,EAAQ+Q,KAAQW,EAAYrW,KAAKkW,GAAQ,OAAOG,EAAYhX,MAASsF,EAAQmR,cAC7FkB,GC1EUC,GD2EVC,IC1EU,ED2EVC,EC7ES,ED8ETjS,QAAS,SAAA2F,GAAC,OAAI4L,EAAa5L,EAAG,SAItC,4BACIjG,UAAW8D,aAAK/D,EAAQ+Q,KAAQW,EAAYrW,KAAKkW,GAAQ,QAAQG,EAAYhX,MAASsF,EAAQmR,cAC9FkB,GCjFeC,GDkFfC,GCjFeE,GDkFfD,ECtFa,EDuFbjS,QAAS,SAAA2F,GAAC,OAAI4L,EAAa5L,EAAG,UAIlC,uBAAGjG,UAAW8D,aAAM2N,EAAYrW,KAAKkW,GAAQ,OAAOG,EAAYhX,MAASsF,EAAQsR,YAAa/Q,QAAS,SAAA2F,GAAC,OAAI4L,EAAa5L,EAAG,QACxH,0BACIjG,UAAWD,EAAQqR,KACnBrQ,MChGS,IDiGTyI,OChGU,KDmGd,0BAAM0I,EAAE,IAAIC,EAAE,KAAKnS,UAAWD,EAAQ1E,OAAQA,EAAMoX,OAAO,EAAG,KAAO,0BACrE,0BAAMP,EAAE,IAAIC,EAAE,KAAKnS,UAAWD,EAAQ1E,OAAQA,EAAMoX,OAAO,GAAI,KAG/D,0BAAMP,EAAE,IAAIC,EAAE,KAAKnS,UAAWD,EAAQuR,MAAOA,MEnGvDhS,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnCgU,UAAW,CACP1B,YAAa,EACbC,OAAQlS,KAAI,MAEhB4T,IAAK,CACDrR,SAAU,GACVsR,WAAY,OACZ7B,KAAMhS,KAAI,MAEd8T,kBAAmB,CACf,SAAU,CACN5B,OAAQlS,KAAI,MAEhB,SAAU,CACNgS,KAAM,aAkCH+B,GA7BO,SAAAhT,GAClB,IAAMC,EAAUT,KACR7D,EAAoCqE,EAApCrE,EAAGgW,EAAiC3R,EAAjC2R,YAAa/I,EAAoB5I,EAApB4I,gBAKxB,OACI,uBACI1I,UAAW8D,aAAMrI,EAAEkX,MAAQlB,EAAYrW,IAAM,OAASqW,EAAYhX,MAASsF,EAAQ8S,mBACnFvS,QAPa,SAAA2F,GACjBA,EAAE6L,kBACFpJ,EAAgBjN,EAAEkX,IAAK,QAQnB,0BACAvX,GAAIK,EAAEL,GACN2X,GAAItX,EAAEsX,GAAIC,GAAIvX,EAAEuX,GAChBC,GAAIxX,EAAEwX,GAAIC,GAAIzX,EAAEyX,GAChBlT,UAAWD,EAAQ2S,YAGnB,0BAAM1S,UAAWD,EAAQ4S,IACzBT,GAAIzW,EAAEsX,GAAKtX,EAAEwX,IAAM,EACnBd,GAAI1W,EAAEuX,GAAKvX,EAAEyX,IAAM,GACdzX,EAAEkX,OCxCbrT,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnCyU,QAAS,CACL3J,OAAQ,GACR/E,OAAO,aAAD,OAAe/F,EAAME,QAAQC,QAAQC,MAC3CiE,QAASrE,EAAMgB,QAAQ,GACvBqK,UAAW,SACXzI,SAAU,GACV6B,QAAS,OACTiQ,cAAe,SACfxJ,eAAgB,SAChBrB,aAAc,GAElB8K,SAAU,CACN7J,OAAQ,GACRrG,QAAS,OACTiQ,cAAe,SACfxJ,eAAgB,SAChBG,UAAW,SACX,SAAU,CACNP,OAAQ,EACRgG,UAAU,cAAD,OAAgB9Q,EAAME,QAAQC,QAAQC,QAGvDwU,SAAU,CACNnQ,QAAS,OACTiG,UAAW1K,EAAMgB,QAAQ,GACzB,WAAY,CACR6T,KAAM,GAEV,kBAAmB,CACfC,WAAY9U,EAAMgB,QAAQ,SAyDvB+T,GApDgB,SAAA3T,GAC3B,IAAMC,EAAUT,KACR3B,EAA0DmC,EAA1DnC,SAAUC,EAAgDkC,EAAhDlC,OAAQnD,EAAwCqF,EAAxCrF,KAAMa,EAAkCwE,EAAlCxE,KAAMoY,EAA4B5T,EAA5B4T,WAAYzO,EAAgBnF,EAAhBmF,YAFd,EAIdS,mBAAS,IAJK,oBAI7BiO,EAJ6B,KAIxBC,EAJwB,KAKpCvF,qBAAU,kBAAMuF,EAAOtY,KAAO,CAACA,IAC/B,IAAMD,EAAQZ,EAAO,YACrB,OACI,kBAAC,GAAD,iBACQqF,EADR,CAEIzE,MAAOA,IAEP,kBAACgI,GAAA,EAAD,CAAKmL,GAAI,EAAGxK,GAAI,GACZ,kBAACV,GAAA,EAAD,CAAMC,WAAS,GACX,kBAACD,GAAA,EAAD,CAAME,MAAI,EAACC,IAAE,GACT,yBAAKzD,UAAWD,EAAQoT,SAAxB,YAA2CxV,IAE/C,kBAAC2F,GAAA,EAAD,CAAME,MAAI,EAACC,IAAE,EAACzD,UAAWD,EAAQsT,UAC7B,oCACA,yBAAKrT,UAAU,SAEnB,kBAACsD,GAAA,EAAD,CAAME,MAAI,EAACC,IAAE,GACT,yBAAKzD,UAAWD,EAAQoT,SAAxB,YAA2CvV,MAOvD,kBAACmJ,GAAA,EAAD,CAAWC,MAAM,cACb7J,MAAOwW,EAAK3N,SAAU,SAAAC,GAAC,OAAI2N,EAAO3N,EAAEE,OAAOhJ,QAC3CyG,QAAQ,WAAWuD,WAAS,IAGhC,kBAAC9D,GAAA,EAAD,CAAKrD,UAAWD,EAAQuT,UACpB,kBAACzS,EAAA,EAAD,CAAQ+C,QAAQ,WAAWrD,MAAM,UAC7BD,QAAS2E,GADb,UAMA,kBAACpE,EAAA,EAAD,CAAQ+C,QAAQ,YAAYrD,MAAM,UAC9BD,QAAS,kBAAMoT,EAAW/V,EAAUC,EAAQ+V,EAAKlZ,KADrD,WClEhB,SAASoZ,GAAiBzX,EAAWb,GAIjC,OAuFJ,SAAwBuY,EAAaC,GAEjC,IAAIC,EAAQ,EAONC,EAAO,GAETC,EAAiBC,OAAOC,OAAON,GAAaO,QAC5C,SAACC,EAAWC,GAAZ,OAAkBD,EAAYC,EAAEzZ,OAASwZ,EAAYC,EAAEzZ,SACzD,GAOI0Z,EHjImB,IGiIAN,EHvHH,IGuHiDA,EAAiB,GAExF,OACMF,EAIGF,EAAYE,IALR,CAST,IAAIS,EAAkBX,EAAYE,GAAOlZ,OAMzC,GAAI2Z,EAAkBP,EAElB,IADA,IAAIQ,GAAQF,EHnJK,IGmJcC,IAA+BA,EAAkB,GACvEE,EAAI,EAAGA,EAAIb,EAAYE,GAAOlZ,OAAQ6Z,IAAK,CAChD,IAAI7X,EAAOgX,EAAYE,GAAOW,GAC9BV,EAAKnX,GAAQ,CAAE1B,GAAI0B,IAGdiX,GAAoBE,EAAKnX,GAAMoV,GAAK+B,EAAKnX,GAAMqV,IACpD8B,EAAKnX,GAAMoV,EH1JE,IG0JGyC,GAAiBA,EAAI,GAAKD,EH9I9B,GG+IZT,EAAKnX,GAAMqV,EAAI,KAAC6B,EAAQ,GH9IZ,SGoJhB,IAAK,IAAIW,EAAI,EAAGA,EAAIb,EAAYE,GAAOlZ,OAAQ6Z,IAAK,CAChD,IAAI7X,EAAOgX,EAAYE,GAAOW,GAC9BV,EAAKnX,GAAQ,CAAE1B,GAAI0B,IAEdiX,GAAoBE,EAAKnX,GAAMoV,GAAK+B,EAAKnX,GAAMqV,IACpD8B,EAAKnX,GAAMoV,EHtKE,IGsKGyC,EH5JN,GG4JsBA,EH1JpB,GG2JZV,EAAKnX,GAAMqV,EAAI,KAAC6B,EAAQ,GH1JZ,KGuKxB,OAKJ,SAA2BC,GACvB,IAAK,IAAIU,KAAKV,EACVA,EAAKU,GAAGnD,eAAkBoD,GAAkBX,EAAKU,IAdrDE,CAAkBZ,GAOXA,EAhKIa,CAaf,SAA2B1Y,EAAWb,GAClC,IAAIuY,EAAc,GAMdiB,EAiDR,SAAuBC,EAAUzZ,GAC7B,IAAIwZ,EAAU,YAAOC,GAIrB,IAAK,IAAIL,KAAKpZ,EAAS,CACnB,IAAI0Z,EAAMF,EAAW/W,QAAQzC,EAAQoZ,GAAGjZ,MACpCuZ,GAAO,GACPF,EAAW9W,OAAOgX,EAAK,GAI/B,OAAOF,EA7DUG,CADFf,OAAOgB,KAAK/Y,GACcb,GAGnC6Z,EAAkB,SAAlBA,EAAmBja,EAAI6Y,GACzBF,EAAYE,GAASF,EAAYE,IAAU,GAC3CF,EAAYE,GAAOvW,KAAKtC,EAAGC,IAFQ,2BAInC,YAAgBD,EAAGI,QAAnB,+CAA4B,CAAC,IAApBoX,EAAmB,QACpBlX,EAAIF,EAAQoX,GAChByC,EAAgBhZ,EAAUX,EAAEC,MAAOsY,EAAQ,IANZ,oFAVI,uBAsB3C,YAAee,EAAf,+CAA2B,CAAC,IAAnB3Z,EAAkB,QAEnBia,EAAelB,OAAOgB,KAAKrB,GAAahZ,OAAS,EAErDsa,EAAgBhZ,EAAUhB,GAAKia,IA1BQ,kFA+B3C,IAAIC,EAAoB,GACpBC,EAAkBpB,OAAOgB,KAAKrB,GAAa0B,OAAOC,UAhCX,uBAkC3C,YAAcF,EAAd,+CAA+B,CAAC,IAAvBhB,EAAsB,QAE3BT,EAAYS,GAAKmB,MAAMC,KAAK,IAAIC,IAAI9B,EAAYS,KAFrB,2BAO3B,YAAiBT,EAAYS,GAA7B,+CAAiC,CAAC,IAAzBzX,EAAwB,QACzBwY,EAAkBtX,QAAQlB,IAAS,EACnCgX,EAAYS,GAAGtW,OAAO6V,EAAYS,GAAGvW,QAAQlB,GAAO,GAGpDwY,EAAkB7X,KAAKX,IAZJ,oFAlCY,kFAmD3C,OAAOgX,EAjEW+B,CAAiBzZ,EAAWb,IACR,GA4K1C,SAASqZ,GAAmBkB,GACxB,MAAO,CAAElG,UAAW,sBAAwBkG,EAAI5D,EAAI,KAAO4D,EAAI3D,EAAI,KCpKvE,IAAM7S,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACnCqX,eAAgB,CACZ7V,SAAU,WACVsT,WAAY,GACZhK,OAAQ,uBAEZwM,aAAc,CACVvR,OAAO,cAAD,OAAgB/F,EAAME,QAAQC,QAAQC,MAC5C0K,OAAQ,OACRrF,SAAU,OACVU,OAAQnG,EAAMgB,QAAQ,GACtB6I,aAAc7J,EAAMgB,QAAQ,IAEhCuW,QAAS,CACLzM,OAAQ,IACRpI,SAAU,OACVL,MAAO,IACP,sBAAuB,OACvB,mBAAoB,OACpB,kBAAmB,OACnBmV,WAAY,OACZ3N,aAAc,GACd,MAAO,CACH,sBAAuB,OACvB,mBAAoB,OACpB,kBAAmB,OACnB2N,WAAY,SAGpBC,SAAU,CACNjW,SAAU,WACVkW,OAAQ,GACRjO,KAAM,QAuTCxI,gBAZS,SAAApF,GAAK,MAAK,CAC9BqB,MAAOrB,EAAMsC,QAAQjB,MACrBQ,UAAW7B,EAAMsC,QAAQT,UACzBb,QAAShB,EAAMsC,QAAQtB,YAEA,SAAAqE,GAAQ,MAAK,CACpCyN,cAAe,kBAAMzN,GbrWd,SAACA,EAAUsJ,GACdtJ,EAAS,CAACnF,KdNS,oB2B2WvB4b,eAAgB,SAAAvZ,GAAI,OAAI8C,EAAS,CAACnF,K3BpWP,kB2BoW8BsC,QAASD,KAClEwZ,aAAc,SAAAtZ,GAAG,OAAI4C,EAAS,CAACnF,K3B9VN,gB2B8V2BsC,QAASC,KAC7DuZ,gBAAiB,SAAC5Y,EAAUC,EAAQtC,GAAnB,OAA4BsE,EAASoJ,GAAmBrL,EAAUC,EAAQtC,KAC3FmN,iBAAkB,SAACzL,EAAKG,GAAN,OAAgByC,EbhVL,SAAC5C,EAAKG,GACnC,OAAO,SAACyC,EAAUsJ,GACdtJ,EAAS,CACLnF,KdlBsB,qBcmBtBsC,QAAS,CAACC,MAAKG,Ya4UoBqZ,CAAkBxZ,EAAKG,QAEvDwC,EAnTG,SAAAG,GACd,IAAMC,EAAUT,KACRlD,EAAuH0D,EAAvH1D,UAAWb,EAA4GuE,EAA5GvE,QAASK,EAAmGkE,EAAnGlE,MAAO8S,EAA4F5O,EAA5F4O,QAASrB,EAAmFvN,EAAnFuN,cAAegJ,EAAoEvW,EAApEuW,eAAgBC,EAAoDxW,EAApDwW,aAAcC,EAAsCzW,EAAtCyW,gBAAiB9N,EAAqB3I,EAArB2I,iBAFnF,EAGH/C,mBAAS,IAHN,oBAGhB+Q,EAHgB,KAGZC,EAHY,OAIDhR,mBAAS,IAJR,oBAIhBiR,EAJgB,KAIXC,EAJW,OAKalR,oBAAS,GALtB,oBAKhBmR,EALgB,KAKHC,EALG,OAMepR,mBAAS,IANxB,oBAMhBqR,EANgB,KAMHC,EANG,OAOStR,mBAAS,CAAEwM,EAAG,EAAGC,EAAG,IAP7B,oBAOhB8E,EAPgB,KAONC,EAPM,OAQexR,mBAAS,CAACtK,GAAI,GAAIX,KAAM,KARvC,oBAQhBgX,EARgB,KAQH0F,EARG,OASqBzR,mBAAS,IAT9B,oBAShB0R,EATgB,KASAC,EATA,KA2BjBrH,EAAiB/B,uBAAY,WAC/B,IAAIqJ,EAAYzD,GAAgBzX,EAAWb,GACvCgc,ED4GZ,SAA+Bnb,EAAWb,EAASkb,GAC/C,IAAMe,EAAgB,GAKtB,IAAI,IAAI7C,KAAKvY,EAAW,CACpB,IAAIjB,EAAKiB,EAAUuY,GADC,uBAEpB,IAAI,IAAJ,IAAexZ,EAAGI,QAAlB,+CAA2B,CAAC,IAApByB,EAAmB,QACnBya,EAAKlc,EAAQyB,GAEb0a,EAAQjB,EAAGtb,EAAGC,IAAI8W,EH9MDG,GG+MjBsF,EAAQlB,EAAGtb,EAAGC,IAAI+W,EH9MIK,GG+MtBoF,EAAMnB,EAAGgB,EAAG/b,MAAMwW,EHhNDG,GGiNjBwF,EAAMpB,EAAGgB,EAAG/b,MAAMyW,GH/ME,EGiNpB2F,EAAO3c,EAAGC,GAAK,MAAQqc,EAAG/b,KAE9B8b,EAAcM,GAAQ,CAClB1c,GAAI0c,EACJnF,IAAK3V,EACL+V,GAAI2E,EACJ1E,GAAI2E,EACJ1E,GAAI2E,EACJ1E,GAAI2E,IAlBQ,mFAuBxB,OAAOL,ECzIkBO,CAAqB3b,EAAWb,EAAS+b,GAC9DjR,QAAQC,IAAI,mEAAoEgR,GAChFZ,EAAMY,GACNV,EAAOW,KACR,CAACnb,EAAWb,IAEf8S,qBAAU,WAGFzS,GACAyR,IAGJ2C,MAED,CAAC3C,EAAezR,EAAOoU,IAE1B,IAAMtH,EAAkB,SAACtN,EAAIX,GAIzB,GAAyB,QAArBgX,EAAYhX,MAA0B,OAARA,EAAc,CAC5C,IAAIkD,EAAW8T,EAAYrW,GAEvB0c,EAAOna,EAAW,MADTvC,EAGbic,EAAkB,CACdrS,QAAQ,EACRrH,SAAUA,EACVC,OANSxC,EAOTX,KAAMkc,EAAImB,GAAQ,OAAS,SAC3Bxc,KAAMqb,EAAImB,GAAQvc,EAAQob,EAAImB,GAAMnF,KAAKrX,KAAO,KAUxD6b,EAAe,CAAC/b,KAAIX,UAgElBud,EAAkB,SAACC,EAAInb,GACzBmb,EAAGnG,kBAEHkF,EAAela,GACfoa,EAAY,CAAEhF,EAAG+F,EAAGC,MAAQ/F,EAAG8F,EAAGE,SAGhCC,EAAoB,SAAAH,GACtBA,EAAGnG,kBAEHkF,EAAe,IACfE,EAAY,CAAEhF,EAAG,EAAIC,EAAG,KAGtBkG,EAAS,SAACvb,EAAMwb,EAAWC,GAC7B,GAAKzb,GAAS2Z,EAAG3Z,GAAjB,CACA,IAEI0b,EAAS,CACTpd,GAAI0B,EACJoV,EAJUuE,EAAG3Z,GAAMoV,EAINoG,EACbnG,EAJUsE,EAAG3Z,GAAMqV,EAINoG,GAEjBC,EAAOhH,eAAiBoD,GAAkB4D,GAC1C,IAAIC,EAAK,eACFhC,EADE,eAEJ3Z,EAAO0b,IAEZ9B,EAAM+B,GApEe,SAAA3C,GACrB,IAAI4C,EAAM,eAAO/B,GAMjB,IAAI,IAAIhC,KAAK+D,EAAQ,CACjB,IAAIjd,EAAIid,EAAO/D,GACXgE,EAAYld,EAAEL,GAAGwd,MAAM,OACvBjb,EAAWgb,EAAU,GACrB/a,EAAS+a,EAAU,GAGnB7C,EAAI1a,KAAOuC,IACXlC,EAAC,eAAOA,IACNsX,GAAK+C,EAAI5D,EJxKMG,GIyKjB5W,EAAEuX,GAAK8C,EAAI3D,EJxKWK,GI0KtBkG,EAAM,eACCA,EADD,eAEDjd,EAAEL,GAAKK,KAIPqa,EAAI1a,KAAOwC,KAChBnC,EAAC,eAAOA,IACNwX,GAAK6C,EAAI5D,EJnLMG,GIoLjB5W,EAAEyX,GAAK4C,EAAI3D,GJlLS,EIoLpBuG,EAAM,eACCA,EADD,eAEDjd,EAAEL,GAAKK,KAKpBmb,EAAO8B,GAkCPG,CAAiBL,KAGfM,EAAgBC,KAAEC,UAAS,SAAAf,GAG7B,GAAIlB,EAAa,CAEb,IAAIkC,EAAahB,EAAGC,MAAQjB,EAAS/E,EACjCgH,EAAajB,EAAGE,MAAQlB,EAAS9E,EACrCkG,EAAOtB,EAAakC,EAAYC,GAChChC,EAAY,CAAEhF,EAAG+F,EAAGC,MAAQ/F,EAAG8F,EAAGE,WAEvC,KAEGgB,EAAiB,SAACb,EAAWC,GACN,OAArB9G,EAAYhX,MACZ4d,EAAO5G,EAAYrW,GAAIkd,EAAWC,IAgC1C,OACQpE,OAAOgB,KAAK/Y,GAAWtB,SAAWqZ,OAAOgB,KAAKsB,GAAI3b,QAElDqZ,OAAOgB,KAAK5Z,GAAST,SAAWqZ,OAAOgB,KAAKwB,GAAK7b,OAGjD,kBAACuI,GAAA,EAAD,KACKgD,QAAQC,IAAI,+BADjB,gBASJ,kBAACjD,GAAA,EAAD,KACKgD,QAAQC,IAAI,oBACb,kBAAC,GAAD,CACIoI,QAASA,EACTqB,gBA1CY,WACpB,GAAK0B,EAAYrW,IAAyB,OAAnBqW,EAAYhX,MAAkC,QAAnBgX,EAAYhX,KAGzD,GAAGgX,EAAYrW,KAAOQ,EACvB8P,MAAM,yEAEL,CACD,IAAI0N,EAAU,GACX1e,EAAW+W,EAAYrW,GAAI,MAAOge,EAAU,WACvC1e,EAAW+W,EAAYrW,GAAI,OAAMge,EAAU,UAE3C/U,OAAOgV,QAAP,0CAAkDD,EAAlD,YAA6D3H,EAAYrW,GAAzE,oDAGW,aAAZge,EAAwB/C,EAAe5E,EAAYrW,IACjC,WAAZge,GAAsB9C,EAAa7E,EAAYrW,UAd5DsQ,MAAM,yEAyCFsE,eAAgBA,EAChBH,aAAc,kBAAMiH,GAAcD,MAGtC,yBAAK7W,UAAWD,EAAQgW,gBACpB,yBAAK/V,UAAWD,EAAQiW,aAAc1V,QAAS,kBAAM6W,EAAe,MAChE,yBACInX,UAAWD,EAAQkW,QACnBjE,UAAW,SAAA/L,GAAC,OAAImS,EAAkBnS,KAG9BkO,OAAOC,OAAOuC,GAAKvU,KAAI,SAAA3G,GAAC,OACpB,kBAAC,GAAD,CACIA,EAAGA,EAAG8G,IAAK9G,EAAEL,GACbqW,YAAaA,EACb/I,gBAAiBA,OAOzByL,OAAOC,OAAOqC,GAAIrU,KAAI,SAAA0T,GAClB,IAAI3a,EAAKiB,EAAU0Z,EAAI1a,IACvB,OAAQ,kBAAC,GAAD,CACIkW,KAAMnW,EAAGC,GACTC,MAAOF,EAAGE,MACVmW,eAAgBsE,EAAItE,eACpB5V,MAAOA,EACP2G,IAAKpH,EAAGC,GACRqW,YAAaA,EACb/I,gBAAiBA,EACjBgJ,gBAAiBsG,EACjBrG,cAAeyG,EACfxG,gBAAiBkH,SAO7C,yBAAK9Y,UAAW8D,aAAK/D,EAAQoW,UAAWU,GAAe,SACnD,kBAAC,GAAD,CACIpG,SA3FH,kBAAM0I,GJ7OD,GI6O6B,IA4F/BzI,UA3FF,kBAAMyI,EJ9OF,GI8O6B,IA4F/BxI,OA3FL,kBAAMwI,EAAe,GJ/Od,KI2UFvI,SA3FH,kBAAMuI,EAAe,EJhPhB,SIgVd,kBAAC,GAAD,eACInU,OAAQoS,EAAepS,QACnBoS,EAFR,CAGInS,YAAa,kBAAIoS,EAAkB,KACnC3D,WAxNiB,SAAC/V,EAAUC,EAAQtC,EAAMb,GAElD,GAAa,WAATA,EACA8b,EAAgB5Y,EAAUC,EAAQtC,QAEjC,GAAa,SAATb,EAAiB,CACtB,IACIuC,EAAM2Z,EADChZ,EAAW,MAAQC,GACV+U,IACpBlK,EAAiBzL,EAAK1B,QAGtB+K,QAAQC,IAAI,yDAGhB+Q,EAAkB,Y,qKCrIpB/X,GAAYC,aAAW,SAAAb,GAAK,MAAK,CACrC4a,KAAM,CACJC,SAAU,IACV1U,OAAQ,UAEV2U,MAAO,CACLhQ,OAAQ,EACRnB,WAAY,UAEdoR,OAAQ,CACN7J,UAAW,eACX4D,WAAY,OACZkG,WAAYhb,EAAMib,YAAYC,OAAO,YAAa,CAChDC,SAAUnb,EAAMib,YAAYE,SAASC,YAGzCC,WAAY,CACVnK,UAAW,kBAEboK,OAAQ,CACNlX,gBAAiB/D,KAAI,UA6FVkb,GAzFK,SAAAna,GAClB,IAAMC,EAAUT,KACT8H,EAAgCtH,EAAhCsH,KAAM8S,EAA0Bpa,EAA1Boa,WAAYC,EAAcra,EAAdqa,WAFE,EAGKrP,IAAMpF,UAAS,GAHpB,oBAGpB0U,EAHoB,KAGVC,EAHU,KAS3B,OACE,kBAACC,GAAA,EAAD,CAAMta,UAAWD,EAAQuZ,MACvB,kBAACiB,GAAA,EAAD,CACEP,OACE,kBAACQ,GAAA,EAAD,CAAQha,aAAW,SAASR,UAAWD,EAAQia,QAA/C,KAIFxf,OACE,kBAAC4F,EAAA,EAAD,CAAYI,aAAW,YACrB,kBAAC,KAAD,OAGJnF,MAAO+L,EAAKvL,KAAKC,KACjB2e,UAAWrT,EAAKvL,KAAKG,WAEvB,kBAAC0e,GAAA,EAAD,CACE1a,UAAWD,EAAQyZ,MACnBmB,MAAM,oDACNtf,MAAM,gBAER,kBAACuf,GAAA,EAAD,KACE,kBAACjX,GAAA,EAAD,CAAYC,QAAQ,QAAQrD,MAAM,gBAAgBgO,UAAU,KACzDnH,EAAKvL,KAAKE,OAGf,kBAAC8e,GAAA,EAAD,CAAaC,gBAAc,GACzB,kBAAC1a,EAAA,EAAD,CAAYI,aAAW,oBACrB,kBAAC,KAAD,OAEF,kBAACJ,EAAA,EAAD,CAAYI,aAAW,SACrB,kBAAC,KAAD,OAEF,kBAACJ,EAAA,EAAD,CAAYI,aAAW,OAAOF,QAAS,kBAAM6Z,EAAW/S,EAAKhM,MAC3D,kBAAC,KAAD,OAED8e,GACG,kBAAC9Z,EAAA,EAAD,CACIJ,UAAW8D,aAAK/D,EAAQ0Z,OAAT,eACV1Z,EAAQga,WAAaK,IAE1B9Z,QA7CY,WACxB+Z,GAAaD,IA6CDW,gBAAeX,EACf5Z,aAAW,aAEX,kBAAC,KAAD,UCjDDwa,GAnCM,SAAAlb,GAAS,MAEU4F,mBAAS,IAFnB,oBAEnBuV,EAFmB,KAEPC,EAFO,KAS1B7M,qBAAU,YALc,WACpB,IAAMnB,EAAe7F,KAAKC,MAAMjD,OAAO8H,aAAagB,QAAQ,kBAAoB,GAChF+N,EAAc/G,OAAOC,OAAOlH,IAI5BiO,KACD,IAEH,IAAMC,EAAe,SAAAhgB,GACjB0E,EAAM4O,QAAQjR,KAAd,2BAAuCrC,KAG3C,OACI,kBAACiI,GAAA,EAAD,CAAKwE,GAAI,GACL,kBAACvE,GAAA,EAAD,CAAMC,WAAS,EAAC7D,QAAS,GAEjBub,EAAW7Y,KAAK,SAAA8I,GAAC,OACb,kBAAC5H,GAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIqE,GAAI,EAAGpE,GAAI,EAAG2X,GAAI,EAAGC,GAAI,EAAG/Y,IAAK2I,EAAE9P,IAClD,kBAAC,GAAD,CACIgM,KAAM8D,EACNgP,YAAY,EACZC,WAAYiB,WCT7BG,GA5BA,CACX,CACIC,KAAM,QACNjN,UAAWtK,GACXwX,OAAO,GAEX,CACID,KAAM,eACNjN,UAAWmN,GACXD,OAAO,GAEX,CACID,KAAM,iBACNjN,UAAWmN,GACXD,OAAO,GAEX,CACID,KAAM,cACNjN,UAAWoN,GACXF,OAAO,GAEX,CACID,KAAM,YACNjN,UCoCO5O,eA7CC,SAAAG,GAAU,IAAD,EACoB4F,mBAAS,GAD7B,oBACd+H,EADc,KACGC,EADH,KAOrB,OACI,kBAACrK,GAAA,EAAD,CAAKiL,EAAG,GAEJ,kBAAC3K,GAAA,EAAD,CAAYC,QAAQ,KAAK2K,UAAU,MAAnC,YAIA,kBAAClL,GAAA,EAAD,CAAKW,GAAI,EAAGwK,GAAI,EAAGxO,UAAU,sBACzB,kBAAC2D,GAAA,EAAD,CAAYC,QAAQ,aAApB,oDAKJ,kBAAC+K,GAAA,EAAD,CAAOC,QAAM,GACT,kBAACC,GAAA,EAAD,CACI1R,MAAOsQ,EACPqB,eAAe,UACfC,UAAU,UACV/I,SAtBQ,SAACgJ,EAAOC,GAC5BvB,EAAcuB,IAsBFC,UAAQ,EACR1O,aAAW,4BAEX,kBAAC2O,GAAA,EAAD,CAAKnI,MAAM,UACX,kBAACmI,GAAA,EAAD,CAAKnI,MAAM,aAInB,kBAAC3D,GAAA,EAAD,CAAKrD,UAA+B,IAApByN,EAAwB,OAAS,IAC7C,kBAAC,GAAD,CAAciB,QAAS5O,EAAM4O,WAGjC,kBAACrL,GAAA,EAAD,CAAKrD,UAA+B,IAApByN,EAAwB,OAAS,SD5BrDgO,OAAO,IEgBAG,GAhCH,WACV,OACE,kBAACC,EAAA,EAAD,CAAend,MAAOA,GACpB,kBAAC,IAAD,CAAUL,MAAOA,GACf,kBAAC,IAAD,KACE,gCACE,kBAAC,EAAD,OAEF,6BACE,kBAACyd,GAAD,OAEF,yBAAK9b,UAAU,WACb,kBAAC,IAAD,KAEIub,GAAOnZ,KAAI,SAAAmQ,GAAC,OACV,kBAAC,IAAD,iBAAWA,EAAX,CAAchQ,IAAKgQ,EAAEiJ,WAGzB,kBAAC,IAAD,CAAOA,KAAK,KACV,kBAAC,IAAD,CAAUhZ,GAAG,SAInB,gCACE,kBAAC,GAAD,WC5BZuZ,IAASC,OAAO,kBAAC,GAAD,MAASzQ,SAAS0Q,eAAe,U,mBCLjDC,EAAOC,QAAU,CAAC,cAAgB,6BAA6B,QAAU,yB,iBCDzED,EAAOC,QAAU,msH","file":"static/js/main.ed5ee56e.chunk.js","sourcesContent":["import {UI_SIDEBAR_OPEN, UI_SIDEBAR_CLOSE} from '../actionTypes'\r\n\r\nconst initState = {\r\n    isSidebarOpen: false\r\n}\r\n\r\nconst uiReducer = (state=initState, action) => {\r\n    switch (action.type) {\r\n        case UI_SIDEBAR_OPEN:\r\n            return { ...state, isSidebarOpen: true }\r\n        case UI_SIDEBAR_CLOSE:\r\n            return { ...state, isSidebarOpen: false }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default uiReducer","// ALL UI MANIPULATION ACTION TYPES\r\nexport const UI_SIDEBAR_OPEN = \"UI_SIDEBAR_OPEN\"\r\nexport const UI_SIDEBAR_CLOSE = \"UI_SIDEBAR_CLOSE\"\r\n\r\nexport const TALE_CREATE = \"TALE_CREATE\"\r\nexport const TALE_SET_AS_WIP = \"TALE_SET_AS_WIP\"    // Set the given tale as WIP tale\r\nexport const TALE_UPDATE_INFO = \"TALE_UPDATE_INFO\"\r\nexport const TALE_STATE_CLEANUP = \"TALE_STATE_CLEANUP\"\r\n\r\nexport const STORYLET_CREATE = \"STORYLET_CREATE\"\r\nexport const STORYLET_UPDATE_FIELD = \"STORYLET_UPDATE_FIELD\"\r\nexport const STORYLET_DELETE = \"STORYLET_DELETE\"\r\n\r\nexport const STORYBOARD_ADD_SINGLE = \"STORYBOARD_ADD_SINGLE\"\r\nexport const STORYBOARD_INSERT_AT = \"STORYBOARD_INSERT_AT\"\r\nexport const STORYBOARD_SELECT_CHOICE = \"STORYBOARD_SELECT_CHOICE\"\r\n\r\nexport const CHOICE_CREATE = \"CHOICE_CREATE\"\r\nexport const CHOICE_DELETE = \"CHOICE_DELETE\"\r\nexport const CHOICE_UPDATE_TEXT = \"CHOICE_UPDATE_TEXT\"\r\nexport const ADD_CID_TO_STID = \"ADD_CID_TO_STID\"\r\n\r\n","export {\n    startsWith,\n    make3Figure\n}\n\nfunction startsWith (src, part) {\n    return src.substring(0, part.length) === part\n}\n\n/**\n * This will make a num a 3 figure String\n * So, 9 will become 009\n * 54 will become 054\n * @param {*} num \n */\nfunction make3Figure (num) {\n    let baseNum = 100\n    let auxNum = 1000\n    if (num < baseNum) {\n        return (auxNum+num).toString().substring(1)\n    }\n    return num.toString()\n}","/**\r\n * This is hold and manage the state of the current WIP Tale\r\n * id: StoryID\r\n * start: Start Storylet ID\r\n */\r\nimport { make3Figure } from '../../utils/util'\r\nimport { \r\n    TALE_CREATE, \r\n    TALE_SET_AS_WIP,\r\n    TALE_UPDATE_INFO,\r\n    TALE_STATE_CLEANUP,\r\n    STORYLET_CREATE,\r\n    STORYLET_DELETE,\r\n    STORYLET_UPDATE_FIELD,\r\n    STORYBOARD_ADD_SINGLE,\r\n    STORYBOARD_INSERT_AT,\r\n    STORYBOARD_SELECT_CHOICE,\r\n    CHOICE_CREATE,\r\n    CHOICE_DELETE,\r\n    CHOICE_UPDATE_TEXT,\r\n    ADD_CID_TO_STID\r\n} from '../actionTypes'\r\n\r\nconst START_ST_ID = 'ST000' // BY MY STRICTEST CONVENTION \r\n\r\nconst getInitTaleState = () => ({\r\n    id: null,\r\n    start: null,\r\n    info: {\r\n        name: '',\r\n        desc: '',\r\n        category: '',\r\n        lang: '',\r\n        tags: ''\r\n    },\r\n    idCounter: 0,\r\n    storylets: {},\r\n    choices: {},\r\n    storyboard: []  // This will hold only StoryBoardItems\r\n})\r\n\r\nconst createStorylet = st => {\r\n    st = st || {}\r\n    return {\r\n        id: st.id,\r\n        title: st.title || '',\r\n        text: st.text || '',\r\n        choices: st.choices || [] // This will hold only Choice IDs\r\n    }\r\n}\r\n\r\nconst createChoice = c => {\r\n    c = c || {}\r\n    return {\r\n        id: c.id,\r\n        text: c.text || '',\r\n        next: c.next || null\r\n    }\r\n}\r\n\r\nconst wipTaleReducer = (state=getInitTaleState(), action) => {\r\n    switch (action.type) {\r\n\r\n        /**\r\n         * Create a new Tale, START Storylet ID will always be \"st0\"\r\n         */\r\n        case TALE_CREATE: {\r\n            const storyID = 'R' + (new Date()).getTime() + Math.random().toString().replace('.','')            \r\n            const newST = createStorylet({id: START_ST_ID})\r\n            let wipTale = {\r\n                ...state,\r\n                id: storyID,\r\n                start: START_ST_ID,\r\n                storylets: { \r\n                    [START_ST_ID]: newST\r\n                },\r\n                storyboard: [{stID: START_ST_ID}]\r\n            }\r\n            return wipTale\r\n        }\r\n\r\n        /**\r\n         * To work on an existing Tale, we need to set it as WIP Tale\r\n         */\r\n        case TALE_SET_AS_WIP: {\r\n            return {\r\n                ...action.payload,\r\n                storyboard: [{stID: START_ST_ID}]\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Update the \"info\" object of Tale, while typing in text fields \r\n         */\r\n        case TALE_UPDATE_INFO: {\r\n            return {\r\n                ...state,\r\n                info: action.payload\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Before leaving the Tale creation / edit page, it's good\r\n         * to reset the state\r\n         */\r\n        case TALE_STATE_CLEANUP: {\r\n            return getInitTaleState()\r\n        }\r\n\r\n        /**\r\n         * If already exists a storylet with STID, do nothing\r\n         * Else create one\r\n         */\r\n        case STORYLET_CREATE: {\r\n            const stID = action.payload.stID\r\n            if (state.storylets[stID]) {\r\n                return state\r\n            }\r\n            else {\r\n                const newST = createStorylet({id: stID})\r\n                return {\r\n                    ...state,\r\n                    idCounter: state.idCounter + 1,\r\n                    storylets: {\r\n                        ...state.storylets, \r\n                        [stID]: newST\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Delete the storylet of given stID as payload\r\n         * Delete all its choices\r\n         * Loop thru all storylets and delete all choices pointing to this one\r\n         * \r\n         * So basically, when we delete a storylet, we also delete all \r\n         * incoming and outgoing connectors (choice)\r\n         * i.e. deleting 1 storylet and lots of choices\r\n         */\r\n        case STORYLET_DELETE: {\r\n            let stID = action.payload\r\n            let st = state.storylets[stID]\r\n            let storylets = {...state.storylets}\r\n            let choices = {...state.choices}\r\n            // Delete all outgoing choices\r\n            for(let cID of st.choices) {\r\n                delete choices[cID]\r\n            }\r\n\r\n            // Now loop thru all the storylets, except this one\r\n            // And delete choices which point to this storylet\r\n            for(let id in storylets) {\r\n                if (id === stID) continue\r\n                storylets[id].choices = storylets[id].choices.filter(cID => {\r\n                    let ch = choices[cID]\r\n                    if(ch.next === stID) {\r\n                        delete choices[cID]\r\n                        return false\r\n                    }\r\n                    return true\r\n                })\r\n            }\r\n\r\n            // Finally delete this ST\r\n            delete storylets[stID]\r\n\r\n            let newState = {\r\n                ...state,\r\n                storylets,\r\n                choices\r\n            }\r\n            // console.log(newState)\r\n            return newState\r\n        }\r\n\r\n        /**\r\n         * Update the given storylet field of given STID as typed\r\n         */\r\n        case STORYLET_UPDATE_FIELD: {\r\n            const {stID, fieldName, value} = action.payload\r\n            const newST = {...state.storylets[stID]}\r\n            newST[fieldName] = value\r\n            return {\r\n                ...state,\r\n                storylets: {\r\n                    ...state.storylets,\r\n                    [stID]: newST\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * ADD a single Storyboard Item to Storyboard array\r\n         * Each Storyboard Item will be an object with STID, selectedCID (optional) etc\r\n         */\r\n        case STORYBOARD_ADD_SINGLE: {\r\n            return {\r\n                ...state,\r\n                storyboard: [...state.storyboard, {stID: action.payload.stID}]\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Add s SBI to a particular spot of SB\r\n         * If isRemoveOnly=true, that means user has deselected a Choice checkbox \r\n         * but nothing is selected\r\n         */\r\n        case STORYBOARD_INSERT_AT: {\r\n            const {sbI, nextStID, isRemoveOnly} = action.payload\r\n            let newSB = [...state.storyboard]\r\n            newSB = newSB.slice(0, sbI+1)\r\n            if (!isRemoveOnly) {\r\n                newSB.push({stID: nextStID})\r\n            }            \r\n            return {\r\n                ...state,\r\n                storyboard: newSB\r\n            }\r\n        }\r\n        \r\n        /**\r\n         * Select a particular Choice of a Storylet, means for that particular\r\n         * SBI we need to mark the CID as selected\r\n         */\r\n        case STORYBOARD_SELECT_CHOICE: {\r\n            const {sbI, cID} = action.payload\r\n            let newSB = [...state.storyboard]\r\n            newSB[sbI] = {\r\n                ...newSB[sbI],\r\n                selectedCID: cID\r\n            }\r\n            return {\r\n                ...state,\r\n                storyboard: newSB\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Create a new choice with the given data,\r\n         * Parameters in action.payload contains\r\n         * fromStID { mandatory }\r\n         * toStID { optional }\r\n         * text { optional }\r\n         */\r\n        case CHOICE_CREATE: {\r\n            let {fromStID, toStID, text} = action.payload\r\n            let fromST = {...state.storylets[fromStID]}\r\n            let idCounter = state.idCounter\r\n\r\n            // if toStID was not provided, create it\r\n            toStID = toStID || ('ST' + make3Figure(++idCounter) )\r\n\r\n            // if toST does not exist create it\r\n            let toST = state.storylets[toStID] ? {...state.storylets[toStID]} : createStorylet({id: toStID})\r\n\r\n            // Now create the Choice\r\n            let cID = 'C' + make3Figure(++idCounter)\r\n            const newChoice = createChoice({id: cID, next: toStID, text})\r\n            fromST.choices = [...fromST.choices, cID]\r\n\r\n            return {\r\n                ...state,\r\n                idCounter: idCounter,\r\n                choices: {\r\n                    ...state.choices,\r\n                    [cID]: newChoice\r\n                },\r\n                storylets: {\r\n                    ...state.storylets,\r\n                    [toStID]: toST,\r\n                    [fromStID]: fromST\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Update the given choice text as typed\r\n         */\r\n        case CHOICE_UPDATE_TEXT: {\r\n            const {cID, value} = action.payload\r\n            const newChoice = {...state.choices[cID]}\r\n            newChoice.text = value\r\n            return {\r\n                ...state,\r\n                choices: {\r\n                    ...state.choices,\r\n                    [cID]: newChoice\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * CHOICE_DELETE => delete a choice of given ID\r\n         */\r\n        case CHOICE_DELETE: {\r\n            const cID = action.payload\r\n            let choices = {...state.choices}\r\n            // Go thru all the storylets\r\n            // And delete this cID from whoever has this choice\r\n            // Note: each choice is unique, one to one connector\r\n            // i.e. one choice belongs to 1 storylet only\r\n            // and it points to only 1 storylet with its next\r\n            let st;\r\n            for(let id in state.storylets) {\r\n                if(state.storylets[id].choices.indexOf(cID) > -1) {\r\n                    st = {...state.storylets[id]}\r\n                    break\r\n                }\r\n            }\r\n            // remove this cID from its parent st\r\n            st.choices = [...st.choices]\r\n            st.choices.splice(st.choices.indexOf(cID), 1)\r\n\r\n            // now delete this choice\r\n            delete choices[cID]\r\n\r\n            return {\r\n                ...state,\r\n                storylets: {\r\n                    ...state.storylets,\r\n                    [st.id]: st\r\n                },\r\n                choices\r\n            }\r\n\r\n        }\r\n        \r\n        /**\r\n         * Add the given choice to the given Storylet's choices array\r\n         */\r\n        case ADD_CID_TO_STID: {\r\n            const {stID, cID} = action.payload\r\n            const newST = {...state.storylets[stID]}\r\n            newST.choices = [...newST.choices, cID]\r\n            return {\r\n                ...state,\r\n                storylets: {\r\n                    ...state.storylets,\r\n                    [stID]: newST\r\n                }\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport default wipTaleReducer","import { combineReducers } from 'redux'\r\nimport uiReducer from './uiReducer'\r\nimport wipTaleReducer from './wipTaleReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n    ui: uiReducer,\r\n    wipTale: wipTaleReducer\r\n})\r\n\r\nexport default rootReducer","import { createStore, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport rootReducer from './reducers/rootReducer'\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools(\r\n    applyMiddleware(thunk)\r\n))\r\n\r\nexport default store","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport red from '@material-ui/core/colors/red';\r\n\r\n// $themeColor: #d50000; // #d50000 red accent-4 // #e65100 orange darken-4   // #f44336 red;\r\n// $themeColorAlpha: rgba(213, 0, 0, 0.3);          //#e6510080;    // themeColor appended with 80. for .5 alpha\r\n// $themeColorDisabled: #ff9e80; //deep-orange accent-1\r\n// $themeColorLight: #ffcdd2;  // red lighten-4\r\n// $themeColorDark: darkred;\r\n// $themeColorDarker: rgb(113, 0, 0);\r\n// $textLight: #e57373; // red lighten-2\r\n// $iconColor: #ff7043; //deep-orange lighten-1 //#ef5350; // red lighten-1 // used for many things, not only icons\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: red.A700,\r\n      dark: red.A900\r\n    }\r\n  },\r\n  typography: {\r\n    fontFamily: [\r\n      '\"Exo\"',\r\n      'sans-serif'\r\n    ].join(','),\r\n  }\r\n});\r\n\r\nexport default theme","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Button from '@material-ui/core/Button'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\nimport logoImg from '../../../assets/img/logo/Reactale-logo-50h-white-bg.png'\r\nimport styles from './style.module.css'\r\nimport { connect } from 'react-redux'\r\nimport { UI_SIDEBAR_OPEN } from '../../../redux/actionTypes'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  }\r\n}))\r\n\r\nconst Header = props => {\r\n  const classes = useStyles()\r\n  // console.log(styles)\r\n  return (\r\n    <div className=\"flex-grow-1\">\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" onClick={props.openSidebar} className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <div className={styles.logoContainer}>\r\n            <img src={logoImg} alt=\"Reactale Logo\" className={styles.logoImg} />\r\n          </div>          \r\n          <Button color=\"inherit\">Login</Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  openSidebar: () => dispatch({type: UI_SIDEBAR_OPEN})\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(Header)\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport { connect } from 'react-redux'\r\nimport {UI_SIDEBAR_CLOSE} from '../../../redux/actionTypes'\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport AddBoxIcon from '@material-ui/icons/AddBox';\r\n// import AccountTreeIcon from '@material-ui/icons/AccountTree';\r\nimport BusinessCenterIcon from '@material-ui/icons/BusinessCenter';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  list: {\r\n    width: 250,\r\n  },\r\n  fullList: {\r\n    width: 'auto',\r\n  },\r\n  listItem: {\r\n    borderBottom: \"1px solid \" + theme.palette.primary.main\r\n  },\r\n  icoInList: {\r\n    minWidth: 40\r\n  },\r\n  ico: {\r\n    fontSize: 30\r\n  }\r\n}))\r\n\r\nconst navs = [\r\n    {\r\n        name: \"Home\",\r\n        url: \"/home\",\r\n        icon: HomeIcon\r\n    },\r\n    {\r\n        name: \"Create Tale\",\r\n        url: \"/create-tale\",\r\n        icon: AddBoxIcon\r\n    },\r\n    // {\r\n    //     name: \"Tales Flow\",\r\n    //     url: \"/tales-flow\",\r\n    //     icon: AccountTreeIcon\r\n    // },\r\n    {\r\n        name: \"My Tales\",\r\n        url: \"/my-tales\",\r\n        icon: BusinessCenterIcon\r\n    }\r\n]\r\n\r\nconst Sidebard = props => {\r\n  const classes = useStyles()\r\n\r\n  const sideList = side => (\r\n    <div\r\n      className={classes.list}\r\n      role=\"presentation\"\r\n      onClick={props.closeSidebar}\r\n      onKeyDown={props.closeSidebar}\r\n    >\r\n      <List>\r\n        {navs.map((nav, index) => (\r\n          <Link key={nav.name} to={nav.url} className=\"anchor-default-none\">\r\n            <ListItem button className={classes.listItem}>\r\n              <ListItemIcon className={classes.icoInList}>\r\n                  <nav.icon color=\"primary\" className={classes.ico} />\r\n              </ListItemIcon>\r\n              <ListItemText primary={nav.name} />\r\n            </ListItem>\r\n          </Link>\r\n        ))}\r\n      </List>\r\n      {/* <Divider />\r\n      <List>\r\n        {['All mail', 'Trash', 'Spam'].map((text, index) => (\r\n          <ListItem button key={text}>\r\n            <ListItemIcon>{index % 2 === 0 ? <InboxIcon /> : <MailIcon />}</ListItemIcon>\r\n            <ListItemText primary={text} />\r\n          </ListItem>\r\n        ))}\r\n      </List> */}\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      <Drawer open={props.isSidebarOpen} onClose={props.closeSidebar}>\r\n        {sideList('left')}\r\n      </Drawer>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    isSidebarOpen: state.ui.isSidebarOpen\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    closeSidebar: () => dispatch({type: UI_SIDEBAR_CLOSE})\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebard)\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport TwitterIcon from '@material-ui/icons/Twitter';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport AndroidIcon from '@material-ui/icons/Android';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        backgroundColor: theme.palette.primary.dark,\r\n        color: '#fff',\r\n        padding: `${theme.spacing(5)}px ${theme.spacing(4)}px`\r\n    },\r\n    links: {\r\n        '& a': {\r\n            textDecoration: 'none',\r\n            color: '#fff !important'\r\n        }\r\n    },\r\n    iconLinks: {\r\n        display: 'flex',\r\n        '& svg': {\r\n            fontSize: 27,\r\n            marginRight: theme.spacing(1)\r\n        }\r\n    }\r\n}))\r\n\r\nconst Footer = props => {\r\n    const classes = useStyles()\r\n    return (\r\n        <Box className={classes.root}>\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={12} md={8}>\r\n                    <p className=\"margin-top-0\">\r\n                        Reactale is what happens when literature embraces technology and comes to life. When a reader reads a Reactale (a.k.a Reactive Tale), the Reactale also reads back its reader and then reacts by magically altering itself depending on the reader's actions / decisions / sorroundings and other learnings that are made available to it about its reader.\r\n                    </p>\r\n                    <p>\r\n                        REACTALE marks the birth of a NEW ERA of story telling, in search of a new way, a very REACTIVE one, where no longer will an immersive tale ONLY ENGAGE its readers, but it will INTERACT, and most importantly, it will REACT...\r\n                    </p>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                    <Box>\r\n                        <Typography variant=\"h5\" gutterBottom>\r\n                            Connect\r\n                        </Typography>\r\n                        <ul className={clsx(classes.links, classes.iconLinks)}>\r\n                            <li><a href=\"https://www.facebook.com/reactale\"><FacebookIcon /></a></li>\r\n                            <li><a href=\"https://twitter.com/ReactiveTales\"><TwitterIcon /></a></li>\r\n                            <li><a href=\"mailto:reactale@gmail.com\"><EmailIcon /></a></li>\r\n                            <li title=\"Android app coming soon\"><a><AndroidIcon /></a></li>\r\n                        </ul>\r\n                    </Box>\r\n                    <Box mt={2}>\r\n                        <Typography variant=\"h5\" gutterBottom>\r\n                            Links\r\n                        </Typography>\r\n                        <ul className={classes.links}>\r\n                            <li>\r\n                                <a href=\"https://reacto.reactale.com/\">Reacto</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href=\"https://reactale.com/rtale/privacy-policy\">Privacy Policy</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href=\"https://reactale.com/rtale/terms-and-conditions\">Terms and Conditions</a>\r\n                            </li>\r\n                        </ul>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Footer","import React from 'react'\r\n\r\nconst Home = props => {\r\n    return (\r\n        <div>\r\n            Welcome Home\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Modal from '@material-ui/core/Modal';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  modalWrapper: {\r\n    overflow: \"auto\"\r\n  },\r\n  modalBox: {\r\n    position: 'relative',\r\n    width: `${window.innerWidth - 200}px`,\r\n    minWidth: 300,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: `5px double ${theme.palette.primary.main}`,\r\n    boxShadow: theme.shadows[5]\r\n  },\r\n  titleBar: {\r\n    margin: 0,\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: '#fff',\r\n    padding: `${theme.spacing(.5)}px ${theme.spacing(1)}px`\r\n  },\r\n  modalBody: {\r\n    padding: `${theme.spacing(2)}px ${theme.spacing(1)}px`\r\n  }\r\n}));\r\n\r\nconst getDynamicStyle = () => ({\r\n  width: `${window.innerWidth - 200}px`,\r\n  margin: `${window.innerHeight / 5}px auto`\r\n})\r\n\r\nconst SimpleModal = props => {\r\n  const classes = useStyles();\r\n  const { isOpen, handleClose, title, children } = props\r\n  \r\n  return (\r\n      <Modal\r\n        aria-labelledby={title}\r\n        aria-describedby={title}\r\n        className={classes.modalWrapper}\r\n        open={isOpen}\r\n        onClose={handleClose}\r\n      >\r\n        <div className={classes.modalBox} style={getDynamicStyle()}>\r\n          <h2 className={classes.titleBar}>{title}</h2>\r\n          <div className={classes.modalBody}>\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n  );\r\n}\r\n\r\nexport default SimpleModal\r\n","import React, { useState } from 'react'\r\nimport SimpleModal from '../../common/modal/SimpleModal'\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst ImportTaleModal = props => {\r\n    const {isOpen, handleClose, setForEditing} = props\r\n    const [importedTxt, setImportedTxt] = useState('')\r\n    const importTale = () => {\r\n        const tale = JSON.parse(decodeURIComponent(atob(importedTxt)))\r\n        setForEditing(tale)\r\n        setImportedTxt('')\r\n    }\r\n\r\n    const handleFileSelect = e => {\r\n        let file = e.target.files[0]\r\n        console.log(file)\r\n\r\n        let reader = new FileReader();\r\n\r\n        // Closure to capture the file information.\r\n        reader.onload = (function(theFile) {\r\n            return e => setImportedTxt(e.target.result)\r\n        })(file);\r\n\r\n        // Read in the image file as a data URL.\r\n        reader.readAsText(file);\r\n    }\r\n\r\n    return (\r\n        <SimpleModal \r\n            isOpen={isOpen} \r\n            handleClose = {handleClose}\r\n            title=\"Import Reactale\"\r\n        >\r\n            <Typography variant=\"body1\" gutterBottom>\r\n                Import a previously exported Reactale file <b>OR</b> optionally you can paste the text from it if \"file import\" is not working in your browser\r\n            </Typography>\r\n\r\n            <Box mt={2}>\r\n                <form encType=\"multipart/form-data\">\r\n                    <input \r\n                        type=\"file\" \r\n                        accept=\"text/txt\" \r\n                        name=\"files[]\" \r\n                        size=\"30\" \r\n                        onChange={e => handleFileSelect(e)}\r\n                    />\r\n                </form>\r\n            </Box>\r\n\r\n            <Box align=\"center\" my={1}>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                    <b>OR</b>\r\n                </Typography>\r\n            </Box>\r\n\r\n            <Box>\r\n                <TextField\r\n                    label=\"Paste Content Here\"\r\n                    multiline\r\n                    rows=\"4\"\r\n                    fullWidth\r\n                    variant=\"outlined\"\r\n                    value = {importedTxt}\r\n                    onChange = { e => setImportedTxt(e.target.value)}\r\n                />\r\n            </Box>\r\n            \r\n            <Box mt={2} align=\"right\">\r\n                <Button \r\n                    size=\"small\"\r\n                    variant=\"contained\" \r\n                    color=\"primary\"\r\n                    onClick={importTale}\r\n                >\r\n                    Import\r\n                </Button>\r\n            </Box>\r\n\r\n            \r\n            \r\n        </SimpleModal>\r\n    )\r\n}\r\n\r\nexport default ImportTaleModal","import React from 'react'\r\n// import { makeStyles } from '@material-ui/core/styles'\r\n// import Paper from '@material-ui/core/Paper'\r\nimport Box from '@material-ui/core/Box'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    TALE_UPDATE_INFO\r\n} from '../../../redux/actionTypes'\r\n\r\n// const useStyles = makeStyles(theme => ({\r\n//     root: {\r\n//       flexGrow: 1,\r\n//     },\r\n//     paper: {\r\n//       padding: theme.spacing(2),\r\n//       textAlign: 'center',\r\n//       color: theme.palette.text.secondary,\r\n//     },\r\n// }))\r\n\r\nconst updateTaleInfo = (dispatch, key, val, oldInfo) => {\r\n    dispatch({\r\n        type: TALE_UPDATE_INFO,\r\n        payload: {\r\n            ...oldInfo,\r\n            [key]: val\r\n        }\r\n    })\r\n}\r\n\r\nconst CreateTaleIntro = props => {\r\n    // const classes = useStyles()\r\n    const {info, typingVal} = props\r\n\r\n    return (\r\n        <Box py={3}>\r\n            <Grid container spacing={2}>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <TextField \r\n                        fullWidth \r\n                        label=\"Name of Tale\" \r\n                        variant=\"outlined\"\r\n                        value={info.name} \r\n                        onChange={e => typingVal('name', e.target.value, info)}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <TextField \r\n                        fullWidth \r\n                        label=\"Category\" \r\n                        variant=\"outlined\" \r\n                        value={info.category} \r\n                        onChange={e => typingVal('category', e.target.value, info)}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <TextField \r\n                        fullWidth \r\n                        label=\"Tags\" \r\n                        variant=\"outlined\"\r\n                        value={info.tags} \r\n                        onChange={e => typingVal('tags', e.target.value, info)}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={12} sm={6} md={3}>\r\n                    <TextField \r\n                        fullWidth \r\n                        label=\"Language\" \r\n                        variant=\"outlined\" \r\n                        value={info.lang} \r\n                        onChange={e => typingVal('lang', e.target.value, info)}\r\n                    />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <TextField\r\n                        label=\"Brief description\"\r\n                        multiline\r\n                        rows=\"4\"\r\n                        fullWidth\r\n                        variant=\"outlined\"\r\n                        value={info.desc} \r\n                        onChange={e => typingVal('desc', e.target.value, info)}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    info: state.wipTale.info\r\n})\r\nconst mapDispatchToProps = dispatch => ({\r\n    typingVal: (key, val, oldInfo) => updateTaleInfo(dispatch, key, val, oldInfo)\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateTaleIntro)","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\nimport Box from '@material-ui/core/Box'\nimport {connect} from 'react-redux'\nimport Checkbox from '@material-ui/core/Checkbox';\nimport {\n    CHOICE_UPDATE_TEXT, \n    STORYBOARD_SELECT_CHOICE,\n    STORYBOARD_INSERT_AT\n} from '../../../redux/actionTypes'\n\nconst useStyles = makeStyles(theme => ({\n    choiceBox: {\n        position: \"relative\",\n        margin: theme.spacing(1),\n        flexGrow: 1\n    },\n    selectChoice: {\n        position: \"absolute\",\n        top: -theme.spacing(1),\n        left: -theme.spacing(1)\n    },\n    choiceText: {\n        width: \"100%\",\n        '& > div': {\n            paddingTop: 30\n        }\n    },\n    idTag: {\n        fontSize: 13,\n        display: 'inline-block',\n        backgroundColor: '#eee',\n        padding: '1px 5px',\n        borderRadius: 2,\n        position: 'absolute',\n        top: theme.spacing(.5),\n        left: theme.spacing(3.5)\n        // '& input': {\n        //     fontSize: 14,\n        //     backgroundColor: 'inherit',\n        //     outline: 'none',\n        //     border: 'none',\n        //     width: 60\n        // }\n    }\n}))\n\nconst updateChoiceText = (dispatch, cID, value) => {\n    dispatch({\n        type: CHOICE_UPDATE_TEXT,\n        payload: {cID, value}\n    })\n}\n\nconst selectChoice = (dispatch, stID, cID, isSelected, sbI, nextStID) => {\n    cID = isSelected ? cID : '' // blank if Deselcetd\n\n    // Select The Choice\n    dispatch({\n        type: STORYBOARD_SELECT_CHOICE,\n        payload: {sbI, cID}\n    })\n\n    // Update the storyboard\n    // Rollback upto this sbI (storyboard Index)\n    // And Insert nextStID\n    // Optionally pass isRemoveOnly for Deselection\n    dispatch({\n        type: STORYBOARD_INSERT_AT,\n        payload: { sbI, nextStID, isRemoveOnly: !isSelected }\n    })\n}\n\nconst Choice = props => {\n    const classes = useStyles()\n    const { c, stID, sbI } = props\n    return (\n        <Box className={classes.choiceBox}>\n            <div className={classes.idTag}>\n                <span>ID: {c.id}</span>\n            </div>\n            <TextField\n                // label=\"Choice text\"\n                placeholder=\"Enter choice text here\"\n                multiline\n                rows=\"3\"\n                variant=\"outlined\"\n                className={classes.choiceText}\n                value={c.text}\n                onChange={e => props.typingChoiceText(c.id, e.target.value)}\n            />\n            <Checkbox\n                checked={props.isSelected}\n                onChange={(e) => props.handleSelection(stID, c.id, e.target.checked, sbI, c.next)}\n                value=\"primary\"\n                className={classes.selectChoice}\n                inputProps={{ 'aria-label': 'primary checkbox' }}\n            />\n        </Box>\n    )\n}\nconst mapDispatchToProps = dispatch => ({\n    typingChoiceText: (cID, value) => updateChoiceText(dispatch, cID, value),\n    handleSelection: (stID, cID, isSelected, sbI, nextStID) => selectChoice(dispatch, stID, cID, isSelected, sbI, nextStID)\n})\nexport default connect(null, mapDispatchToProps)(Choice)","import {\r\n    TALE_CREATE, \r\n    TALE_SET_AS_WIP,\r\n    TALE_STATE_CLEANUP,\r\n    CHOICE_CREATE,\r\n    CHOICE_UPDATE_TEXT\r\n} from '../actionTypes'\r\n\r\nexport const actionCreateNewTale = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({type: TALE_CREATE})\r\n    }\r\n}\r\n\r\nexport const actionSaveTaleAndReset = () => {\r\n    return (dispatch, getState) => {\r\n        //TODO: Dispatch a save command\r\n        //Then, reset the wipTale state\r\n        dispatch({type: TALE_STATE_CLEANUP})\r\n    }\r\n}\r\n\r\nexport const actionCreateChoice = (fromStID, toStID, text) => {\r\n    if(!fromStID) {\r\n        throw (new Error(\"fromStID is mandatory while creating a new choice\"))\r\n    }\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: CHOICE_CREATE,\r\n            payload: {fromStID, toStID, text}\r\n        })\r\n    }\r\n}\r\n\r\nexport const actionUpdateCText = (cID, value) => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: CHOICE_UPDATE_TEXT,\r\n            payload: {cID, value}\r\n        })\r\n    }\r\n}\r\n\r\nexport const actionSetTaleAsWIP = tale => {\r\n    return dispatch => {\r\n        tale.idCounter = tale.idCounter || 100\r\n        console.log(tale)\r\n        // SET THE WIP TALE\r\n        dispatch({\r\n            type: TALE_SET_AS_WIP,\r\n            payload: tale\r\n        })\r\n    }\r\n}\r\n","import React from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport Box from '@material-ui/core/Box'\nimport Fab from '@material-ui/core/Fab'\nimport Choice from './Choice'\nimport AddIcon from '@material-ui/icons/AddBox'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { connect } from 'react-redux'\nimport { STORYLET_UPDATE_FIELD } from '../../../redux/actionTypes'\nimport { actionCreateChoice } from '../../../redux/actionCreators/createTaleActions'\nimport { orange } from '@material-ui/core/colors'\n\nconst useStyles = makeStyles(theme => ({\n    textField: {\n        display: \"flex\",\n        marginTop: theme.spacing(2)\n    },\n    box: {\n        border: `5px double ${orange[500]}`,\n        borderRadius: 4,\n        position: \"relative\"\n    },\n    title: {\n        border: `5px double ${orange[500]}`,\n        position: \"absolute\",\n        background: '#fff',\n        padding: '0 5px',\n        borderRadius: 4,\n        top: -20,\n        left: 8,\n        fontSize: 14\n    },\n    joiner: {\n        position: \"absolute\",\n        height: theme.spacing(5),\n        borderLeft: `5px double ${orange[500]}`,\n        width: 1,\n        left: \"50%\",\n        top: -45\n    },\n    choiceContainer: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        justifyContent: \"space-between\"\n    },\n    addChoiceBtn: {\n        alignSelf: \"center\",\n        height: 90,\n        borderRadius: 6,\n        margin: `0 ${theme.spacing(1)}px`,\n        textAlign: \"center\",\n        fontSize: 16,\n        lineHeight: \" 20px\",\n        '& span': {\n            display: \"block\"\n        },\n        '& svg': {\n            fontSize: 36\n        }\n    },\n    idTag: {\n        fontSize: 14,\n        display: 'inline-block',\n        backgroundColor: '#eee',\n        padding: '2px 5px',\n        borderRadius: 2\n        // '& input': {\n        //     fontSize: 14,\n        //     backgroundColor: 'inherit',\n        //     outline: 'none',\n        //     border: 'none',\n        //     width: 60\n        // }\n    }\n}))\n\nconst Storylet = props => {\n    const classes = useStyles()\n    const { st, sbI, sbItem, createAChoice, choices } = props\n    return (\n        <div>\n            {/* STORYLET BOX -- STARTS HERE */}\n            <Box className={classes.box} px={1} pb={2} pt={2}>\n                {(sbI !== 0) && <span className={classes.joiner}></span>}\n                <span className={classes.title}>Storylet</span>\n                <div className={classes.idTag}>\n                    <span>ID: {st.id}</span>\n                    {/* <input type=\"text\" value={st.id} disabled /> */}\n                </div>\n                <form noValidate autoComplete=\"off\">\n                    <TextField\n                        label=\"Storylet title\"\n                        variant=\"outlined\"\n                        className={classes.textField}\n                        value={st.title}\n                        onChange={e => props.typingStValue(st.id, \"title\", e.target.value)}\n                    />\n                    <TextField\n                        label=\"Storylet body\"\n                        multiline\n                        rows=\"6\"\n                        variant=\"outlined\"\n                        className={classes.textField}\n                        value={st.text}\n                        onChange={e => props.typingStValue(st.id, \"text\", e.target.value)}\n                    />\n                </form>\n            </Box>\n            {/* STORYLET BOX -- ENDS HERE */}\n\n            {/* CHOICES BOX -- STARTS HERE */}\n            <Box className={classes.box} pt={2} pb={2} my={5}>\n                <span className={classes.joiner}></span>\n                <span className={classes.title}>Choices</span>\n                <div className={classes.choiceContainer}>\n                    {\n                        st.choices && st.choices.map(cID => (\n                            <Choice\n                                c={choices[cID]}\n                                stID={st.id}\n                                sbI={sbI}\n                                isSelected={sbItem.selectedCID === cID}\n                                key={cID}\n                            />\n                        ))\n                    }\n                    <Fab className={classes.addChoiceBtn} variant=\"extended\" color=\"primary\" onClick={() => createAChoice(props.st.id)}>\n                        <AddIcon />\n                        <span className=\"txt\">Add Choice</span>\n                    </Fab>\n                </div>\n\n            </Box>\n            {/* CHOICES BOX -- ENDS HERE */}\n\n        </div>\n    )\n}\n\nconst UpdateStField = (stID, fieldName, value, dispatch) => {\n    dispatch({\n        type: STORYLET_UPDATE_FIELD,\n        payload: {\n            stID, fieldName, value\n        }\n    })\n}\nconst mapStateToProps = state => ({\n    choices: state.wipTale.choices\n})\nconst mapDispatchToProps = dispatch => ({\n    typingStValue: (stID, fieldName, value) => UpdateStField(stID, fieldName, value, dispatch),\n    createAChoice: stID => dispatch(actionCreateChoice(stID))\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(Storylet)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Box from '@material-ui/core/Box';\r\nimport Storylet from '../../common/storylet/Storylet'\r\n\r\nconst CreateTaleBody = props => {\r\n    return (\r\n        <Box py={3}>\r\n            {\r\n                props.storyboard && props.storyboard.map( (sbItem, sbI) => {\r\n                    let st = props.storylets[sbItem.stID]\r\n                    return (\r\n                        <Storylet st={st} key={sbItem.stID} sbI={sbI} sbItem={sbItem} />\r\n                    )\r\n                })\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    storyboard: state.wipTale.storyboard,\r\n    storylets: state.wipTale.storylets\r\n})\r\n\r\nexport default connect(mapStateToProps)(CreateTaleBody)","import React from 'react'\r\nimport SimpleModal from '../../common/modal/SimpleModal'\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst ExportTaleModal = props => {\r\n    const {isOpen, handleClose, expTaleContent} = props\r\n    const textFieldRef = React.createRef()\r\n\r\n    const clickToCopy = textRef => {\r\n        console.log(textRef)\r\n        const t = textRef.current.getElementsByTagName('input').item(0)\r\n        /* Select the text field */\r\n        t.select()\r\n        t.setSelectionRange(0, 999999999) /*For mobile devices*/\r\n    \r\n        /* Copy the text inside the text field */\r\n        document.execCommand(\"copy\")\r\n    \r\n        /* Alert the copied text */\r\n        setTimeout(()=>{\r\n            alert(\"Text copied to clipboard ...\")\r\n        }, 0)\r\n    }\r\n\r\n    return (\r\n        <SimpleModal \r\n            isOpen={isOpen} \r\n            handleClose = {handleClose}\r\n            title=\"Export Reactale\"\r\n        >\r\n        <Typography variant=\"body1\" gutterBottom>\r\n            Copy this text and paste it in a text file in case file download is not working (e.g. in mobile browsers)\r\n        </Typography>\r\n\r\n        <Box my={3}>\r\n            <TextField \r\n                label=\"Outlined\" \r\n                variant=\"outlined\" \r\n                value={expTaleContent}\r\n                fullWidth\r\n                ref={textFieldRef}\r\n            />\r\n        </Box>\r\n        <Button variant=\"outlined\" color=\"primary\" onClick={() => clickToCopy(textFieldRef)}>\r\n            Copy Reactale Text\r\n        </Button>\r\n        </SimpleModal>\r\n    )\r\n}\r\n\r\nexport default ExportTaleModal","import React, { useState } from 'react'\r\n// import Container from '@material-ui/core/Container'\r\nimport Box from '@material-ui/core/Box'\r\n// import Grid from '@material-ui/core/Grid'\r\n// import Paper from '@material-ui/core/Paper'\r\n// import Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport { connect } from 'react-redux'\r\nimport ExportTaleModal from './ExportTaleModal'\r\n\r\nfunction download (filename, text) {\r\n    var element = document.createElement('a');\r\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\r\n    element.setAttribute('download', filename);\r\n\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n}\r\n\r\nconst CreateTaleFinish = props => {\r\n    const { wipTale } = props\r\n    const [isExpTaleModalVisible, setExpTModalVis] = useState(false)\r\n    const [expTale, setExpTale] = useState('')\r\n    const getWIPTale = () => {\r\n        const { storyboard, ...tale } = wipTale\r\n        return tale\r\n    }\r\n\r\n    const exportWIPTale = () => {\r\n        const tale = getWIPTale()\r\n        console.log(tale)\r\n        const content = btoa(encodeURIComponent((JSON.stringify(tale))))\r\n        download(`${tale.info.name}_${tale.id}.txt`, content)\r\n        setExpTale(content)\r\n        setExpTModalVis(true)\r\n    }\r\n\r\n    const saveTaleLocal = () => {\r\n        const tale = getWIPTale()\r\n        const allReactales = JSON.parse(window.localStorage.getItem(\"allReactales\")) || {}\r\n        allReactales[tale.id] = tale\r\n        window.localStorage.setItem(\"allReactales\", JSON.stringify(allReactales))\r\n        alert(\"Saved succesfully. \" + localStorageSpace())\r\n    }\r\n\r\n    const localStorageSpace = () => {\r\n        var allStrings = '';\r\n        for (var key in window.localStorage) {\r\n            if (window.localStorage.hasOwnProperty(key)) {\r\n                allStrings += window.localStorage[key];\r\n            }\r\n        }\r\n        return allStrings ? 3 + ((allStrings.length * 16) / (8 * 1024)) + ' KB' : 'Empty (0 KB)';\r\n    };\r\n\r\n    return (\r\n        <Box py={1}>\r\n            <ExportTaleModal \r\n                isOpen = {isExpTaleModalVisible}\r\n                handleClose = {() => setExpTModalVis(false)}\r\n                expTaleContent = {expTale}\r\n            />\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className=\"margin-right-15 margin-top-15\"\r\n                onClick={exportWIPTale}\r\n            >\r\n                Export this Reactale\r\n            </Button>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className=\"margin-top-15\"\r\n                onClick={saveTaleLocal}\r\n            >\r\n                Save in local\r\n            </Button>\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    wipTale: state.wipTale\r\n})\r\n\r\nexport default connect(mapStateToProps)(CreateTaleFinish)","import React, { useState, useEffect, useCallback } from 'react'\r\n// import { makeStyles } from '@material-ui/core/styles'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Box from '@material-ui/core/Box'\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport AccountTreeIcon from '@material-ui/icons/AccountTree'\r\nimport ImportTaleModal from './ImportTaleModal'\r\nimport CreateTaleIntro from './CreateTaleIntro'\r\nimport CreateTaleBody from './CreateTaleBody'\r\nimport CreateTaleFinish from './CreateTaleFinish'\r\nimport { startsWith } from '../../../utils/util'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    actionCreateNewTale,\r\n    actionSaveTaleAndReset,\r\n    actionSetTaleAsWIP\r\n} from '../../../redux/actionCreators/createTaleActions'\r\n\r\nconst CreateTale = props => {\r\n    const [visibleTabIndex, setVisibleTab] = useState(0)\r\n    const [pageTitle, setPageTitle] = useState(\"Create\")\r\n    const [isImportModalOpen, setIsImportModalOpen] = useState(false)\r\n    const { id, createNewTale, saveAndResetAll, match, setTaleAsWIP } = props\r\n    \r\n    const handleTabSwitch = (event, newValue) => {\r\n        setVisibleTab(newValue)\r\n    }\r\n\r\n    const goTo = url => props.history.push(url)\r\n\r\n    const setReactaleForEditing = useCallback(() => {\r\n        let storyID = match.params.id\r\n        console.log(storyID)\r\n\r\n        // If it is a local story\r\n        // Then the ID should start with \"local\"\r\n        if (storyID.indexOf(\"local\") >= 0) {\r\n            storyID = storyID.trim().replace(\"local-\", \"\")\r\n            const allReactales = JSON.parse(window.localStorage.getItem(\"allReactales\")) || {}\r\n            const theTale = allReactales[storyID]\r\n            setTaleAsWIP(theTale)\r\n        }\r\n    }, [match, setTaleAsWIP])\r\n\r\n    const setImportedTaleForEditing = tale => {\r\n        setTaleAsWIP(tale)\r\n        setIsImportModalOpen(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        // if already an ID is present,\r\n        // then already a story is in progress of create / edit\r\n        if (match.url === '/create-tale' && !id) {\r\n            createNewTale()\r\n        }\r\n        // edting current in progress tale\r\n        // coming back from FLowTale\r\n        else if(startsWith(match.url, '/edit-tale/current')) {\r\n            // Do nothing\r\n            console.log('back from TalesFlow')\r\n        }\r\n        // else Edit Reactale\r\n        else if (startsWith(match.url, '/edit-tale/')) {\r\n            setPageTitle(\"Edit\")\r\n            setReactaleForEditing()\r\n        }\r\n        // Already something in progress\r\n        // Do nothing\r\n        else {\r\n            console.log('Forbidden case inside create-edit... else case...')\r\n        }\r\n\r\n        return (() => {\r\n            console.log(\"Leaving Story Create Page... Now is a good time to save changes so far...\")\r\n            //saveAndResetAll()\r\n        })\r\n    }, [id, createNewTale, saveAndResetAll, match, setReactaleForEditing])\r\n\r\n    return (\r\n        <Box p={2}>\r\n            \r\n            <Typography variant=\"h4\" component=\"h1\">\r\n                {pageTitle} Reactale\r\n            </Typography>\r\n            \r\n            <Box mt={2} mb={4} className=\"flex-space-between\">\r\n                <Typography variant=\"subtitle1\">\r\n                    {pageTitle} a Reactale or import one to edit it.\r\n                </Typography>\r\n                \r\n                <Box>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        className=\"margin-right-15 margin-top-15\"\r\n                        onClick={() => setIsImportModalOpen(true)}\r\n                    >\r\n                        Import Reactale\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        className=\"margin-top-15\"\r\n                        startIcon={<span className=\"talesflowicon\"><AccountTreeIcon /></span>}\r\n                        onClick={() => goTo('/tales-flow')}\r\n                    >\r\n                        TalesFlow\r\n                    </Button>\r\n                </Box>\r\n                \r\n            </Box>\r\n\r\n            <Paper square>\r\n                <Tabs\r\n                    value={visibleTabIndex}\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    onChange={handleTabSwitch}\r\n                    centered\r\n                    aria-label=\"tabs to create the story\"\r\n                >\r\n                    <Tab label=\"Intro\" />\r\n                    <Tab label=\"Body\" />\r\n                    <Tab label=\"Finish\" />\r\n                </Tabs>\r\n            </Paper>\r\n            \r\n            <Box className={visibleTabIndex !== 0 ? 'hide' : ''}>\r\n                <CreateTaleIntro />\r\n            </Box>\r\n\r\n            <Box className={visibleTabIndex !== 1 ? 'hide' : ''}>\r\n                <CreateTaleBody />\r\n            </Box>\r\n\r\n            <Box className={visibleTabIndex !== 2 ? 'hide' : ''}>\r\n                <CreateTaleFinish />\r\n            </Box>\r\n\r\n            {/* Import Tale Modal */}\r\n            <ImportTaleModal \r\n                isOpen={isImportModalOpen} \r\n                handleClose = {() => setIsImportModalOpen(false)}\r\n                setForEditing = {setImportedTaleForEditing}\r\n            />\r\n        </Box>\r\n    )\r\n}\r\nconst mapStateToProps = state => ({\r\n    id: state.wipTale.id\r\n})\r\nconst mapDispatchToProps = dispatch => ({\r\n    createNewTale: () => dispatch(actionCreateNewTale()),\r\n    saveAndResetAll: () => dispatch(actionSaveTaleAndReset()),\r\n    setTaleAsWIP: (tale) => dispatch(actionSetTaleAsWIP(tale))\r\n})\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateTale)","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Box from '@material-ui/core/Box'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\r\nimport ZoomOutMapIcon from '@material-ui/icons/ZoomOutMap'\r\nimport AddBoxIcon from '@material-ui/icons/AddBox'\r\nimport GamepadIcon from '@material-ui/icons/Gamepad'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\nimport TouchAppIcon from '@material-ui/icons/TouchApp'\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport OpenWithIcon from '@material-ui/icons/OpenWith';\r\nimport { red } from '@material-ui/core/colors'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMagic, faMousePointer, faPencilAlt } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    panel: {\r\n        width: 40,\r\n        backgroundImage: `linear-gradient(${theme.palette.primary.main}, ${theme.palette.primary.dark})`,\r\n        position: 'absolute',\r\n        left: 0,\r\n        top: 50,\r\n        height: \"calc(100vh - 60px)\",\r\n        overflow: \"auto\"\r\n    },\r\n    btnPane: {\r\n        color: '#fff',\r\n        padding: `${theme.spacing(2)}px 0`,\r\n        '& li': {\r\n            height: 44,\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center'\r\n        },\r\n        '& li+li': {\r\n            borderTop: '1px solid #fff'\r\n        },\r\n        '& li:active': {\r\n            backgroundColor: red.A400\r\n        },\r\n        '& li svg': {\r\n            fontSize: 27\r\n        }\r\n    },\r\n    fa: {\r\n        fontSize: '24px !important'\r\n    },\r\n    autoMagic: {\r\n        transform: 'rotate(-90deg)'\r\n    },\r\n    toggleJStick: {\r\n        // transform: 'rotate(45deg)',\r\n        // fontSize: '26px !important' \r\n    }\r\n}))\r\n\r\nconst ControlPanel = props => {\r\n    const classes = useStyles()\r\n    const { history, deleteComponent, paintFlowboard, toggleJStick } = props\r\n    const backToEdit = () => history.push('/edit-tale/current')\r\n    return (\r\n        <Box className={classes.panel}>\r\n            <ul className={classes.btnPane}>\r\n                <li title=\"Back to Editor\" onClick={backToEdit}><ArrowBackIcon /></li>\r\n                <li title=\"Add component\"><AddBoxIcon /></li>\r\n                <li title=\"Select component\"><FontAwesomeIcon icon={faMousePointer} className={classes.fa} /></li>\r\n                <li title=\"Edit component\"><FontAwesomeIcon icon={faPencilAlt} className={classes.fa} /></li>\r\n                <li title=\"Save all\"><SaveIcon /></li>\r\n                <li title=\"Toggle joystick\" onClick={toggleJStick}><OpenWithIcon className={classes.toggleJStick} /></li>\r\n                {/* <li title=\"Auto format\" onClick={paintFlowboard}><GavelIcon /></li> */}\r\n                <li title=\"Auto format\" onClick={paintFlowboard}><FontAwesomeIcon icon={faMagic} className={clsx(classes.fa, classes.autoMagic)} /></li>\r\n                <li title=\"Increase draw area\"><ZoomOutMapIcon /></li>\r\n                <li title=\"Delete selected\" onClick={deleteComponent}><DeleteIcon /></li>\r\n            </ul>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ControlPanel","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Left from '@material-ui/icons/KeyboardArrowLeft'\r\nimport Right from '@material-ui/icons/KeyboardArrowRight'\r\nimport Up from '@material-ui/icons/KeyboardArrowUp'\r\nimport Down from '@material-ui/icons/KeyboardArrowDown'\r\nimport { red } from '@material-ui/core/colors'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    container: {\r\n        position: \"absolute\"\r\n    },\r\n    btn: {\r\n        position: \"absolute\",\r\n        fontSize: 30,\r\n        backgroundColor: red[100],\r\n        borderRadius: 6,\r\n        '&:active': {\r\n            backgroundColor: red[300]\r\n        }\r\n    },\r\n    left: {\r\n        left: 0,\r\n        top: 0\r\n    },\r\n    right: {\r\n        left: 60,\r\n        top: 0\r\n    },\r\n    up: {\r\n        left: 30,\r\n        top: -30\r\n    },\r\n    down: {\r\n        left: 30,\r\n        top: 30\r\n    }\r\n}))\r\n\r\nconst JoyStick = props => {\r\n    const classes = useStyles()\r\n    const { moveLeft, moveRight, moveUp, moveDown } = props\r\n    return (\r\n        <div className={classes.container}>\r\n            <Left className={clsx(classes.btn, classes.left)} onClick={moveLeft} />\r\n            <Right className={clsx(classes.btn, classes.right)} onClick={moveRight} />\r\n            <Up className={clsx(classes.btn, classes.up)} onClick={moveUp} />\r\n            <Down className={clsx(classes.btn, classes.down)} onClick={moveDown} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default JoyStick","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { \r\n    FLOW_ST_WIDTH, \r\n    FLOW_ST_HEIGHT,\r\n    FLOW_KNOW_RAD,\r\n    FLOW_KNOT_IN_X,\r\n    FLOW_KNOT_IN_Y,\r\n    FLOW_KNOT_OUT_X,\r\n    FLOW_KNOT_OUT_Y\r\n} from '../../../utils/constants'\r\nimport { red } from '@material-ui/core/colors'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    cg: {\r\n        transform: \"translate(100px, 100px)\"\r\n    },\r\n    knot: {\r\n        fill: red[500],\r\n        strokeWidth: 1,\r\n        stroke: red[500]\r\n    },\r\n    selectedKnot: {\r\n        // fill: '#000',\r\n        strokeWidth: 3,\r\n        stroke: '#000'\r\n    },\r\n    selectedEl: {\r\n        stroke: '#00f'\r\n    },\r\n    rect: {\r\n        fill: \"#fff\",\r\n        strokeWidth: 1,\r\n        stroke: theme.palette.primary.main\r\n    },\r\n    selectedST: {\r\n        '& rect': {\r\n            fill: red[500],\r\n            stroke: red[500]\r\n        },\r\n        '& text': {\r\n            fill: '#fff'\r\n        }\r\n    },\r\n    title: {\r\n        fontSize: 14\r\n    },\r\n    stid: {\r\n        fontSize: 14,\r\n        fill: \"#000\"\r\n    }\r\n}))\r\n\r\nconst FlowST = props => {\r\n    const classes = useStyles()\r\n    const { stid, title, transformStyle, start, selectedObj, handleSelection, handleMouseDown, handleMouseUp, handleMouseMove } = props\r\n    const markSelected = (e, type) => {\r\n        e.stopPropagation()\r\n        handleSelection(stid, type)\r\n    }\r\n    return (\r\n        <g \r\n            id={stid} \r\n            className={classes.cg} \r\n            style={transformStyle}\r\n            onMouseDown={e => handleMouseDown(e, stid)}\r\n            onMouseUp={e => handleMouseUp(e)}\r\n            onMouseMove={e => handleMouseMove(e)}\r\n        >\r\n\r\n            {(stid === start) && <text x=\"55\" y=\"-3\" fill=\"blue\">START</text>}\r\n            \r\n            {(stid !== start) \r\n                && \r\n                <circle \r\n                    className={clsx(classes.knot, ((selectedObj.id===stid && 'IN'===selectedObj.type) && classes.selectedKnot))} \r\n                    cx={FLOW_KNOT_IN_X} \r\n                    cy={FLOW_KNOT_IN_Y} \r\n                    r={FLOW_KNOW_RAD}\r\n                    onClick={e => markSelected(e, 'IN')}\r\n                >\r\n                </circle>}\r\n            \r\n            <circle \r\n                className={clsx(classes.knot, ((selectedObj.id===stid && 'OUT'===selectedObj.type) && classes.selectedKnot))} \r\n                cx={FLOW_KNOT_OUT_X} \r\n                cy={FLOW_KNOT_OUT_Y} \r\n                r={FLOW_KNOW_RAD}\r\n                onClick={e => markSelected(e, 'OUT')}\r\n            >\r\n            </circle>\r\n            \r\n            <g className={clsx((selectedObj.id===stid && 'ST'===selectedObj.type) && classes.selectedST)} onClick={e => markSelected(e, 'ST')}>\r\n                <rect \r\n                    className={classes.rect}\r\n                    width={FLOW_ST_WIDTH} \r\n                    height={FLOW_ST_HEIGHT}>\r\n                </rect>\r\n\r\n                <text x=\"5\" y=\"15\" className={classes.title}>{title.substr(0, 20) || 'Click Edit to add text'}</text>\r\n                <text x=\"5\" y=\"30\" className={classes.title}>{title.substr(20, 20)}</text>\r\n                {/* <text x=\"5\" y=\"32\" class=\"title el\">{st.title.substr(44, 22)}</text> */}\r\n\r\n                <text x=\"5\" y=\"45\" className={classes.stid}>{stid}</text>\r\n            </g>\r\n        </g>\r\n    )\r\n}\r\n\r\nexport default FlowST","export const FLOW_ST_WIDTH = 150\r\nexport const FLOW_ST_HEIGHT = 50\r\nexport const FLOW_KNOW_RAD = 6\r\nexport const FLOW_KNOT_IN_X = FLOW_ST_WIDTH / 2\r\nexport const FLOW_KNOT_IN_Y = -(FLOW_KNOW_RAD/2)\r\nexport const FLOW_KNOT_OUT_X = FLOW_ST_WIDTH / 2\r\nexport const FLOW_KNOT_OUT_Y = FLOW_ST_HEIGHT + (FLOW_KNOW_RAD/2)\r\nexport const FLOW_WIRE_SHIFT_X = FLOW_ST_WIDTH / 2\r\nexport const FLOW_WIRE_SHIFT_FROM_Y = FLOW_ST_HEIGHT + (FLOW_KNOW_RAD/2)\r\nexport const FLOW_WIRE_SHIFT_TO_Y = -(FLOW_KNOW_RAD/2)\r\nexport const FLOW_H_GAP = 50    // Gap between 2 ST\r\nexport const FLOW_V_GAP = 80    // Gap between 2 ST\r\nexport const FLOW_H_SHIFT = 20  // to move the entire setup by a constant amount without breaking anything\r\nexport const FLOW_V_SHIFT = 30  // to move the entire setup by a constant amount without breaking anything\r\nexport const FLOW_SPEED = 10\r\n\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { red } from '@material-ui/core/colors'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    connector: {\r\n        strokeWidth: 4,\r\n        stroke: red[200]\r\n    },\r\n    cid: {\r\n        fontSize: 16,\r\n        fontWeight: 'bold',\r\n        fill: red[500]\r\n    },\r\n    selectedConnector: {\r\n        '& line': {\r\n            stroke: red[900]\r\n        },\r\n        '& text': {\r\n            fill: '#000'\r\n        }\r\n    }\r\n}))\r\n\r\nconst FlowConnector = props => {\r\n    const classes = useStyles()\r\n    const { c, selectedObj, handleSelection } = props\r\n    const markSelected = e => {\r\n        e.stopPropagation()\r\n        handleSelection(c.cid, 'ch')\r\n    }\r\n    return (\r\n        <g \r\n            className={clsx((c.cid === selectedObj.id && 'ch' === selectedObj.type) && classes.selectedConnector)}\r\n            onClick={markSelected}\r\n        >\r\n            \r\n            <line \r\n            id={c.id}\r\n            x1={c.x1} y1={c.y1} \r\n            x2={c.x2} y2={c.y2}\r\n            className={classes.connector}>\r\n            </line>\r\n\r\n            <text className={classes.cid} \r\n            x={(c.x1 + c.x2) / 2} \r\n            y={(c.y1 + c.y2) / 2}>\r\n                {c.cid}\r\n            </text>\r\n        </g>\r\n    )\r\n}\r\n\r\nexport default FlowConnector","import React, { useState, useEffect } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Box from '@material-ui/core/Box'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Button from '@material-ui/core/Button'\r\nimport SimpleModal from '../../common/modal/SimpleModal'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    modelST: {\r\n        height: 70,\r\n        border: `2px solid ${theme.palette.primary.main}`,\r\n        padding: theme.spacing(1),\r\n        textAlign: \"center\",\r\n        fontSize: 14,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        borderRadius: 4\r\n    },\r\n    modelCon: {\r\n        height: 50,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n        '& .con': {\r\n            height: 1,\r\n            borderTop: `2px dashed ${theme.palette.primary.main}`\r\n        }\r\n    },\r\n    btnPanel: {\r\n        display: 'flex',\r\n        marginTop: theme.spacing(2),\r\n        '& button': {\r\n            flex: 1\r\n        },\r\n        '& button+button': {\r\n            marginLeft: theme.spacing(2)\r\n        }\r\n    }\r\n}))\r\n\r\nexport const ModalEditChoice = props => {\r\n    const classes = useStyles()\r\n    const { fromStID, toStID, type, text, handleSave, handleClose } = props\r\n    // console.log(props)\r\n    const [txt, setTxt] = useState('')\r\n    useEffect(() => setTxt(text), [text])\r\n    const title = type + \" a Choice\"\r\n    return (\r\n        <SimpleModal\r\n            {...props}\r\n            title={title}\r\n        >\r\n            <Box mb={3} mt={1}>\r\n                <Grid container>\r\n                    <Grid item xs>\r\n                        <div className={classes.modelST}>Storylet {fromStID}</div>\r\n                    </Grid>\r\n                    <Grid item xs className={classes.modelCon}>\r\n                        <span>to</span>\r\n                        <div className=\"con\"></div>\r\n                    </Grid>\r\n                    <Grid item xs>\r\n                        <div className={classes.modelST}>Storylet {toStID}</div>\r\n                    </Grid>\r\n                </Grid>\r\n            </Box>\r\n            {/* <Box mt={1} mb={2}>\r\n                {t} (connector) from storylet {fromStID} to storylet {toStID}\r\n            </Box> */}\r\n            <TextField label=\"Choice Text\" \r\n                value={txt} onChange={e => setTxt(e.target.value)}\r\n                variant=\"outlined\" fullWidth \r\n            />\r\n\r\n            <Box className={classes.btnPanel}>\r\n                <Button variant=\"outlined\" color=\"primary\" \r\n                    onClick={handleClose}\r\n                >\r\n                    Cancel\r\n                </Button>\r\n\r\n                <Button variant=\"contained\" color=\"primary\" \r\n                    onClick={() => handleSave(fromStID, toStID, txt, type)}\r\n                >\r\n                    Done\r\n                </Button>\r\n            </Box>\r\n\r\n        </SimpleModal>\r\n    )\r\n}\r\n\r\nexport default ModalEditChoice","import {\r\n    FLOW_ST_WIDTH,\r\n    FLOW_ST_HEIGHT,\r\n    FLOW_WIRE_SHIFT_X,\r\n    FLOW_WIRE_SHIFT_FROM_Y,\r\n    FLOW_WIRE_SHIFT_TO_Y,\r\n    FLOW_H_GAP,\r\n    FLOW_V_GAP,\r\n    FLOW_H_SHIFT,\r\n    FLOW_V_SHIFT\r\n} from '../../../utils/constants'\r\n\r\nexport {\r\n    createFlowboard, \r\n    getTransformStyle,\r\n    createFlowConnectors\r\n}\r\n\r\nfunction createFlowboard (storylets, choices) {\r\n    let levelsSTMap = createLevelSTMap(storylets, choices)\r\n    let stxy = setStoryletXY(levelsSTMap, true)\r\n\r\n    return stxy\r\n}   \r\n\r\n/**\r\n * Create a Level Map, to help paint Storylet Boxes on screen\r\n * {\r\n *      1: [stID1, stID9],\r\n *      2: [stID3, stID5, stID7, stID11]\r\n *      3: [stID23, stID77, stID89, stID99, stID100]\r\n * }\r\n */\r\nfunction createLevelSTMap (storylets, choices) {\r\n    let levelsSTMap = {}\r\n\r\n    // get the Entry Storylets\r\n    // This entry-storylets each will start a new tree\r\n    // and then following next of each one we can draw their trees\r\n    let allStIDs = Object.keys(storylets)\r\n    let entryStIDs = getEntryStIDs(allStIDs, choices)\r\n\r\n    // Let's declare a helper function to put Storylets into Levels, recurssively\r\n    const putStIntoLevels = (st, level) => {\r\n        levelsSTMap[level] = levelsSTMap[level] || []\r\n        levelsSTMap[level].push(st.id)\r\n\r\n        for (let cid of st.choices) {\r\n            let c = choices[cid]\r\n            putStIntoLevels(storylets[c.next], level + 1)\r\n        }\r\n    }\r\n\r\n    // Now go thru each entry points and seek out their tree\r\n    // and put them in levelMaps\r\n    for (let id of entryStIDs) {\r\n        //Increase level by 1\r\n        let currentLevel = Object.keys(levelsSTMap).length + 1\r\n\r\n        putStIntoLevels(storylets[id], currentLevel)\r\n    }\r\n\r\n    // Now there can be cases where 2 different levels are containing same IDs\r\n    // In these case we will keep them only in the highest level\r\n    let alreadyFoundStIDs = []\r\n    let levelsDecending = Object.keys(levelsSTMap).sort().reverse()\r\n\r\n    for (let l of levelsDecending) {\r\n        //cleanup duplicate in each level\r\n        levelsSTMap[l] = Array.from(new Set(levelsSTMap[l]))\r\n\r\n        // go thru each stIDs of this level\r\n        // if it was already found in higher levels, delete it from this level\r\n        // else mark it as found\r\n        for (let stID of levelsSTMap[l]) {\r\n            if (alreadyFoundStIDs.indexOf(stID) > -1) {\r\n                levelsSTMap[l].splice(levelsSTMap[l].indexOf(stID), 1)\r\n            }\r\n            else {\r\n                alreadyFoundStIDs.push(stID)\r\n            }\r\n        }\r\n    }\r\n\r\n    return levelsSTMap\r\n}\r\n\r\n// Storylets are Not pointed by any choice\r\n// returns array of STIDs\r\nfunction getEntryStIDs(allStIDs, choices) {\r\n    let entryStIDs = [...allStIDs]\r\n    // now loop thru all the choices\r\n    // remove the choice.next IDs from allStIDs\r\n    // the rests are EntrySTID\r\n    for (let i in choices) {\r\n        let idx = entryStIDs.indexOf(choices[i].next)\r\n        if (idx > -1) {\r\n            entryStIDs.splice(idx, 1)\r\n        }\r\n    }\r\n\r\n    return entryStIDs\r\n}\r\n\r\n/*\r\n* Set X, Y for the storylets VERSION 2\r\n* This v2 function will try position them better\r\n* with proper middle alignments for the row which have lesser number of rectangles\r\n*/\r\nfunction setStoryletXY (levelsSTMap, isAutoFormatting) {\r\n    //go level by level\r\n    let level = 0\r\n    const stWidth = FLOW_ST_WIDTH\r\n    const stHeight = FLOW_ST_HEIGHT\r\n    const horizontalGap = FLOW_H_GAP\r\n    const verticalGap = FLOW_V_GAP\r\n    const verticalShift = FLOW_V_SHIFT\r\n    const horizontalShift = FLOW_H_SHIFT\r\n    const stxy = {}              // { id1: {x1,y1}, id2: {x2,y2} }\r\n\r\n    let maxRecInALevel = Object.values(levelsSTMap).reduce(\r\n        (maxLength, l) => maxLength > l.length ? maxLength : l.length\r\n    , 0)\r\n\r\n    //first we need to find the longest possible row\r\n    // for (let i in levelsSTMap) {\r\n    //     maxRecInALevel = (levelsSTMap[i].length > maxRecInALevel) ? levelsSTMap[i].length : maxRecInALevel\r\n    // }\r\n\r\n    const longestRowWidth = (maxRecInALevel * stWidth) + (horizontalGap * (maxRecInALevel - 1));\r\n\r\n    while (true) {\r\n        ++level\r\n        //since there cannot be a jump in level\r\n        //if any number is missing, that means there are\r\n        //no more higher levels\r\n        if (!levelsSTMap[level]) {\r\n            break;\r\n        }\r\n\r\n        let recsInThisLevel = levelsSTMap[level].length;\r\n\r\n        // if less than max, then \r\n        // 1st rec of that row (or level) will have a spacing at its left\r\n        // And last rec will have a spacing at its right\r\n        // so total spacing will be recsInThisLevel+1\r\n        if (recsInThisLevel < maxRecInALevel) {\r\n            let hGap = (longestRowWidth - (recsInThisLevel * stWidth)) / (recsInThisLevel + 1);\r\n            for (let i = 0; i < levelsSTMap[level].length; i++) {\r\n                let stID = levelsSTMap[level][i]\r\n                stxy[stID] = { id: stID }\r\n\r\n                // if autoformatting, then override the x, y values set by user dragging\r\n                if (!isAutoFormatting && stxy[stID].x && stxy[stID].y) { continue; }\r\n                stxy[stID].x = (i * stWidth) + ((i + 1) * hGap) + horizontalShift\r\n                stxy[stID].y = (level - 1) * (stHeight + verticalGap) + verticalShift\r\n                //setTransformStyle(stID)\r\n            }\r\n        }\r\n        // else for the longest row, there will be no gap with on left of 1st or right of last\r\n        else {\r\n            for (let i = 0; i < levelsSTMap[level].length; i++) {\r\n                let stID = levelsSTMap[level][i]\r\n                stxy[stID] = { id: stID }\r\n\r\n                if (!isAutoFormatting && stxy[stID].x && stxy[stID].y) { continue; }\r\n                stxy[stID].x = (i * stWidth) + (i * horizontalGap) + horizontalShift;\r\n                stxy[stID].y = (level - 1) * (stHeight + verticalGap) + verticalShift;\r\n                //setTransformStyle(stID);\r\n            }\r\n        }\r\n    }\r\n\r\n    setTransformStyle(stxy)\r\n\r\n    //this.flowboard = objToArray(this.stObj);\r\n    // console.log(\"this.storylets = \");\r\n    // console.log(this.storylets);\r\n    \r\n    //this.recreateConnectorsObj();\r\n    return stxy\r\n}\r\n\r\n// provided it has x,y\r\n// this function sets the transformStyle\r\nfunction setTransformStyle(stxy) {\r\n    for (let i in stxy) {\r\n        stxy[i].transformStyle =  getTransformStyle(stxy[i])\r\n    }\r\n}\r\n\r\n// fbi = Flowboard Item\r\nfunction getTransformStyle (fbi) {\r\n    return { transform: \"matrix(1, 0, 0, 1, \" + fbi.x + \", \" + fbi.y + \")\" }\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} storylets \r\n * @param {*} choices \r\n * @param {*} fb => flowboard, a json onject containing stID, x,y, transformStyle\r\n */\r\nfunction createFlowConnectors (storylets, choices, fb) {\r\n    const connectorsObj = {}\r\n    const wireShiftFTX = FLOW_WIRE_SHIFT_X\r\n\tconst wireShiftFY = FLOW_WIRE_SHIFT_FROM_Y\r\n    const wireShiftTY = FLOW_WIRE_SHIFT_TO_Y\r\n\r\n    for(let i in storylets) {\r\n        let st = storylets[i]\r\n        for(let cID of st.choices) {\r\n            let ch = choices[cID]\r\n\r\n            let fromX = fb[st.id].x + wireShiftFTX\r\n            let fromY = fb[st.id].y + wireShiftFY\r\n            let toX = fb[ch.next].x + wireShiftFTX\r\n            let toY = fb[ch.next].y + wireShiftTY\r\n\r\n            let ftid = st.id + '---' + ch.next\r\n\r\n            connectorsObj[ftid] = {\r\n                id: ftid,\r\n                cid: cID,\r\n                x1: fromX,\r\n                y1: fromY,\r\n                x2: toX,\r\n                y2: toY\r\n            }\r\n        }\r\n    }\r\n\r\n    return connectorsObj\r\n}","import React, { useState, useEffect, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Box from '@material-ui/core/Box'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport { startsWith } from '../../../utils/util'\r\nimport ControlPanel from './controlPanel/ControlPanel'\r\nimport JoyStick from './controlPanel/JoyStick'\r\nimport FlowST from './FlowST'\r\nimport FlowConnector from './FlowConnector'\r\nimport ModalEditChoice from './ModalEditChoice'\r\nimport { createFlowboard, getTransformStyle, createFlowConnectors } from './flowMaker'\r\nimport {\r\n    actionCreateNewTale,\r\n    actionCreateChoice,\r\n    actionUpdateCText\r\n} from '../../../redux/actionCreators/createTaleActions'\r\nimport {\r\n    FLOW_WIRE_SHIFT_X,\r\n    FLOW_WIRE_SHIFT_FROM_Y,\r\n    FLOW_WIRE_SHIFT_TO_Y,\r\n    FLOW_SPEED\r\n} from '../../../utils/constants'\r\nimport {\r\n    STORYLET_DELETE,\r\n    CHOICE_DELETE\r\n} from '../../../redux/actionTypes'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    outerContainer: {\r\n        position: 'relative',\r\n        marginLeft: 45,\r\n        height: \"calc(100vh - 100px)\"\r\n    },\r\n    svgContainer: {\r\n        border: `7px double ${theme.palette.primary.main}`,\r\n        height: \"100%\",\r\n        overflow: \"auto\",\r\n        margin: theme.spacing(1),\r\n        borderRadius: theme.spacing(1)\r\n    },\r\n    mainSVG: {\r\n        height: 2000,\r\n        minWidth: \"100%\",\r\n        width: 2000,\r\n        \"-webkit-user-select\": \"none\",  /* Chrome all / Safari all */\r\n        \"-moz-user-select\": \"none\",     /* Firefox all */\r\n        \"-ms-user-select\": \"none\",      /* IE 10+ */\r\n        userSelect: \"none\",\r\n        borderRadius: 15,\r\n        \"& *\": {\r\n            \"-webkit-user-select\": \"none\",  /* Chrome all / Safari all */\r\n            \"-moz-user-select\": \"none\",     /* Firefox all */\r\n            \"-ms-user-select\": \"none\",      /* IE 10+ */\r\n            userSelect: \"none\"\r\n        }\r\n    },\r\n    joystick: {\r\n        position: \"absolute\",\r\n        bottom: 83,\r\n        left: 30\r\n    }\r\n}))\r\n\r\nconst TalesFlow = props => {\r\n    const classes = useStyles()\r\n    const { storylets, choices, start, history, createNewTale, deleteStorylet, deleteChoice, createNewChoice, updateChoiceText } = props\r\n    const [fb, setFb] = useState({})    // fb is flowboard object\r\n    const [fbC, setFbC] = useState({})  // fbC is flowboardConnectors object\r\n    const [isJStickVis, setJStickVis] = useState(false)\r\n    const [draggedStID, setDraggedStID] = useState('')\r\n    const [prevMPos, setPrevMPos] = useState({ x: 0, y: 0 })\r\n    const [selectedObj, setSelectedObj] = useState({id: '', type: ''})  // type will be \"ST\" or \"CH\" or \"IN\" or \"OUT\"\r\n    const [editChoiceData, setEditChoiceData] = useState({})\r\n\r\n    /**\r\n     * flowBoard: {\r\n     *      stID1: {\r\n     *                  id: stID1,\r\n     *                  x: value,\r\n     *                  y: value,\r\n     *                  transformStyle: someCSSTransformStyle\r\n     *             },\r\n     *      stID2: {\r\n     *                  id: stID2,\r\n     *                  x: value,\r\n     *                  y: value,\r\n     *                  transformStyle: someCSSTransformStyle\r\n     *              }\r\n     * }\r\n     */\r\n    const paintFlowboard = useCallback(() => {\r\n        let flowBoard = createFlowboard(storylets, choices)\r\n        let flowConnectors = createFlowConnectors(storylets, choices, flowBoard)\r\n        console.log(\"Inside paintFlowboard ............................. flowBoard = \", flowBoard)\r\n        setFb(flowBoard)\r\n        setFbC(flowConnectors)\r\n    }, [storylets, choices])\r\n\r\n    useEffect(() => {\r\n        //if a refresh is done on TalesFlow Page\r\n        // Then start creation process from here\r\n        if(!start) {\r\n            createNewTale()\r\n        }\r\n\r\n        paintFlowboard ()\r\n        \r\n    }, [createNewTale, start, paintFlowboard])\r\n\r\n    const handleSelection = (id, type) => {\r\n        // if prev selectedObj was 'out'\r\n        // and this is 'IN'\r\n        // Then create a choice (connection)\r\n        if (selectedObj.type === 'OUT' && type=== 'IN') {\r\n            let fromStID = selectedObj.id\r\n            let toStID = id\r\n            let ftid = fromStID + '---' + toStID\r\n\r\n            setEditChoiceData({\r\n                isOpen: true,\r\n                fromStID: fromStID,\r\n                toStID: toStID,\r\n                type: fbC[ftid] ? 'Edit' : 'Create',\r\n                text: fbC[ftid] ? choices[fbC[ftid].cid].text : ''\r\n            })\r\n            // if (fbC[ftid]) {\r\n            //     console.log('Connection already exists...')\r\n            // } else {\r\n            //     console.log(`Create connector from ${selectedObj.id} to ${id}`)\r\n            // }\r\n        }\r\n\r\n        // Now update the state\r\n        setSelectedObj({id, type})\r\n    }\r\n\r\n    const saveEditCreateChoice = (fromStID, toStID, text, type) => {\r\n        // is it create new\r\n        if (type === 'Create') {\r\n            createNewChoice(fromStID, toStID, text)\r\n        }\r\n        else if (type === 'Edit') {\r\n            let ftid = fromStID + '---' + toStID\r\n            let cID = fbC[ftid].cid\r\n            updateChoiceText(cID, text)\r\n        }\r\n        else {\r\n            console.log('Could not understand the type in saveEditCreateChoice')\r\n        }\r\n\r\n        setEditChoiceData({})\r\n    }\r\n\r\n    /**\r\n     * Whenever an ST is dragged/moved, we need to update the associated connectors\r\n     * @param {*} fbi => the updated flowboard item\r\n     */\r\n    const updateConnectors = fbi => {\r\n        let newFBC = {...fbC}\r\n        let wireShiftFTX = FLOW_WIRE_SHIFT_X\r\n        let wireShiftFY = FLOW_WIRE_SHIFT_FROM_Y\r\n        let wireShiftTY = FLOW_WIRE_SHIFT_TO_Y\r\n        // Go thru all the flowboard-Connectors\r\n        // to see with whom this stID is connected\r\n        for(let i in newFBC) {\r\n            let c = newFBC[i]\r\n            let ftidParts = c.id.split('---')   // id is basically ftid\r\n            let fromStID = ftidParts[0]\r\n            let toStID = ftidParts[1]\r\n\r\n            // if from id is this ST\r\n            if (fbi.id === fromStID) {\r\n                c = {...c}\r\n                c.x1 = fbi.x + wireShiftFTX\r\n                c.y1 = fbi.y + wireShiftFY\r\n\r\n                newFBC = {\r\n                    ...newFBC,\r\n                    [c.id]: c\r\n                }\r\n            }\r\n            // elseif to id is this ST\r\n            else if (fbi.id === toStID) {\r\n                c = {...c}\r\n                c.x2 = fbi.x + wireShiftFTX\r\n                c.y2 = fbi.y + wireShiftTY\r\n\r\n                newFBC = {\r\n                    ...newFBC,\r\n                    [c.id]: c\r\n                }\r\n            }\r\n        }\r\n\r\n        setFbC(newFBC)\r\n    }\r\n    \r\n    const markDraggedStID = (ev, stID) => {\r\n        ev.stopPropagation()\r\n        // console.log('setDraggedStID')\r\n        setDraggedStID(stID)\r\n        setPrevMPos({ x: ev.pageX,  y: ev.pageY })\r\n    }\r\n\r\n    const unmarkDraggedStID = ev => {\r\n        ev.stopPropagation()\r\n        // console.log('unsetDraggedStID')\r\n        setDraggedStID('')\r\n        setPrevMPos({ x: 0,  y: 0 })\r\n    }\r\n\r\n    const moveST = (stID, xDisplace, yDisplace) => {\r\n        if (!stID || !fb[stID]) return   // Important, don't remove\r\n        let prevElX = fb[stID].x\r\n        let prevElY = fb[stID].y\r\n        let newFBI = {\r\n            id: stID,\r\n            x: prevElX + xDisplace,\r\n            y: prevElY + yDisplace\r\n        }\r\n        newFBI.transformStyle = getTransformStyle(newFBI)\r\n        let newFB = {\r\n            ...fb,\r\n            [stID]: newFBI\r\n        }\r\n        setFb(newFB)\r\n\r\n        //ALSO NEED TO UPDATE THE CONNECTORS POSITION\r\n        updateConnectors(newFBI)\r\n    }\r\n\r\n    const moveDraggetST = _.throttle(ev => {\r\n        //ev.stopPropagation()\r\n        // console.log(\"moving 1\")\r\n        if (draggedStID) {\r\n            // console.log(\"moving 2\")\r\n            let mouseDiffX = ev.pageX - prevMPos.x\r\n            let mouseDiffY = ev.pageY - prevMPos.y\r\n            moveST(draggedStID, mouseDiffX, mouseDiffY)\r\n            setPrevMPos({ x: ev.pageX,  y: ev.pageY })\r\n        }\r\n    }, 1000)\r\n\r\n    const moveWithJStick = (xDisplace, yDisplace) => {\r\n        if (selectedObj.type === 'ST') {\r\n            moveST(selectedObj.id, xDisplace, yDisplace)\r\n        }\r\n    }\r\n\r\n    const moveLeft = () => moveWithJStick(-FLOW_SPEED, 0)\r\n    const moveRight = () => moveWithJStick(FLOW_SPEED, 0)\r\n    const moveUp = () => moveWithJStick(0, -FLOW_SPEED)\r\n    const moveDown = () => moveWithJStick(0, FLOW_SPEED)\r\n\r\n    const deleteComponent = () => {\r\n        if (!selectedObj.id || selectedObj.type==='IN' || selectedObj.type==='OUT') {\r\n            alert('Select a storylet or choice (connector) first. Then click on delete.')\r\n        }\r\n        else if(selectedObj.id === start) {\r\n            alert('Start storylet can not be deleted. Please edit it to your choice.')\r\n        }\r\n        else {\r\n            let comName = ''\r\n            if(startsWith(selectedObj.id, 'ST')) comName = 'STORYLET'\r\n            else if(startsWith(selectedObj.id, 'C')) comName = 'CHOICE'\r\n\r\n            let r = window.confirm(`Are you sure you want to delete ${comName} ${selectedObj.id}. Once deleted, it may not be recovered back.`)\r\n\r\n            if (r) {\r\n                if(comName === 'STORYLET') deleteStorylet(selectedObj.id)\r\n                else if (comName === 'CHOICE') deleteChoice(selectedObj.id)\r\n            }\r\n        }\r\n    }\r\n\r\n    // If props have changed, but useEffect has not updated flowboard yet\r\n    // stop the rendering\r\n    if (\r\n            Object.keys(storylets).length !== Object.keys(fb).length\r\n            ||\r\n            Object.keys(choices).length !== Object.keys(fbC).length\r\n        ) {\r\n        return (\r\n            <Box>\r\n                {console.log('Stopping early rendering...')}\r\n                Updating ...\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    // Else return\r\n    return (\r\n        <Box>\r\n            {console.log('rendering return')}\r\n            <ControlPanel \r\n                history={history} \r\n                deleteComponent={deleteComponent} \r\n                paintFlowboard={paintFlowboard}\r\n                toggleJStick={() => setJStickVis(!isJStickVis)}\r\n            />\r\n\r\n            <div className={classes.outerContainer}>\r\n                <div className={classes.svgContainer} onClick={() => setSelectedObj({})}>\r\n                    <svg \r\n                        className={classes.mainSVG} \r\n                        onMouseUp={e => unmarkDraggedStID(e)}\r\n                    >\r\n                        {\r\n                            Object.values(fbC).map(c => \r\n                                <FlowConnector \r\n                                    c={c} key={c.id} \r\n                                    selectedObj={selectedObj}\r\n                                    handleSelection={handleSelection}\r\n                                />\r\n                            )\r\n                        }\r\n                        \r\n                        {\r\n                            //console.log(\"props.storylets\", storylets)\r\n                            Object.values(fb).map(fbi => {\r\n                                let st = storylets[fbi.id]\r\n                                return (<FlowST \r\n                                            stid={st.id} \r\n                                            title={st.title} \r\n                                            transformStyle={fbi.transformStyle}\r\n                                            start={start} \r\n                                            key={st.id}\r\n                                            selectedObj={selectedObj}\r\n                                            handleSelection={handleSelection}\r\n                                            handleMouseDown={markDraggedStID}\r\n                                            handleMouseUp={unmarkDraggedStID}\r\n                                            handleMouseMove={moveDraggetST}\r\n                                        />)\r\n                            })\r\n                        }\r\n                    </svg>\r\n                </div>\r\n\r\n                <div className={clsx(classes.joystick, !isJStickVis && 'hide')}>\r\n                    <JoyStick \r\n                        moveLeft={moveLeft}\r\n                        moveRight={moveRight}\r\n                        moveUp={moveUp}\r\n                        moveDown={moveDown}\r\n                    />\r\n                </div>\r\n            </div>\r\n        \r\n            <ModalEditChoice \r\n                isOpen={editChoiceData.isOpen} \r\n                {...editChoiceData}\r\n                handleClose={()=>setEditChoiceData({})}\r\n                handleSave={saveEditCreateChoice}\r\n            />\r\n        </Box>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    start: state.wipTale.start,\r\n    storylets: state.wipTale.storylets,\r\n    choices: state.wipTale.choices\r\n})\r\nconst mapDispatchToProps = dispatch => ({\r\n    createNewTale: () => dispatch(actionCreateNewTale()),\r\n    deleteStorylet: stID => dispatch({type: STORYLET_DELETE, payload: stID}),\r\n    deleteChoice: cID => dispatch({type: CHOICE_DELETE, payload: cID}),\r\n    createNewChoice: (fromStID, toStID, text) => dispatch(actionCreateChoice(fromStID, toStID, text)),\r\n    updateChoiceText: (cID, value) => dispatch(actionUpdateCText(cID, value))\r\n})\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TalesFlow)","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\n// import Collapse from '@material-ui/core/Collapse';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  card: {\r\n    maxWidth: 345,\r\n    margin: \"0 auto\"\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n  },\r\n}));\r\n\r\nconst ComplexCard = props => {\r\n  const classes = useStyles();\r\n  const {tale, expandable, handleEdit} = props\r\n  const [expanded, setExpanded] = React.useState(false);\r\n\r\n  const handleExpandClick = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n\r\n  return (\r\n    <Card className={classes.card}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\r\n            S\r\n          </Avatar>\r\n        }\r\n        action={\r\n          <IconButton aria-label=\"settings\">\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        }\r\n        title={tale.info.name}\r\n        subheader={tale.info.category}\r\n      />\r\n      <CardMedia\r\n        className={classes.media}\r\n        image=\"/static/img/bg/small/storytelling-4203628_640.jpg\"\r\n        title=\"Story Image\"\r\n      />\r\n      <CardContent>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          {tale.info.desc}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions disableSpacing>\r\n        <IconButton aria-label=\"add to favorites\">\r\n          <FavoriteIcon />\r\n        </IconButton>\r\n        <IconButton aria-label=\"share\">\r\n          <ShareIcon />\r\n        </IconButton>\r\n        <IconButton aria-label=\"edit\" onClick={() => handleEdit(tale.id)}>\r\n          <EditIcon />\r\n        </IconButton>\r\n        {expandable && \r\n            <IconButton\r\n                className={clsx(classes.expand, {\r\n                    [classes.expandOpen]: expanded,\r\n                })}\r\n                onClick={handleExpandClick}\r\n                aria-expanded={expanded}\r\n                aria-label=\"show more\"\r\n            >\r\n                <ExpandMoreIcon />\r\n            </IconButton>\r\n        }\r\n      </CardActions>\r\n      {/* <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n        <CardContent>\r\n          <Typography paragraph>Method:</Typography>\r\n          <Typography paragraph>\r\n            Heat 1/2 cup of the broth in a pot until simmering, add saffron and set aside for 10\r\n            minutes.\r\n          </Typography>\r\n          <Typography paragraph>\r\n            Heat oil in a (14- to 16-inch) paella pan or a large, deep skillet over medium-high\r\n            heat. Add chicken, shrimp and chorizo, and cook, stirring occasionally until lightly\r\n            browned, 6 to 8 minutes. Transfer shrimp to a large plate and set aside, leaving chicken\r\n            and chorizo in the pan. Add pimentón, bay leaves, garlic, tomatoes, onion, salt and\r\n            pepper, and cook, stirring often until thickened and fragrant, about 10 minutes. Add\r\n            saffron broth and remaining 4 1/2 cups chicken broth; bring to a boil.\r\n          </Typography>\r\n          <Typography paragraph>\r\n            Add rice and stir very gently to distribute. Top with artichokes and peppers, and cook\r\n            without stirring, until most of the liquid is absorbed, 15 to 18 minutes. Reduce heat to\r\n            medium-low, add reserved shrimp and mussels, tucking them down into the rice, and cook\r\n            again without stirring, until mussels have opened and rice is just tender, 5 to 7\r\n            minutes more. (Discard any mussels that don’t open.)\r\n          </Typography>\r\n          <Typography>\r\n            Set aside off of the heat to let rest for 10 minutes, and then serve.\r\n          </Typography>\r\n        </CardContent>\r\n      </Collapse> */}\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default ComplexCard\r\n","import React, { useState, useEffect } from 'react'\r\n// import { makeStyles } from '@material-ui/core/styles'\r\n// import Paper from '@material-ui/core/Paper'\r\nimport Box from '@material-ui/core/Box'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ComplexCard from '../../common/cards/ComplexCard'\r\n\r\n// const useStyles = makeStyles(theme => ({\r\n//     cardsContainer: {\r\n\r\n//     }\r\n// }))\r\n\r\nconst MyLocalTales = props => {\r\n    // const classes = useStyles()\r\n    const [localTales, setLocalTales] = useState([])\r\n\r\n    const localLocalTales = () => {\r\n        const allReactales = JSON.parse(window.localStorage.getItem(\"allReactales\")) || {}\r\n        setLocalTales(Object.values(allReactales))\r\n    }\r\n    \r\n    useEffect(() => {\r\n        localLocalTales()\r\n    }, [])\r\n\r\n    const goToEditTale = id => {\r\n        props.history.push(`/edit-tale/local-${id}`)\r\n    }\r\n\r\n    return (\r\n        <Box py={3}>\r\n            <Grid container spacing={2}>\r\n                {\r\n                    localTales.map (t => (\r\n                        <Grid item xs={12} sm={6} md={4} lg={3} xl={2} key={t.id}>\r\n                            <ComplexCard \r\n                                tale={t} \r\n                                expandable={false} \r\n                                handleEdit={goToEditTale} />\r\n                        </Grid>\r\n                    ))\r\n                }\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default MyLocalTales","import { Home, CreateTale, TalesFlow, MyTales } from '../components/pages'\r\n\r\nconst routes = [\r\n    {\r\n        path: \"/home\",\r\n        component: Home,\r\n        exact: true\r\n    },\r\n    {\r\n        path: \"/create-tale\",\r\n        component: CreateTale,\r\n        exact: true\r\n    },\r\n    {\r\n        path: \"/edit-tale/:id\",\r\n        component: CreateTale,\r\n        exact: true\r\n    },\r\n    {\r\n        path: \"/tales-flow\",\r\n        component: TalesFlow,\r\n        exact: true\r\n    },\r\n    {\r\n        path: \"/my-tales\",\r\n        component: MyTales,\r\n        exact: true\r\n    }\r\n]\r\n\r\nexport default routes","import React, { useState } from 'react'\r\n// import { makeStyles } from '@material-ui/core/styles'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Box from '@material-ui/core/Box'\r\n// import Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { connect } from 'react-redux'\r\nimport MyLocalTales from './MyLocalTales'\r\n// import {\r\n//     actionCreateNewTale,\r\n//     actionSaveTaleAndReset\r\n// } from '../../../redux/actionCreators/createTaleActions'\r\n\r\n\r\nconst MyTales = props => {\r\n    const [visibleTabIndex, setVisibleTab] = useState(0)\r\n    \r\n    const handleTabSwitch = (event, newValue) => {\r\n        setVisibleTab(newValue)\r\n    }\r\n\r\n    return (\r\n        <Box p={2}>\r\n            \r\n            <Typography variant=\"h4\" component=\"h1\">\r\n                My Tales\r\n            </Typography>\r\n            \r\n            <Box mt={2} mb={4} className=\"flex-space-between\">\r\n                <Typography variant=\"subtitle1\">\r\n                    Here you will find all the tales created by you\r\n                </Typography>\r\n            </Box>\r\n\r\n            <Paper square>\r\n                <Tabs\r\n                    value={visibleTabIndex}\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    onChange={handleTabSwitch}\r\n                    centered\r\n                    aria-label=\"tabs to create the story\"\r\n                >\r\n                    <Tab label=\"Local\" />\r\n                    <Tab label=\"Online\" />\r\n                </Tabs>\r\n            </Paper>\r\n            \r\n            <Box className={visibleTabIndex !== 0 ? 'hide' : ''}>\r\n                <MyLocalTales history={props.history}/>\r\n            </Box>\r\n\r\n            <Box className={visibleTabIndex !== 1 ? 'hide' : ''}>\r\n                \r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default connect()(MyTales)","import React from 'react'\nimport { ThemeProvider } from '@material-ui/core/styles'\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport store from './redux/configStore'\nimport theme from './utils/theme'\nimport './App.css';\nimport { Header, Sidebard, Footer } from './components/layout'\nimport routes from './utils/routes'\n\nconst App = () => {\n  return (\n    <ThemeProvider theme={theme}>\n      <Provider store={store}>\n        <Router>\n          <header>\n            <Header />\n          </header>\n          <nav>\n            <Sidebard />\n          </nav>\n          <div className=\"appbody\">\n            <Switch>\n              {\n                routes.map(r =>\n                  <Route {...r} key={r.path} />\n                )\n              }\n              <Route path=\"*\">\n                <Redirect to=\"/\" />\n              </Route>\n            </Switch>\n          </div>\n          <footer>\n            <Footer />\n          </footer>\n        </Router>\n      </Provider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logoContainer\":\"style_logoContainer__SjjSp\",\"logoImg\":\"style_logoImg__1Xgbm\"};","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}