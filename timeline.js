!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);let i,o,r=window.$;window.rto=window.rto||{};let c=[];function a(){let e="";for(let t=0;t<c.length;t++){e+=s(c[t],t)}i.html(e),function(e=c.length-1){let t=i.find(".storyboard-item").eq(e);r("html, body").animate({scrollTop:t.offset().top-100},500)}(),i.find(".choices .inner-container").each((function(){let e=r(this).find(".choice.selected");if(0===e.length)return;let t=e.eq(0).offset().left-41;console.log(t),r(this).scrollLeft(t)}))}function s(e,t){let n=o.storylets[e.stID],i=(r=n.choices,c=e.selectedCID,r.reduce((e,t,n)=>{let i=o.choices[t];return e+`\n            <div class="choice ${t===c?"selected":""}" data-cid="${i.id}">\n                <div class="c-i">Choice ${n+1}</div>\n                ${i.text}\n            </div>\n        `},""));var r,c;let a=function(e){return e.reduce((e,t,n)=>e+`\n            <span class="c-i-ball">${n+1}</span>\n        `,"")}(n.choices);return`\n        <div class="storyboard-item" data-sbindx="${t}">\n            <div class="storylet component-box">\n                <div class="joiner"></div>\n                <div class="name-label">Storylet</div>\n                <div>${n.text}</div>\n            </div>\n            <div class="choices component-box ${n.choices.length<=0?"hidden":""}">\n                <div class="joiner"></div>\n                <div class="name-label">Choices (${n.choices.length})</div>\n                <div class="balls">${a}</div>\n                <div class="inner-container">${i}</div>\n            </div>\n        </div>\n        `}rto.createTimeline=(e,t)=>{var n,s;i=r("#"+e),o=t,c=[(n=t.start,{stID:n,selectedCID:s})],i.addClass("reactive-timeline"),a(),i.off(),i.on("click",".choice",(function(){let e=r(this).attr("data-cid");!function(e,t,n){c=c.slice(0,t+1),c[t].selectedCID=n,c.push({stID:e}),a()}(o.choices[e].next,parseInt(r(this).closest(".storyboard-item").attr("data-sbindx")),e)})),i.on("click",".c-i-ball",(function(){let e=parseInt(r(this).text())-1,t=r(this).closest(".choices").find(".inner-container"),n=e*t.find(".choice ").width();t.animate({scrollLeft:n},500)}))}},function(e,t,n){var i=n(2),o=n(3);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1},c=(i(o,r),o.locals?o.locals:{});e.exports=c},function(e,t,n){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),c=[];function a(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],s=t.base?r[0]+t.base:r[0],l=n[s]||0,d="".concat(s," ").concat(l);n[s]=l+1;var u=a(d),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(c[u].references++,c[u].updater(f)):c.push({identifier:d,updater:b(f,t),references:1}),i.push(d)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var c=r(e.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function f(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var r=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(r,c[t]):e.appendChild(r)}}function p(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,h=0;function b(e,t){var n,i,o;if(t.singleton){var r=h++;n=v||(v=l(t)),i=f.bind(null,n,r,!1),o=f.bind(null,n,r,!0)}else n=l(t),i=p.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=a(n[i]);c[o].references--}for(var r=s(e,t),l=0;l<n.length;l++){var d=a(n[l]);0===c[d].references&&(c[d].updater(),c.splice(d,1))}n=r}}}},function(e,t,n){(t=n(4)(!1)).push([e.i,'.reactive-timeline .hidden{display:none !important}.reactive-timeline .component-box{border:5px double #ddd;padding:30px 15px 25px;border-radius:4px;margin-top:40px;position:relative}.reactive-timeline .joiner{position:absolute;top:-45px;left:50%;height:40px;width:.1px;border-left:5px double #ddd}.reactive-timeline .name-label{position:absolute;display:inline-block;border:5px double #ddd;top:-20px;padding:1px 7px 3px;border-radius:4px;background:#fff}.reactive-timeline .storyboard-item[data-sbindx="0"] .storylet .joiner{display:none}.reactive-timeline .component-box.choices{padding-bottom:0;padding-top:0}.reactive-timeline .choices .balls{position:absolute;left:15px;right:15px;top:23px;text-align:center;font-size:12px}.reactive-timeline .choices .balls .c-i-ball{display:inline-flex;justify-content:center;align-items:center;background:#999;height:22px;width:22px;color:#fff;border-radius:50%;margin:0 2px;cursor:pointer}.reactive-timeline .choices .balls .c-i-ball:active{background:#ccc;color:#000}.reactive-timeline .choices .inner-container{display:flex;overflow:auto;padding:50px 0 20px}.reactive-timeline .choice{box-shadow:-3px 3px 5px 0px #847676;border:1px solid #ddd;margin:5px;padding:5px 10px;cursor:pointer;min-width:200px}.reactive-timeline .choice.selected,.reactive-timeline .choice:active{box-shadow:inset -3px 3px 5px 0px #847676}.reactive-timeline .choice .c-i{font-size:14px;border-bottom:1px solid #999;margin-bottom:5px}\n',""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(c=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(s," */")),r=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(r).concat([o]).join("\n")}var c,a,s;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(o[c]=!0)}for(var a=0;a<e.length;a++){var s=[].concat(e[a]);i&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy90aW1lbGluZS5zY3NzPzA3ODgiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8uL3NyYy90aW1lbGluZS5zY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250YWluZXIiLCJ0YWxlIiwiJCIsIndpbmRvdyIsInJ0byIsInNiIiwicmVuZGVyIiwiaHRtIiwibGVuZ3RoIiwiY3JlYXRlU2JpSHRtIiwiaHRtbCIsImluZGV4Iiwic2JJIiwiZmluZCIsImVxIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsInNjcm9sbFRvU2JpIiwiZWFjaCIsImNoU2VsZWN0ZWQiLCJ0aGlzIiwic2hpZnRMZWZ0IiwibGVmdCIsImNvbnNvbGUiLCJsb2ciLCJzY3JvbGxMZWZ0IiwiaW5keCIsInN0Iiwic3RvcnlsZXRzIiwic3RJRCIsImNob2ljZXNIdG0iLCJjaG9pY2VJREFyciIsImNob2ljZXMiLCJzZWxlY3RlZENJRCIsInJlZHVjZSIsImNpZCIsImlkIiwidGV4dCIsImNob2ljZUJhbGxIdG0iLCJjcmVhdGVDaG9pY2VCYWxscyIsImNyZWF0ZVRpbWVsaW5lIiwiZWxlbWVudElEIiwic3RhcnQiLCJhZGRDbGFzcyIsIm9mZiIsIm9uIiwiYXR0ciIsInNsaWNlIiwicHVzaCIsImFkZFNiaSIsIm5leHQiLCJwYXJzZUludCIsImNsb3Nlc3QiLCJjaENvbnRhaW5lciIsImxlZnRTaGlmdCIsIndpZHRoIiwiYXBpIiwiY29udGVudCIsImRlZmF1bHQiLCJvcHRpb25zIiwiZXhwb3J0ZWQiLCJsb2NhbHMiLCJtZW1vIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJkb2N1bWVudCIsImFsbCIsImF0b2IiLCJnZXRUYXJnZXQiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwic3R5bGVzSW5Eb20iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJyZXN1bHQiLCJtb2R1bGVzVG9Eb20iLCJsaXN0IiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiaXRlbSIsImJhc2UiLCJjb3VudCIsImNvbmNhdCIsIm9iaiIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsImtleXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJqb2luIiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsInJlbW92ZSIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsInRvU3RyaW5nIiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJzcGxpY2UiLCJfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18iLCJ1c2VTb3VyY2VNYXAiLCJtYXAiLCJjc3NNYXBwaW5nIiwic291cmNlTWFwcGluZyIsImJhc2U2NCIsImRhdGEiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImRlZHVwZSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMs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STdMLEVBQUksRUFBR0EsRUFBSXNELEtBQUtkLE9BQVF4QyxJQUFLLENBRXBDLElBQUlzRSxFQUFLaEIsS0FBS3RELEdBQUcsR0FFUCxNQUFOc0UsSUFDRndILEVBQXVCeEgsSUFBTSxHQUtuQyxJQUFLLElBQUl1RyxFQUFLLEVBQUdBLEVBQUszSyxFQUFRc0MsT0FBUXFJLElBQU0sQ0FDMUMsSUFBSXZELEVBQU8sR0FBR0csT0FBT3ZILEVBQVEySyxJQUV6QmdCLEdBQVVDLEVBQXVCeEUsRUFBSyxNQUt0Q3NFLElBQ0d0RSxFQUFLLEdBR1JBLEVBQUssR0FBSyxHQUFHRyxPQUFPbUUsRUFBWSxTQUFTbkUsT0FBT0gsRUFBSyxJQUZyREEsRUFBSyxHQUFLc0UsR0FNZHpFLEVBQUtqQyxLQUFLb0MsTUFJUEgiLCJmaWxlIjoidGltZWxpbmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvKipcclxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHRha2UgaW4gXHJcbiAqIDEuIGh0bWwgZWxlbWVudCB3aGljaCB3aWxsIGhvbWUgdGhlIHJlYWN0aXZlIHRpbWVsaW5lLCBha2EsIHNwYWNlXHJcbiAqIDIuIHRoZSBSZWFjdGFsZSBqc29uLCBha2EsIHRhbGVcclxuICovXHJcbmltcG9ydCAnLi90aW1lbGluZS5zY3NzJ1xyXG5cclxubGV0ICQgPSB3aW5kb3cuJFxyXG53aW5kb3cucnRvID0gd2luZG93LnJ0byB8fCB7fVxyXG5sZXQgY29udGFpbmVyICAgICAgICAgICAgICAgICAgICAvLyBUaGUgc3Rvcnlib2FyZCBDb250YWluZXJcclxubGV0IHRhbGUgICAgICAgICAgICAgICAgICAgLy8gVGhlIFNyYyBKU09OXHJcbmxldCBzYiA9IFtdICAgICAgICAgLy8gYWthLCBzdG9yeWJvYXJkLCBBcnJheSBvZiBzYkl0ZW0gaS5lLiB7IHN0SUQsIHNlbGVjdGVkQ0lEIH1cclxuXHJcbi8vIENyZWF0ZSBTdG9yeW9hcmQgSXRlbVxyXG5jb25zdCBjcmVhdGVTYkkgPSAoc3RJRCwgc2VsZWN0ZWRDSUQpID0+ICh7IHN0SUQsIHNlbGVjdGVkQ0lEIH0pXHJcblxyXG5ydG8uY3JlYXRlVGltZWxpbmUgPSAoZWxlbWVudElELCB0KSA9PiB7XHJcbiAgICBjb250YWluZXIgPSAkKCcjJyArIGVsZW1lbnRJRClcclxuICAgIHRhbGUgPSB0XHJcbiAgICBzYiA9IFtjcmVhdGVTYkkodC5zdGFydCldXHJcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3JlYWN0aXZlLXRpbWVsaW5lJylcclxuICAgIHJlbmRlcigpXHJcbiAgICBpbml0RXZlbnRCaW5kaW5ncygpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlciAoKSB7XHJcbiAgICBsZXQgaHRtID0gJydcclxuICAgIGZvciAobGV0IGk9MDsgaTxzYi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBzYkkgPSBzYltpXVxyXG4gICAgICAgIGh0bSArPSBjcmVhdGVTYmlIdG0oc2JJLCBpKVxyXG4gICAgfVxyXG4gICAgY29udGFpbmVyLmh0bWwoaHRtKVxyXG4gICAgc2Nyb2xsVG9TYmkoKVxyXG4gICAgc2Nyb2xsVG9TZWxlY3RlZENob2ljZXMoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTYmlIdG0gKHNiSSwgaW5keCkge1xyXG4gICAgbGV0IHN0ID0gdGFsZS5zdG9yeWxldHNbc2JJLnN0SURdXHJcbiAgICBsZXQgY2hvaWNlc0h0bSA9IGNyZWF0ZUNob2ljZXNIdG0oc3QuY2hvaWNlcywgc2JJLnNlbGVjdGVkQ0lEKVxyXG4gICAgbGV0IGNob2ljZUJhbGxIdG0gPSBjcmVhdGVDaG9pY2VCYWxscyhzdC5jaG9pY2VzKVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInN0b3J5Ym9hcmQtaXRlbVwiIGRhdGEtc2JpbmR4PVwiJHtpbmR4fVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RvcnlsZXQgY29tcG9uZW50LWJveFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImpvaW5lclwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5hbWUtbGFiZWxcIj5TdG9yeWxldDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdj4ke3N0LnRleHR9PC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hvaWNlcyBjb21wb25lbnQtYm94ICR7c3QuY2hvaWNlcy5sZW5ndGggPD0gMCA/ICdoaWRkZW4nIDogJyd9XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiam9pbmVyXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZS1sYWJlbFwiPkNob2ljZXMgKCR7c3QuY2hvaWNlcy5sZW5ndGh9KTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJhbGxzXCI+JHtjaG9pY2VCYWxsSHRtfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlubmVyLWNvbnRhaW5lclwiPiR7Y2hvaWNlc0h0bX08L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYFxyXG4gICAgKVxyXG59XHJcblxyXG4vKipcclxuICogSXQgY3JlYXRlcyB0aGUgaW5kaXZpZHVhbCBjaG9pY2VsZXQgaHRtbHMgZm9yIGEgc3RvcnlsZXRcclxuICogQHBhcmFtIHsqfSBjaG9pY2VJREFyciAtIEFycmF5IG9mIENob2ljZSBJRHNcclxuICogQHBhcmFtIHsqfSBzZWxlY3RlZENJRCAtIFRoZSBzZWxlY3RlZCBDaG9pY2UgSUQgZm9yIGEgcGFydGljdWxhciBTdG9yeWxldFxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ2hvaWNlc0h0bSAoY2hvaWNlSURBcnIsIHNlbGVjdGVkQ0lEKSB7XHJcbiAgICByZXR1cm4gY2hvaWNlSURBcnIucmVkdWNlKChodG0sIGNpZCwgaSkgPT4ge1xyXG4gICAgICAgIGxldCBjID0gdGFsZS5jaG9pY2VzW2NpZF1cclxuICAgICAgICByZXR1cm4gaHRtICsgYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hvaWNlICR7Y2lkID09PSBzZWxlY3RlZENJRCA/ICdzZWxlY3RlZCcgOiAnJ31cIiBkYXRhLWNpZD1cIiR7Yy5pZH1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjLWlcIj5DaG9pY2UgJHtpKzF9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAke2MudGV4dH1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYFxyXG4gICAgfSwgJycpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiB0aGlzIGNyZWF0ZXMgc29tZSBkZWNvcmF0aXZlIGNpcmNsZSBodG1scyBmb3IgY2hvaWNlc1xyXG4gKiBAcGFyYW0geyp9IGNob2ljZUlEQXJyIC0gYXJyYXkgb2YgY2hvaWNlIElEcyBmb3IgYSBwYXJ0aWN1bGFyIFN0XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDaG9pY2VCYWxscyAoY2hvaWNlSURBcnIpIHtcclxuICAgIHJldHVybiBjaG9pY2VJREFyci5yZWR1Y2UoKGh0bSwgY2lkLCBpKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGh0bSArIGBcclxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjLWktYmFsbFwiPiR7aSsxfTwvc3Bhbj5cclxuICAgICAgICBgXHJcbiAgICB9LCAnJylcclxufVxyXG5cclxuLyoqXHJcbiAqIFNjcm9sbCB0byBhIHBhcnRpY3VsYXIgU3RvcnlsZXQgKG9yIFN0b3J5Ym9hcmQgSW5kZXgpXHJcbiAqIGxhc3QgaW5kZXggaXMgdGhlIGRlZmF1bHQsXHJcbiAqIGkuZS4gaWYgbm8gaW5kZXggaXMgZ2l2ZW4sIHNjcm9sbCB0byB0aGUgbGFzdCBzdG9yeWxldFxyXG4gKiBAcGFyYW0geyp9IGluZGV4IFxyXG4gKi9cclxuZnVuY3Rpb24gc2Nyb2xsVG9TYmkgKGluZGV4ID0gc2IubGVuZ3RoIC0gMSkge1xyXG4gICAgbGV0IHNiSSA9IGNvbnRhaW5lci5maW5kKCcuc3Rvcnlib2FyZC1pdGVtJykuZXEoaW5kZXgpXHJcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgc2Nyb2xsVG9wOiBzYkkub2Zmc2V0KCkudG9wIC0gMTAwXHJcbiAgICB9LCA1MDApXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZWxlY3RlZCBjaG9pY2Ugc2hvdWxkIGJlIHZpc2libGUgaW4gZWFjaCBjaG9pY2VzIGJveFxyXG4gKi9cclxuZnVuY3Rpb24gc2Nyb2xsVG9TZWxlY3RlZENob2ljZXMgKCkge1xyXG4gICAgY29udGFpbmVyLmZpbmQoJy5jaG9pY2VzIC5pbm5lci1jb250YWluZXInKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IGNoU2VsZWN0ZWQgPSAkKHRoaXMpLmZpbmQoJy5jaG9pY2Uuc2VsZWN0ZWQnKVxyXG4gICAgICAgIGlmKGNoU2VsZWN0ZWQubGVuZ3RoID09PSAwKSByZXR1cm5cclxuICAgICAgICBsZXQgc2hpZnRMZWZ0ID0gY2hTZWxlY3RlZC5lcSgwKS5vZmZzZXQoKS5sZWZ0IC0gNDFcclxuICAgICAgICBjb25zb2xlLmxvZyhzaGlmdExlZnQpXHJcbiAgICAgICAgJCh0aGlzKS5zY3JvbGxMZWZ0KHNoaWZ0TGVmdClcclxuICAgIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdCBpbmR4IGxvY2F0aW9uLCBtYXJrIHNlbGVjdGVkQ0lEIGFzIHNlbGVjdGVkQ0lEXHJcbiAqIFJlbW92ZSBldnJ5dGhpbmcgZnJvbSBpbmR4KzEgb253YXJkc1xyXG4gKiBBZGQgc3RJRCBhdCBpbmR4KzFcclxuICovXHJcbmZ1bmN0aW9uIGFkZFNiaShzdElELCBpbmR4LCBzZWxlY3RlZENJRCkge1xyXG4gICAgc2IgPSBzYi5zbGljZSgwLCBpbmR4KzEpXHJcbiAgICBzYltpbmR4XS5zZWxlY3RlZENJRCA9IHNlbGVjdGVkQ0lEXHJcbiAgICBzYi5wdXNoKHtzdElEfSlcclxuICAgIHJlbmRlcigpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRFdmVudEJpbmRpbmdzICgpIHtcclxuICAgIC8vIEZpcnN0IHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXIgYmluZGluZ3NcclxuICAgIGNvbnRhaW5lci5vZmYoKVxyXG5cclxuICAgIGNvbnRhaW5lci5vbignY2xpY2snLCAnLmNob2ljZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IGNpZCA9ICQodGhpcykuYXR0cignZGF0YS1jaWQnKVxyXG4gICAgICAgIGxldCBjID0gdGFsZS5jaG9pY2VzW2NpZF1cclxuICAgICAgICBsZXQgc3RJRCA9IGMubmV4dFxyXG4gICAgICAgIGxldCBpbmR4ID0gcGFyc2VJbnQoJCh0aGlzKS5jbG9zZXN0KCcuc3Rvcnlib2FyZC1pdGVtJykuYXR0cignZGF0YS1zYmluZHgnKSlcclxuXHJcbiAgICAgICAgYWRkU2JpKHN0SUQsIGluZHgsIGNpZClcclxuICAgIH0pXHJcblxyXG4gICAgY29udGFpbmVyLm9uKCdjbGljaycsICcuYy1pLWJhbGwnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGxldCBpbmRleCA9IHBhcnNlSW50KCQodGhpcykudGV4dCgpKSAtIDFcclxuICAgICAgICBsZXQgY2hDb250YWluZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jaG9pY2VzJykuZmluZCgnLmlubmVyLWNvbnRhaW5lcicpXHJcbiAgICAgICAgbGV0IGNoV2lkdGggPSBjaENvbnRhaW5lci5maW5kKCcuY2hvaWNlICcpLndpZHRoKClcclxuICAgICAgICBsZXQgbGVmdFNoaWZ0ID0gaW5kZXggKiBjaFdpZHRoXHJcbiAgICAgICAgY2hDb250YWluZXIuYW5pbWF0ZSh7c2Nyb2xsTGVmdDogbGVmdFNoaWZ0fSwgNTAwKVxyXG4gICAgICAgIC8vIHNjcm9sbExlZnQobGVmdFNoaWZ0KVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbiIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vdGltZWxpbmUuc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxudmFyIGV4cG9ydGVkID0gY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHt9O1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRlZDsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnJlYWN0aXZlLXRpbWVsaW5lIC5oaWRkZW57ZGlzcGxheTpub25lICFpbXBvcnRhbnR9LnJlYWN0aXZlLXRpbWVsaW5lIC5jb21wb25lbnQtYm94e2JvcmRlcjo1cHggZG91YmxlICNkZGQ7cGFkZGluZzozMHB4IDE1cHggMjVweDtib3JkZXItcmFkaXVzOjRweDttYXJnaW4tdG9wOjQwcHg7cG9zaXRpb246cmVsYXRpdmV9LnJlYWN0aXZlLXRpbWVsaW5lIC5qb2luZXJ7cG9zaXRpb246YWJzb2x1dGU7dG9wOi00NXB4O2xlZnQ6NTAlO2hlaWdodDo0MHB4O3dpZHRoOi4xcHg7Ym9yZGVyLWxlZnQ6NXB4IGRvdWJsZSAjZGRkfS5yZWFjdGl2ZS10aW1lbGluZSAubmFtZS1sYWJlbHtwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmlubGluZS1ibG9jaztib3JkZXI6NXB4IGRvdWJsZSAjZGRkO3RvcDotMjBweDtwYWRkaW5nOjFweCA3cHggM3B4O2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQ6I2ZmZn0ucmVhY3RpdmUtdGltZWxpbmUgLnN0b3J5Ym9hcmQtaXRlbVtkYXRhLXNiaW5keD1cXFwiMFxcXCJdIC5zdG9yeWxldCAuam9pbmVye2Rpc3BsYXk6bm9uZX0ucmVhY3RpdmUtdGltZWxpbmUgLmNvbXBvbmVudC1ib3guY2hvaWNlc3twYWRkaW5nLWJvdHRvbTowO3BhZGRpbmctdG9wOjB9LnJlYWN0aXZlLXRpbWVsaW5lIC5jaG9pY2VzIC5iYWxsc3twb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjE1cHg7cmlnaHQ6MTVweDt0b3A6MjNweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTJweH0ucmVhY3RpdmUtdGltZWxpbmUgLmNob2ljZXMgLmJhbGxzIC5jLWktYmFsbHtkaXNwbGF5OmlubGluZS1mbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2JhY2tncm91bmQ6Izk5OTtoZWlnaHQ6MjJweDt3aWR0aDoyMnB4O2NvbG9yOiNmZmY7Ym9yZGVyLXJhZGl1czo1MCU7bWFyZ2luOjAgMnB4O2N1cnNvcjpwb2ludGVyfS5yZWFjdGl2ZS10aW1lbGluZSAuY2hvaWNlcyAuYmFsbHMgLmMtaS1iYWxsOmFjdGl2ZXtiYWNrZ3JvdW5kOiNjY2M7Y29sb3I6IzAwMH0ucmVhY3RpdmUtdGltZWxpbmUgLmNob2ljZXMgLmlubmVyLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7b3ZlcmZsb3c6YXV0bztwYWRkaW5nOjUwcHggMCAyMHB4fS5yZWFjdGl2ZS10aW1lbGluZSAuY2hvaWNle2JveC1zaGFkb3c6LTNweCAzcHggNXB4IDBweCAjODQ3Njc2O2JvcmRlcjoxcHggc29saWQgI2RkZDttYXJnaW46NXB4O3BhZGRpbmc6NXB4IDEwcHg7Y3Vyc29yOnBvaW50ZXI7bWluLXdpZHRoOjIwMHB4fS5yZWFjdGl2ZS10aW1lbGluZSAuY2hvaWNlLnNlbGVjdGVkLC5yZWFjdGl2ZS10aW1lbGluZSAuY2hvaWNlOmFjdGl2ZXtib3gtc2hhZG93Omluc2V0IC0zcHggM3B4IDVweCAwcHggIzg0NzY3Nn0ucmVhY3RpdmUtdGltZWxpbmUgLmNob2ljZSAuYy1pe2ZvbnQtc2l6ZToxNHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICM5OTk7bWFyZ2luLWJvdHRvbTo1cHh9XFxuXCIsIFwiXCJdKTtcbi8vIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSJdLCJzb3VyY2VSb290IjoiIn0=