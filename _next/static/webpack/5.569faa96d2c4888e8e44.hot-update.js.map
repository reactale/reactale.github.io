{"version":3,"file":"static/webpack/5.569faa96d2c4888e8e44.hot-update.js","sources":["webpack:///./components/page-modules/myTales/MyLocalTales.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport NextRouter from 'next/router'\r\n// import { makeStyles } from '@material-ui/core/styles'\r\n// import Paper from '@material-ui/core/Paper'\r\nimport Box from '@material-ui/core/Box'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport ComplexCard from '../../common/cards/ComplexCard'\r\n\r\n// const useStyles = makeStyles(theme => ({\r\n//     cardsContainer: {\r\n\r\n//     }\r\n// }))\r\n\r\nconst MyLocalTales = props => {\r\n    // const classes = useStyles()\r\n    const [localTales, setLocalTales] = useState([])\r\n    const {history} = props\r\n\r\n    const handlePreview = id => history.push(`/preview/local-${id}`)\r\n    \r\n    useEffect(() => {\r\n        const allReactales = JSON.parse(window.localStorage.getItem(\"allReactales\")) || {}\r\n        setLocalTales(Object.values(allReactales))\r\n    }, [])\r\n\r\n    const goToEditTale = id => {\r\n        let r = history ? history : NextRouter\r\n        r.push(`/edit-tale/[id]`, `/edit-tale/local-${id}`)\r\n    }\r\n\r\n    const deleteTale = id => {\r\n        if(typeof(window) === 'undefined') return\r\n        \r\n        let r = window.confirm('Are you sure you want to delete this local tale. It can not be recovered later (unless you have exported it and import it later)')\r\n        if (!r) return\r\n        let allReactales = JSON.parse(window.localStorage.getItem(\"allReactales\"))\r\n        delete allReactales[id]\r\n        window.localStorage.setItem(\"allReactales\", JSON.stringify(allReactales))\r\n        setLocalTales(Object.values(allReactales))\r\n        alert('Local tale deleted successfully')\r\n    }\r\n\r\n    return (\r\n        <Box py={3}>\r\n            <Grid container spacing={2}>\r\n                {\r\n                    localTales.map (t => (\r\n                        <Grid item xs={12} sm={6} md={4} lg={3} xl={2} key={t.id}>\r\n                            <ComplexCard \r\n                                tale={t} \r\n                                expandable={false} \r\n                                handleReadTale={() => handlePreview(t.id)}\r\n                                handleEdit={goToEditTale}\r\n                                handleDelete={deleteTale}  />\r\n                        </Grid>\r\n                    ))\r\n                }\r\n            </Grid>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default MyLocalTales"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AADA;AAAA;AAAA;AACA;AADA;AACA;AAIA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAcA;AACA;AACA;;;;A","sourceRoot":""}